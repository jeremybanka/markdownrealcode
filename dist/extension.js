var Sj=Object.create;var{getPrototypeOf:Dj,defineProperty:JJ,getOwnPropertyNames:a$,getOwnPropertyDescriptor:bj}=Object,s$=Object.prototype.hasOwnProperty;var M4=(Z,J,Y)=>{Y=Z!=null?Sj(Dj(Z)):{};let $=J||!Z||!Z.__esModule?JJ(Y,"default",{value:Z,enumerable:!0}):Y;for(let Q of a$(Z))if(!s$.call($,Q))JJ($,Q,{get:()=>Z[Q],enumerable:!0});return $},n$=new WeakMap,yj=(Z)=>{var J=n$.get(Z),Y;if(J)return J;if(J=JJ({},"__esModule",{value:!0}),Z&&typeof Z==="object"||typeof Z==="function")a$(Z).map(($)=>!s$.call(J,$)&&JJ(J,$,{get:()=>Z[$],enumerable:!(Y=bj(Z,$))||Y.enumerable}));return n$.set(Z,J),J},D=(Z,J)=>()=>(J||Z((J={exports:{}}).exports,J),J.exports);var Rj=(Z,J)=>{for(var Y in J)JJ(Z,Y,{get:J[Y],enumerable:!0,configurable:!0,set:($)=>J[Y]=()=>$})};var aZ=D((i0)=>{Object.defineProperty(i0,"__esModule",{value:!0});i0.asPromise=i0.thenable=i0.typedArray=i0.stringArray=i0.array=i0.func=i0.error=i0.number=i0.string=i0.boolean=void 0;function hj(Z){return Z===!0||Z===!1}i0.boolean=hj;function r$(Z){return typeof Z==="string"||Z instanceof String}i0.string=r$;function xj(Z){return typeof Z==="number"||Z instanceof Number}i0.number=xj;function fj(Z){return Z instanceof Error}i0.error=fj;function o$(Z){return typeof Z==="function"}i0.func=o$;function t$(Z){return Array.isArray(Z)}i0.array=t$;function _j(Z){return t$(Z)&&Z.every((J)=>r$(J))}i0.stringArray=_j;function kj(Z,J){return Array.isArray(Z)&&Z.every(J)}i0.typedArray=kj;function e$(Z){return Z&&o$(Z.then)}i0.thenable=e$;function vj(Z){if(Z instanceof Promise)return Z;else if(e$(Z))return new Promise((J,Y)=>{Z.then(($)=>J($),($)=>Y($))});else return Promise.resolve(Z)}i0.asPromise=vj});var P6=D((AZ)=>{Object.defineProperty(AZ,"__esModule",{value:!0});AZ.stringArray=AZ.array=AZ.func=AZ.error=AZ.number=AZ.string=AZ.boolean=void 0;function gj(Z){return Z===!0||Z===!1}AZ.boolean=gj;function Z7(Z){return typeof Z==="string"||Z instanceof String}AZ.string=Z7;function dj(Z){return typeof Z==="number"||Z instanceof Number}AZ.number=dj;function mj(Z){return Z instanceof Error}AZ.error=mj;function pj(Z){return typeof Z==="function"}AZ.func=pj;function J7(Z){return Array.isArray(Z)}AZ.array=J7;function uj(Z){return J7(Z)&&Z.every((J)=>Z7(J))}AZ.stringArray=uj});var q4=D((s)=>{Object.defineProperty(s,"__esModule",{value:!0});s.Message=s.NotificationType9=s.NotificationType8=s.NotificationType7=s.NotificationType6=s.NotificationType5=s.NotificationType4=s.NotificationType3=s.NotificationType2=s.NotificationType1=s.NotificationType0=s.NotificationType=s.RequestType9=s.RequestType8=s.RequestType7=s.RequestType6=s.RequestType5=s.RequestType4=s.RequestType3=s.RequestType2=s.RequestType1=s.RequestType=s.RequestType0=s.AbstractMessageSignature=s.ParameterStructures=s.ResponseError=s.ErrorCodes=void 0;var G6=P6(),I4;(function(Z){Z.ParseError=-32700,Z.InvalidRequest=-32600,Z.MethodNotFound=-32601,Z.InvalidParams=-32602,Z.InternalError=-32603,Z.jsonrpcReservedErrorRangeStart=-32099,Z.serverErrorStart=-32099,Z.MessageWriteError=-32099,Z.MessageReadError=-32098,Z.PendingResponseRejected=-32097,Z.ConnectionInactive=-32096,Z.ServerNotInitialized=-32002,Z.UnknownErrorCode=-32001,Z.jsonrpcReservedErrorRangeEnd=-32000,Z.serverErrorEnd=-32000})(I4||(s.ErrorCodes=I4={}));class T4 extends Error{constructor(Z,J,Y){super(J);this.code=G6.number(Z)?Z:I4.UnknownErrorCode,this.data=Y,Object.setPrototypeOf(this,T4.prototype)}toJson(){let Z={code:this.code,message:this.message};if(this.data!==void 0)Z.data=this.data;return Z}}s.ResponseError=T4;class HZ{constructor(Z){this.kind=Z}static is(Z){return Z===HZ.auto||Z===HZ.byName||Z===HZ.byPosition}toString(){return this.kind}}s.ParameterStructures=HZ;HZ.auto=new HZ("auto");HZ.byPosition=new HZ("byPosition");HZ.byName=new HZ("byName");class k0{constructor(Z,J){this.method=Z,this.numberOfParams=J}get parameterStructures(){return HZ.auto}}s.AbstractMessageSignature=k0;class $7 extends k0{constructor(Z){super(Z,0)}}s.RequestType0=$7;class Q7 extends k0{constructor(Z,J=HZ.auto){super(Z,1);this._parameterStructures=J}get parameterStructures(){return this._parameterStructures}}s.RequestType=Q7;class z7 extends k0{constructor(Z,J=HZ.auto){super(Z,1);this._parameterStructures=J}get parameterStructures(){return this._parameterStructures}}s.RequestType1=z7;class G7 extends k0{constructor(Z){super(Z,2)}}s.RequestType2=G7;class X7 extends k0{constructor(Z){super(Z,3)}}s.RequestType3=X7;class B7 extends k0{constructor(Z){super(Z,4)}}s.RequestType4=B7;class j7 extends k0{constructor(Z){super(Z,5)}}s.RequestType5=j7;class K7 extends k0{constructor(Z){super(Z,6)}}s.RequestType6=K7;class V7 extends k0{constructor(Z){super(Z,7)}}s.RequestType7=V7;class W7 extends k0{constructor(Z){super(Z,8)}}s.RequestType8=W7;class A7 extends k0{constructor(Z){super(Z,9)}}s.RequestType9=A7;class H7 extends k0{constructor(Z,J=HZ.auto){super(Z,1);this._parameterStructures=J}get parameterStructures(){return this._parameterStructures}}s.NotificationType=H7;class O7 extends k0{constructor(Z){super(Z,0)}}s.NotificationType0=O7;class N7 extends k0{constructor(Z,J=HZ.auto){super(Z,1);this._parameterStructures=J}get parameterStructures(){return this._parameterStructures}}s.NotificationType1=N7;class E7 extends k0{constructor(Z){super(Z,2)}}s.NotificationType2=E7;class L7 extends k0{constructor(Z){super(Z,3)}}s.NotificationType3=L7;class U7 extends k0{constructor(Z){super(Z,4)}}s.NotificationType4=U7;class w7 extends k0{constructor(Z){super(Z,5)}}s.NotificationType5=w7;class F7 extends k0{constructor(Z){super(Z,6)}}s.NotificationType6=F7;class P7 extends k0{constructor(Z){super(Z,7)}}s.NotificationType7=P7;class M7 extends k0{constructor(Z){super(Z,8)}}s.NotificationType8=M7;class I7 extends k0{constructor(Z){super(Z,9)}}s.NotificationType9=I7;var Y7;(function(Z){function J(Q){let z=Q;return z&&G6.string(z.method)&&(G6.string(z.id)||G6.number(z.id))}Z.isRequest=J;function Y(Q){let z=Q;return z&&G6.string(z.method)&&Q.id===void 0}Z.isNotification=Y;function $(Q){let z=Q;return z&&(z.result!==void 0||!!z.error)&&(G6.string(z.id)||G6.number(z.id)||z.id===null)}Z.isResponse=$})(Y7||(s.Message=Y7={}))});var S4=D((l9)=>{var T7;Object.defineProperty(l9,"__esModule",{value:!0});l9.LRUCache=l9.LinkedMap=l9.Touch=void 0;var OZ;(function(Z){Z.None=0,Z.First=1,Z.AsOld=Z.First,Z.Last=2,Z.AsNew=Z.Last})(OZ||(l9.Touch=OZ={}));class C4{constructor(){this[T7]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(Z){return this._map.has(Z)}get(Z,J=OZ.None){let Y=this._map.get(Z);if(!Y)return;if(J!==OZ.None)this.touch(Y,J);return Y.value}set(Z,J,Y=OZ.None){let $=this._map.get(Z);if($){if($.value=J,Y!==OZ.None)this.touch($,Y)}else{switch($={key:Z,value:J,next:void 0,previous:void 0},Y){case OZ.None:this.addItemLast($);break;case OZ.First:this.addItemFirst($);break;case OZ.Last:this.addItemLast($);break;default:this.addItemLast($);break}this._map.set(Z,$),this._size++}return this}delete(Z){return!!this.remove(Z)}remove(Z){let J=this._map.get(Z);if(!J)return;return this._map.delete(Z),this.removeItem(J),this._size--,J.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let Z=this._head;return this._map.delete(Z.key),this.removeItem(Z),this._size--,Z.value}forEach(Z,J){let Y=this._state,$=this._head;while($){if(J)Z.bind(J)($.value,$.key,this);else Z($.value,$.key,this);if(this._state!==Y)throw new Error("LinkedMap got modified during iteration.");$=$.next}}keys(){let Z=this._state,J=this._head,Y={[Symbol.iterator]:()=>{return Y},next:()=>{if(this._state!==Z)throw new Error("LinkedMap got modified during iteration.");if(J){let $={value:J.key,done:!1};return J=J.next,$}else return{value:void 0,done:!0}}};return Y}values(){let Z=this._state,J=this._head,Y={[Symbol.iterator]:()=>{return Y},next:()=>{if(this._state!==Z)throw new Error("LinkedMap got modified during iteration.");if(J){let $={value:J.value,done:!1};return J=J.next,$}else return{value:void 0,done:!0}}};return Y}entries(){let Z=this._state,J=this._head,Y={[Symbol.iterator]:()=>{return Y},next:()=>{if(this._state!==Z)throw new Error("LinkedMap got modified during iteration.");if(J){let $={value:[J.key,J.value],done:!1};return J=J.next,$}else return{value:void 0,done:!0}}};return Y}[(T7=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(Z){if(Z>=this.size)return;if(Z===0){this.clear();return}let J=this._head,Y=this.size;while(J&&Y>Z)this._map.delete(J.key),J=J.next,Y--;if(this._head=J,this._size=Y,J)J.previous=void 0;this._state++}addItemFirst(Z){if(!this._head&&!this._tail)this._tail=Z;else if(!this._head)throw new Error("Invalid list");else Z.next=this._head,this._head.previous=Z;this._head=Z,this._state++}addItemLast(Z){if(!this._head&&!this._tail)this._head=Z;else if(!this._tail)throw new Error("Invalid list");else Z.previous=this._tail,this._tail.next=Z;this._tail=Z,this._state++}removeItem(Z){if(Z===this._head&&Z===this._tail)this._head=void 0,this._tail=void 0;else if(Z===this._head){if(!Z.next)throw new Error("Invalid list");Z.next.previous=void 0,this._head=Z.next}else if(Z===this._tail){if(!Z.previous)throw new Error("Invalid list");Z.previous.next=void 0,this._tail=Z.previous}else{let{next:J,previous:Y}=Z;if(!J||!Y)throw new Error("Invalid list");J.previous=Y,Y.next=J}Z.next=void 0,Z.previous=void 0,this._state++}touch(Z,J){if(!this._head||!this._tail)throw new Error("Invalid list");if(J!==OZ.First&&J!==OZ.Last)return;if(J===OZ.First){if(Z===this._head)return;let{next:Y,previous:$}=Z;if(Z===this._tail)$.next=void 0,this._tail=$;else Y.previous=$,$.next=Y;Z.previous=void 0,Z.next=this._head,this._head.previous=Z,this._head=Z,this._state++}else if(J===OZ.Last){if(Z===this._tail)return;let{next:Y,previous:$}=Z;if(Z===this._head)Y.previous=void 0,this._head=Y;else Y.previous=$,$.next=Y;Z.next=void 0,Z.previous=this._tail,this._tail.next=Z,this._tail=Z,this._state++}}toJSON(){let Z=[];return this.forEach((J,Y)=>{Z.push([Y,J])}),Z}fromJSON(Z){this.clear();for(let[J,Y]of Z)this.set(J,Y)}}l9.LinkedMap=C4;class q7 extends C4{constructor(Z,J=1){super();this._limit=Z,this._ratio=Math.min(Math.max(0,J),1)}get limit(){return this._limit}set limit(Z){this._limit=Z,this.checkTrim()}get ratio(){return this._ratio}set ratio(Z){this._ratio=Math.min(Math.max(0,Z),1),this.checkTrim()}get(Z,J=OZ.AsNew){return super.get(Z,J)}peek(Z){return super.get(Z,OZ.None)}set(Z,J){return super.set(Z,J,OZ.Last),this.checkTrim(),this}checkTrim(){if(this.size>this._limit)this.trimOld(Math.round(this._limit*this._ratio))}}l9.LRUCache=q7});var S7=D((_J)=>{Object.defineProperty(_J,"__esModule",{value:!0});_J.Disposable=void 0;var C7;(function(Z){function J(Y){return{dispose:Y}}Z.create=J})(C7||(_J.Disposable=C7={}))});var c9=D((y4)=>{Object.defineProperty(y4,"__esModule",{value:!0});var D4;function b4(){if(D4===void 0)throw new Error("No runtime abstraction layer installed");return D4}(function(Z){function J(Y){if(Y===void 0)throw new Error("No runtime abstraction layer provided");D4=Y}Z.install=J})(b4||(b4={}));y4.default=b4});var I6=D((M6)=>{Object.defineProperty(M6,"__esModule",{value:!0});M6.Emitter=M6.Event=void 0;var lj=c9(),D7;(function(Z){let J={dispose(){}};Z.None=function(){return J}})(D7||(M6.Event=D7={}));class b7{add(Z,J=null,Y){if(!this._callbacks)this._callbacks=[],this._contexts=[];if(this._callbacks.push(Z),this._contexts.push(J),Array.isArray(Y))Y.push({dispose:()=>this.remove(Z,J)})}remove(Z,J=null){if(!this._callbacks)return;let Y=!1;for(let $=0,Q=this._callbacks.length;$<Q;$++)if(this._callbacks[$]===Z)if(this._contexts[$]===J){this._callbacks.splice($,1),this._contexts.splice($,1);return}else Y=!0;if(Y)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...Z){if(!this._callbacks)return[];let J=[],Y=this._callbacks.slice(0),$=this._contexts.slice(0);for(let Q=0,z=Y.length;Q<z;Q++)try{J.push(Y[Q].apply($[Q],Z))}catch(G){lj.default().console.error(G)}return J}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class kJ{constructor(Z){this._options=Z}get event(){if(!this._event)this._event=(Z,J,Y)=>{if(!this._callbacks)this._callbacks=new b7;if(this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty())this._options.onFirstListenerAdd(this);this._callbacks.add(Z,J);let $={dispose:()=>{if(!this._callbacks)return;if(this._callbacks.remove(Z,J),$.dispose=kJ._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty())this._options.onLastListenerRemove(this)}};if(Array.isArray(Y))Y.push($);return $};return this._event}fire(Z){if(this._callbacks)this._callbacks.invoke.call(this._callbacks,Z)}dispose(){if(this._callbacks)this._callbacks.dispose(),this._callbacks=void 0}}M6.Emitter=kJ;kJ._noop=function(){}});var gJ=D((T6)=>{Object.defineProperty(T6,"__esModule",{value:!0});T6.CancellationTokenSource=T6.CancellationToken=void 0;var cj=c9(),ij=P6(),R4=I6(),vJ;(function(Z){Z.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:R4.Event.None}),Z.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:R4.Event.None});function J(Y){let $=Y;return $&&($===Z.None||$===Z.Cancelled||ij.boolean($.isCancellationRequested)&&!!$.onCancellationRequested)}Z.is=J})(vJ||(T6.CancellationToken=vJ={}));var nj=Object.freeze(function(Z,J){let Y=cj.default().timer.setTimeout(Z.bind(J),0);return{dispose(){Y.dispose()}}});class h4{constructor(){this._isCancelled=!1}cancel(){if(!this._isCancelled){if(this._isCancelled=!0,this._emitter)this._emitter.fire(void 0),this.dispose()}}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){if(this._isCancelled)return nj;if(!this._emitter)this._emitter=new R4.Emitter;return this._emitter.event}dispose(){if(this._emitter)this._emitter.dispose(),this._emitter=void 0}}class y7{get token(){if(!this._token)this._token=new h4;return this._token}cancel(){if(!this._token)this._token=vJ.Cancelled;else this._token.cancel()}dispose(){if(!this._token)this._token=vJ.None;else if(this._token instanceof h4)this._token.dispose()}}T6.CancellationTokenSource=y7});var _7=D((q6)=>{Object.defineProperty(q6,"__esModule",{value:!0});q6.SharedArrayReceiverStrategy=q6.SharedArraySenderStrategy=void 0;var aj=gJ(),YJ;(function(Z){Z.Continue=0,Z.Cancelled=1})(YJ||(YJ={}));class R7{constructor(){this.buffers=new Map}enableCancellation(Z){if(Z.id===null)return;let J=new SharedArrayBuffer(4),Y=new Int32Array(J,0,1);Y[0]=YJ.Continue,this.buffers.set(Z.id,J),Z.$cancellationData=J}async sendCancellation(Z,J){let Y=this.buffers.get(J);if(Y===void 0)return;let $=new Int32Array(Y,0,1);Atomics.store($,0,YJ.Cancelled)}cleanup(Z){this.buffers.delete(Z)}dispose(){this.buffers.clear()}}q6.SharedArraySenderStrategy=R7;class h7{constructor(Z){this.data=new Int32Array(Z,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===YJ.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}}class x7{constructor(Z){this.token=new h7(Z)}cancel(){}dispose(){}}class f7{constructor(){this.kind="request"}createCancellationTokenSource(Z){let J=Z.$cancellationData;if(J===void 0)return new aj.CancellationTokenSource;return new x7(J)}}q6.SharedArrayReceiverStrategy=f7});var x4=D((dJ)=>{Object.defineProperty(dJ,"__esModule",{value:!0});dJ.Semaphore=void 0;var sj=c9();class k7{constructor(Z=1){if(Z<=0)throw new Error("Capacity must be greater than 0");this._capacity=Z,this._active=0,this._waiting=[]}lock(Z){return new Promise((J,Y)=>{this._waiting.push({thunk:Z,resolve:J,reject:Y}),this.runNext()})}get active(){return this._active}runNext(){if(this._waiting.length===0||this._active===this._capacity)return;sj.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let Z=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let J=Z.thunk();if(J instanceof Promise)J.then((Y)=>{this._active--,Z.resolve(Y),this.runNext()},(Y)=>{this._active--,Z.reject(Y),this.runNext()});else this._active--,Z.resolve(J),this.runNext()}catch(J){this._active--,Z.reject(J),this.runNext()}}}dJ.Semaphore=k7});var d7=D((i9)=>{Object.defineProperty(i9,"__esModule",{value:!0});i9.ReadableStreamMessageReader=i9.AbstractMessageReader=i9.MessageReader=void 0;var _4=c9(),C6=P6(),f4=I6(),rj=x4(),v7;(function(Z){function J(Y){let $=Y;return $&&C6.func($.listen)&&C6.func($.dispose)&&C6.func($.onError)&&C6.func($.onClose)&&C6.func($.onPartialMessage)}Z.is=J})(v7||(i9.MessageReader=v7={}));class v4{constructor(){this.errorEmitter=new f4.Emitter,this.closeEmitter=new f4.Emitter,this.partialMessageEmitter=new f4.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(Z){this.errorEmitter.fire(this.asError(Z))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(Z){this.partialMessageEmitter.fire(Z)}asError(Z){if(Z instanceof Error)return Z;else return new Error(`Reader received error. Reason: ${C6.string(Z.message)?Z.message:"unknown"}`)}}i9.AbstractMessageReader=v4;var k4;(function(Z){function J(Y){let $,Q,z,G=new Map,B,K=new Map;if(Y===void 0||typeof Y==="string")$=Y??"utf-8";else{if($=Y.charset??"utf-8",Y.contentDecoder!==void 0)z=Y.contentDecoder,G.set(z.name,z);if(Y.contentDecoders!==void 0)for(let A of Y.contentDecoders)G.set(A.name,A);if(Y.contentTypeDecoder!==void 0)B=Y.contentTypeDecoder,K.set(B.name,B);if(Y.contentTypeDecoders!==void 0)for(let A of Y.contentTypeDecoders)K.set(A.name,A)}if(B===void 0)B=_4.default().applicationJson.decoder,K.set(B.name,B);return{charset:$,contentDecoder:z,contentDecoders:G,contentTypeDecoder:B,contentTypeDecoders:K}}Z.fromOptions=J})(k4||(k4={}));class g7 extends v4{constructor(Z,J){super();this.readable=Z,this.options=k4.fromOptions(J),this.buffer=_4.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new rj.Semaphore(1)}set partialMessageTimeout(Z){this._partialMessageTimeout=Z}get partialMessageTimeout(){return this._partialMessageTimeout}listen(Z){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=Z;let J=this.readable.onData((Y)=>{this.onData(Y)});return this.readable.onError((Y)=>this.fireError(Y)),this.readable.onClose(()=>this.fireClose()),J}onData(Z){try{this.buffer.append(Z);while(!0){if(this.nextMessageLength===-1){let Y=this.buffer.tryReadHeaders(!0);if(!Y)return;let $=Y.get("content-length");if(!$){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(Y))}`));return}let Q=parseInt($);if(isNaN(Q)){this.fireError(new Error(`Content-Length value must be a number. Got ${$}`));return}this.nextMessageLength=Q}let J=this.buffer.tryReadBody(this.nextMessageLength);if(J===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let Y=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(J):J,$=await this.options.contentTypeDecoder.decode(Y,this.options);this.callback($)}).catch((Y)=>{this.fireError(Y)})}}catch(J){this.fireError(J)}}clearPartialMessageTimer(){if(this.partialMessageTimer)this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0}setPartialMessageTimer(){if(this.clearPartialMessageTimer(),this._partialMessageTimeout<=0)return;this.partialMessageTimer=_4.default().timer.setTimeout((Z,J)=>{if(this.partialMessageTimer=void 0,Z===this.messageToken)this.firePartialMessage({messageToken:Z,waitingTime:J}),this.setPartialMessageTimer()},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout)}}i9.ReadableStreamMessageReader=g7});var i7=D((n9)=>{Object.defineProperty(n9,"__esModule",{value:!0});n9.WriteableStreamMessageWriter=n9.AbstractMessageWriter=n9.MessageWriter=void 0;var m7=c9(),$J=P6(),oj=x4(),p7=I6(),tj="Content-Length: ",u7=`\r
`,l7;(function(Z){function J(Y){let $=Y;return $&&$J.func($.dispose)&&$J.func($.onClose)&&$J.func($.onError)&&$J.func($.write)}Z.is=J})(l7||(n9.MessageWriter=l7={}));class d4{constructor(){this.errorEmitter=new p7.Emitter,this.closeEmitter=new p7.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(Z,J,Y){this.errorEmitter.fire([this.asError(Z),J,Y])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(Z){if(Z instanceof Error)return Z;else return new Error(`Writer received error. Reason: ${$J.string(Z.message)?Z.message:"unknown"}`)}}n9.AbstractMessageWriter=d4;var g4;(function(Z){function J(Y){if(Y===void 0||typeof Y==="string")return{charset:Y??"utf-8",contentTypeEncoder:m7.default().applicationJson.encoder};else return{charset:Y.charset??"utf-8",contentEncoder:Y.contentEncoder,contentTypeEncoder:Y.contentTypeEncoder??m7.default().applicationJson.encoder}}Z.fromOptions=J})(g4||(g4={}));class c7 extends d4{constructor(Z,J){super();this.writable=Z,this.options=g4.fromOptions(J),this.errorCount=0,this.writeSemaphore=new oj.Semaphore(1),this.writable.onError((Y)=>this.fireError(Y)),this.writable.onClose(()=>this.fireClose())}async write(Z){return this.writeSemaphore.lock(async()=>{return this.options.contentTypeEncoder.encode(Z,this.options).then((Y)=>{if(this.options.contentEncoder!==void 0)return this.options.contentEncoder.encode(Y);else return Y}).then((Y)=>{let $=[];return $.push(tj,Y.byteLength.toString(),u7),$.push(u7),this.doWrite(Z,$,Y)},(Y)=>{throw this.fireError(Y),Y})})}async doWrite(Z,J,Y){try{return await this.writable.write(J.join(""),"ascii"),this.writable.write(Y)}catch($){return this.handleError($,Z),Promise.reject($)}}handleError(Z,J){this.errorCount++,this.fireError(Z,J,this.errorCount)}end(){this.writable.end()}}n9.WriteableStreamMessageWriter=c7});var a7=D((mJ)=>{Object.defineProperty(mJ,"__esModule",{value:!0});mJ.AbstractMessageBuffer=void 0;var ej=13,ZK=10,JK=`\r
`;class n7{constructor(Z="utf-8"){this._encoding=Z,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(Z){let J=typeof Z==="string"?this.fromString(Z,this._encoding):Z;this._chunks.push(J),this._totalLength+=J.byteLength}tryReadHeaders(Z=!1){if(this._chunks.length===0)return;let J=0,Y=0,$=0,Q=0;Z:while(Y<this._chunks.length){let K=this._chunks[Y];$=0;J:while($<K.length){switch(K[$]){case ej:switch(J){case 0:J=1;break;case 2:J=3;break;default:J=0}break;case ZK:switch(J){case 1:J=2;break;case 3:J=4,$++;break Z;default:J=0}break;default:J=0}$++}Q+=K.byteLength,Y++}if(J!==4)return;let z=this._read(Q+$),G=new Map,B=this.toString(z,"ascii").split(JK);if(B.length<2)return G;for(let K=0;K<B.length-2;K++){let A=B[K],O=A.indexOf(":");if(O===-1)throw new Error(`Message header must separate key and value using ':'
${A}`);let F=A.substr(0,O),L=A.substr(O+1).trim();G.set(Z?F.toLowerCase():F,L)}return G}tryReadBody(Z){if(this._totalLength<Z)return;return this._read(Z)}get numberOfBytes(){return this._totalLength}_read(Z){if(Z===0)return this.emptyBuffer();if(Z>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===Z){let Q=this._chunks[0];return this._chunks.shift(),this._totalLength-=Z,this.asNative(Q)}if(this._chunks[0].byteLength>Z){let Q=this._chunks[0],z=this.asNative(Q,Z);return this._chunks[0]=Q.slice(Z),this._totalLength-=Z,z}let J=this.allocNative(Z),Y=0,$=0;while(Z>0){let Q=this._chunks[$];if(Q.byteLength>Z){let z=Q.slice(0,Z);J.set(z,Y),Y+=Z,this._chunks[$]=Q.slice(Z),this._totalLength-=Z,Z-=Z}else J.set(Q,Y),Y+=Q.byteLength,this._chunks.shift(),this._totalLength-=Q.byteLength,Z-=Q.byteLength}return J}}mJ.AbstractMessageBuffer=n7});var ZQ=D((Y0)=>{Object.defineProperty(Y0,"__esModule",{value:!0});Y0.createMessageConnection=Y0.ConnectionOptions=Y0.MessageStrategy=Y0.CancellationStrategy=Y0.CancellationSenderStrategy=Y0.CancellationReceiverStrategy=Y0.RequestCancellationReceiverStrategy=Y0.IdCancellationReceiverStrategy=Y0.ConnectionStrategy=Y0.ConnectionError=Y0.ConnectionErrors=Y0.LogTraceNotification=Y0.SetTraceNotification=Y0.TraceFormat=Y0.TraceValues=Y0.Trace=Y0.NullLogger=Y0.ProgressType=Y0.ProgressToken=void 0;var s7=c9(),m0=P6(),r=q4(),r7=S4(),QJ=I6(),m4=gJ(),XJ;(function(Z){Z.type=new r.NotificationType("$/cancelRequest")})(XJ||(XJ={}));var p4;(function(Z){function J(Y){return typeof Y==="string"||typeof Y==="number"}Z.is=J})(p4||(Y0.ProgressToken=p4={}));var zJ;(function(Z){Z.type=new r.NotificationType("$/progress")})(zJ||(zJ={}));class e7{constructor(){}}Y0.ProgressType=e7;var u4;(function(Z){function J(Y){return m0.func(Y)}Z.is=J})(u4||(u4={}));Y0.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var F0;(function(Z){Z[Z.Off=0]="Off",Z[Z.Messages=1]="Messages",Z[Z.Compact=2]="Compact",Z[Z.Verbose=3]="Verbose"})(F0||(Y0.Trace=F0={}));var o7;(function(Z){Z.Off="off",Z.Messages="messages",Z.Compact="compact",Z.Verbose="verbose"})(o7||(Y0.TraceValues=o7={}));(function(Z){function J($){if(!m0.string($))return Z.Off;switch($=$.toLowerCase(),$){case"off":return Z.Off;case"messages":return Z.Messages;case"compact":return Z.Compact;case"verbose":return Z.Verbose;default:return Z.Off}}Z.fromString=J;function Y($){switch($){case Z.Off:return"off";case Z.Messages:return"messages";case Z.Compact:return"compact";case Z.Verbose:return"verbose";default:return"off"}}Z.toString=Y})(F0||(Y0.Trace=F0={}));var gZ;(function(Z){Z.Text="text",Z.JSON="json"})(gZ||(Y0.TraceFormat=gZ={}));(function(Z){function J(Y){if(!m0.string(Y))return Z.Text;if(Y=Y.toLowerCase(),Y==="json")return Z.JSON;else return Z.Text}Z.fromString=J})(gZ||(Y0.TraceFormat=gZ={}));var l4;(function(Z){Z.type=new r.NotificationType("$/setTrace")})(l4||(Y0.SetTraceNotification=l4={}));var pJ;(function(Z){Z.type=new r.NotificationType("$/logTrace")})(pJ||(Y0.LogTraceNotification=pJ={}));var GJ;(function(Z){Z[Z.Closed=1]="Closed",Z[Z.Disposed=2]="Disposed",Z[Z.AlreadyListening=3]="AlreadyListening"})(GJ||(Y0.ConnectionErrors=GJ={}));class S6 extends Error{constructor(Z,J){super(J);this.code=Z,Object.setPrototypeOf(this,S6.prototype)}}Y0.ConnectionError=S6;var c4;(function(Z){function J(Y){let $=Y;return $&&m0.func($.cancelUndispatched)}Z.is=J})(c4||(Y0.ConnectionStrategy=c4={}));var uJ;(function(Z){function J(Y){let $=Y;return $&&($.kind===void 0||$.kind==="id")&&m0.func($.createCancellationTokenSource)&&($.dispose===void 0||m0.func($.dispose))}Z.is=J})(uJ||(Y0.IdCancellationReceiverStrategy=uJ={}));var i4;(function(Z){function J(Y){let $=Y;return $&&$.kind==="request"&&m0.func($.createCancellationTokenSource)&&($.dispose===void 0||m0.func($.dispose))}Z.is=J})(i4||(Y0.RequestCancellationReceiverStrategy=i4={}));var lJ;(function(Z){Z.Message=Object.freeze({createCancellationTokenSource(Y){return new m4.CancellationTokenSource}});function J(Y){return uJ.is(Y)||i4.is(Y)}Z.is=J})(lJ||(Y0.CancellationReceiverStrategy=lJ={}));var cJ;(function(Z){Z.Message=Object.freeze({sendCancellation(Y,$){return Y.sendNotification(XJ.type,{id:$})},cleanup(Y){}});function J(Y){let $=Y;return $&&m0.func($.sendCancellation)&&m0.func($.cleanup)}Z.is=J})(cJ||(Y0.CancellationSenderStrategy=cJ={}));var iJ;(function(Z){Z.Message=Object.freeze({receiver:lJ.Message,sender:cJ.Message});function J(Y){let $=Y;return $&&lJ.is($.receiver)&&cJ.is($.sender)}Z.is=J})(iJ||(Y0.CancellationStrategy=iJ={}));var nJ;(function(Z){function J(Y){let $=Y;return $&&m0.func($.handleMessage)}Z.is=J})(nJ||(Y0.MessageStrategy=nJ={}));var t7;(function(Z){function J(Y){let $=Y;return $&&(iJ.is($.cancellationStrategy)||c4.is($.connectionStrategy)||nJ.is($.messageStrategy))}Z.is=J})(t7||(Y0.ConnectionOptions=t7={}));var G9;(function(Z){Z[Z.New=1]="New",Z[Z.Listening=2]="Listening",Z[Z.Closed=3]="Closed",Z[Z.Disposed=4]="Disposed"})(G9||(G9={}));function YK(Z,J,Y,$){let Q=Y!==void 0?Y:Y0.NullLogger,z=0,G=0,B=0,K="2.0",A=void 0,O=new Map,F=void 0,L=new Map,E=new Map,T,C=new r7.LinkedMap,x=new Map,f=new Set,d=new Map,_=F0.Off,B0=gZ.Text,t,u=G9.New,a=new QJ.Emitter,j0=new QJ.Emitter,f0=new QJ.Emitter,y0=new QJ.Emitter,qZ=new QJ.Emitter,r0=$&&$.cancellationStrategy?$.cancellationStrategy:iJ.Message;function cZ(U){if(U===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+U.toString()}function XZ(U){if(U===null)return"res-unknown-"+(++B).toString();else return"res-"+U.toString()}function wZ(){return"not-"+(++G).toString()}function JZ(U,y){if(r.Message.isRequest(y))U.set(cZ(y.id),y);else if(r.Message.isResponse(y))U.set(XZ(y.id),y);else U.set(wZ(),y)}function C9(U){return}function A9(){return u===G9.Listening}function R0(){return u===G9.Closed}function CZ(){return u===G9.Disposed}function FZ(){if(u===G9.New||u===G9.Listening)u=G9.Closed,j0.fire(void 0)}function BZ(U){a.fire([U,void 0,void 0])}function g9(U){a.fire(U)}Z.onClose(FZ),Z.onError(BZ),J.onClose(FZ),J.onError(g9);function H9(){if(T||C.size===0)return;T=s7.default().timer.setImmediate(()=>{T=void 0,S9()})}function O9(U){if(r.Message.isRequest(U))N9(U);else if(r.Message.isNotification(U))Y9(U);else if(r.Message.isResponse(U))J9(U);else E9(U)}function S9(){if(C.size===0)return;let U=C.shift();try{let y=$?.messageStrategy;if(nJ.is(y))y.handleMessage(U,O9);else O9(U)}finally{H9()}}let d9=(U)=>{try{if(r.Message.isNotification(U)&&U.method===XJ.type.method){let y=U.params.id,g=cZ(y),p=C.get(g);if(r.Message.isRequest(p)){let O0=$?.connectionStrategy,M0=O0&&O0.cancelUndispatched?O0.cancelUndispatched(p,C9):C9(p);if(M0&&(M0.error!==void 0||M0.result!==void 0)){C.delete(g),d.delete(y),M0.id=p.id,iZ(M0,U.method,Date.now()),J.write(M0).catch(()=>Q.error("Sending response for canceled message failed."));return}}let E0=d.get(y);if(E0!==void 0){E0.cancel(),nZ(U);return}else f.add(y)}JZ(C,U)}finally{H9()}};function N9(U){if(CZ())return;function y(z0,U0,V0){let C0={jsonrpc:K,id:U.id};if(z0 instanceof r.ResponseError)C0.error=z0.toJson();else C0.result=z0===void 0?null:z0;iZ(C0,U0,V0),J.write(C0).catch(()=>Q.error("Sending response failed."))}function g(z0,U0,V0){let C0={jsonrpc:K,id:U.id,error:z0.toJson()};iZ(C0,U0,V0),J.write(C0).catch(()=>Q.error("Sending response failed."))}function p(z0,U0,V0){if(z0===void 0)z0=null;let C0={jsonrpc:K,id:U.id,result:z0};iZ(C0,U0,V0),J.write(C0).catch(()=>Q.error("Sending response failed."))}m9(U);let E0=O.get(U.method),O0,M0;if(E0)O0=E0.type,M0=E0.handler;let q0=Date.now();if(M0||A){let z0=U.id??String(Date.now()),U0=uJ.is(r0.receiver)?r0.receiver.createCancellationTokenSource(z0):r0.receiver.createCancellationTokenSource(U);if(U.id!==null&&f.has(U.id))U0.cancel();if(U.id!==null)d.set(z0,U0);try{let V0;if(M0)if(U.params===void 0){if(O0!==void 0&&O0.numberOfParams!==0){g(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${U.method} defines ${O0.numberOfParams} params but received none.`),U.method,q0);return}V0=M0(U0.token)}else if(Array.isArray(U.params)){if(O0!==void 0&&O0.parameterStructures===r.ParameterStructures.byName){g(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${U.method} defines parameters by name but received parameters by position`),U.method,q0);return}V0=M0(...U.params,U0.token)}else{if(O0!==void 0&&O0.parameterStructures===r.ParameterStructures.byPosition){g(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${U.method} defines parameters by position but received parameters by name`),U.method,q0);return}V0=M0(U.params,U0.token)}else if(A)V0=A(U.method,U.params,U0.token);let C0=V0;if(!V0)d.delete(z0),p(V0,U.method,q0);else if(C0.then)C0.then((c0)=>{d.delete(z0),y(c0,U.method,q0)},(c0)=>{if(d.delete(z0),c0 instanceof r.ResponseError)g(c0,U.method,q0);else if(c0&&m0.string(c0.message))g(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${U.method} failed with message: ${c0.message}`),U.method,q0);else g(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${U.method} failed unexpectedly without providing any details.`),U.method,q0)});else d.delete(z0),y(V0,U.method,q0)}catch(V0){if(d.delete(z0),V0 instanceof r.ResponseError)y(V0,U.method,q0);else if(V0&&m0.string(V0.message))g(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${U.method} failed with message: ${V0.message}`),U.method,q0);else g(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${U.method} failed unexpectedly without providing any details.`),U.method,q0)}}else g(new r.ResponseError(r.ErrorCodes.MethodNotFound,`Unhandled method ${U.method}`),U.method,q0)}function J9(U){if(CZ())return;if(U.id===null)if(U.error)Q.error(`Received response message without id: Error is: 
${JSON.stringify(U.error,void 0,4)}`);else Q.error("Received response message without id. No further error information provided.");else{let y=U.id,g=x.get(y);if(L9(U,g),g!==void 0){x.delete(y);try{if(U.error){let p=U.error;g.reject(new r.ResponseError(p.code,p.message,p.data))}else if(U.result!==void 0)g.resolve(U.result);else throw new Error("Should never happen.")}catch(p){if(p.message)Q.error(`Response handler '${g.method}' failed with message: ${p.message}`);else Q.error(`Response handler '${g.method}' failed unexpectedly.`)}}}}function Y9(U){if(CZ())return;let y=void 0,g;if(U.method===XJ.type.method){let p=U.params.id;f.delete(p),nZ(U);return}else{let p=L.get(U.method);if(p)g=p.handler,y=p.type}if(g||F)try{if(nZ(U),g)if(U.params===void 0){if(y!==void 0){if(y.numberOfParams!==0&&y.parameterStructures!==r.ParameterStructures.byName)Q.error(`Notification ${U.method} defines ${y.numberOfParams} params but received none.`)}g()}else if(Array.isArray(U.params)){let p=U.params;if(U.method===zJ.type.method&&p.length===2&&p4.is(p[0]))g({token:p[0],value:p[1]});else{if(y!==void 0){if(y.parameterStructures===r.ParameterStructures.byName)Q.error(`Notification ${U.method} defines parameters by name but received parameters by position`);if(y.numberOfParams!==U.params.length)Q.error(`Notification ${U.method} defines ${y.numberOfParams} params but received ${p.length} arguments`)}g(...p)}}else{if(y!==void 0&&y.parameterStructures===r.ParameterStructures.byPosition)Q.error(`Notification ${U.method} defines parameters by position but received parameters by name`);g(U.params)}else if(F)F(U.method,U.params)}catch(p){if(p.message)Q.error(`Notification handler '${U.method}' failed with message: ${p.message}`);else Q.error(`Notification handler '${U.method}' failed unexpectedly.`)}else f0.fire(U)}function E9(U){if(!U){Q.error("Received empty message.");return}Q.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(U,null,4)}`);let y=U;if(m0.string(y.id)||m0.number(y.id)){let g=y.id,p=x.get(g);if(p)p.reject(new Error("The received response has neither a result nor an error property."))}}function o0(U){if(U===void 0||U===null)return;switch(_){case F0.Verbose:return JSON.stringify(U,null,4);case F0.Compact:return JSON.stringify(U);default:return}}function D9(U){if(_===F0.Off||!t)return;if(B0===gZ.Text){let y=void 0;if((_===F0.Verbose||_===F0.Compact)&&U.params)y=`Params: ${o0(U.params)}

`;t.log(`Sending request '${U.method} - (${U.id})'.`,y)}else s0("send-request",U)}function $9(U){if(_===F0.Off||!t)return;if(B0===gZ.Text){let y=void 0;if(_===F0.Verbose||_===F0.Compact)if(U.params)y=`Params: ${o0(U.params)}

`;else y=`No parameters provided.

`;t.log(`Sending notification '${U.method}'.`,y)}else s0("send-notification",U)}function iZ(U,y,g){if(_===F0.Off||!t)return;if(B0===gZ.Text){let p=void 0;if(_===F0.Verbose||_===F0.Compact){if(U.error&&U.error.data)p=`Error data: ${o0(U.error.data)}

`;else if(U.result)p=`Result: ${o0(U.result)}

`;else if(U.error===void 0)p=`No result returned.

`}t.log(`Sending response '${y} - (${U.id})'. Processing request took ${Date.now()-g}ms`,p)}else s0("send-response",U)}function m9(U){if(_===F0.Off||!t)return;if(B0===gZ.Text){let y=void 0;if((_===F0.Verbose||_===F0.Compact)&&U.params)y=`Params: ${o0(U.params)}

`;t.log(`Received request '${U.method} - (${U.id})'.`,y)}else s0("receive-request",U)}function nZ(U){if(_===F0.Off||!t||U.method===pJ.type.method)return;if(B0===gZ.Text){let y=void 0;if(_===F0.Verbose||_===F0.Compact)if(U.params)y=`Params: ${o0(U.params)}

`;else y=`No parameters provided.

`;t.log(`Received notification '${U.method}'.`,y)}else s0("receive-notification",U)}function L9(U,y){if(_===F0.Off||!t)return;if(B0===gZ.Text){let g=void 0;if(_===F0.Verbose||_===F0.Compact){if(U.error&&U.error.data)g=`Error data: ${o0(U.error.data)}

`;else if(U.result)g=`Result: ${o0(U.result)}

`;else if(U.error===void 0)g=`No result returned.

`}if(y){let p=U.error?` Request failed: ${U.error.message} (${U.error.code}).`:"";t.log(`Received response '${y.method} - (${U.id})' in ${Date.now()-y.timerStart}ms.${p}`,g)}else t.log(`Received response ${U.id} without active response promise.`,g)}else s0("receive-response",U)}function s0(U,y){if(!t||_===F0.Off)return;let g={isLSPMessage:!0,type:U,message:y,timestamp:Date.now()};t.log(g)}function WZ(){if(R0())throw new S6(GJ.Closed,"Connection is closed.");if(CZ())throw new S6(GJ.Disposed,"Connection is disposed.")}function jZ(){if(A9())throw new S6(GJ.AlreadyListening,"Connection is already listening")}function kZ(){if(!A9())throw new Error("Call listen() first.")}function SZ(U){if(U===void 0)return null;else return U}function U9(U){if(U===null)return;else return U}function b9(U){return U!==void 0&&U!==null&&!Array.isArray(U)&&typeof U==="object"}function Q9(U,y){switch(U){case r.ParameterStructures.auto:if(b9(y))return U9(y);else return[SZ(y)];case r.ParameterStructures.byName:if(!b9(y))throw new Error("Received parameters by name but param is not an object literal.");return U9(y);case r.ParameterStructures.byPosition:return[SZ(y)];default:throw new Error(`Unknown parameter structure ${U.toString()}`)}}function y9(U,y){let g,p=U.numberOfParams;switch(p){case 0:g=void 0;break;case 1:g=Q9(U.parameterStructures,y[0]);break;default:g=[];for(let E0=0;E0<y.length&&E0<p;E0++)g.push(SZ(y[E0]));if(y.length<p)for(let E0=y.length;E0<p;E0++)g.push(null);break}return g}let PZ={sendNotification:(U,...y)=>{WZ();let g,p;if(m0.string(U)){g=U;let O0=y[0],M0=0,q0=r.ParameterStructures.auto;if(r.ParameterStructures.is(O0))M0=1,q0=O0;let z0=y.length,U0=z0-M0;switch(U0){case 0:p=void 0;break;case 1:p=Q9(q0,y[M0]);break;default:if(q0===r.ParameterStructures.byName)throw new Error(`Received ${U0} parameters for 'by Name' notification parameter structure.`);p=y.slice(M0,z0).map((V0)=>SZ(V0));break}}else{let O0=y;g=U.method,p=y9(U,O0)}let E0={jsonrpc:K,method:g,params:p};return $9(E0),J.write(E0).catch((O0)=>{throw Q.error("Sending notification failed."),O0})},onNotification:(U,y)=>{WZ();let g;if(m0.func(U))F=U;else if(y)if(m0.string(U))g=U,L.set(U,{type:void 0,handler:y});else g=U.method,L.set(U.method,{type:U,handler:y});return{dispose:()=>{if(g!==void 0)L.delete(g);else F=void 0}}},onProgress:(U,y,g)=>{if(E.has(y))throw new Error(`Progress handler for token ${y} already registered`);return E.set(y,g),{dispose:()=>{E.delete(y)}}},sendProgress:(U,y,g)=>{return PZ.sendNotification(zJ.type,{token:y,value:g})},onUnhandledProgress:y0.event,sendRequest:(U,...y)=>{WZ(),kZ();let g,p,E0=void 0;if(m0.string(U)){g=U;let z0=y[0],U0=y[y.length-1],V0=0,C0=r.ParameterStructures.auto;if(r.ParameterStructures.is(z0))V0=1,C0=z0;let c0=y.length;if(m4.CancellationToken.is(U0))c0=c0-1,E0=U0;let YZ=c0-V0;switch(YZ){case 0:p=void 0;break;case 1:p=Q9(C0,y[V0]);break;default:if(C0===r.ParameterStructures.byName)throw new Error(`Received ${YZ} parameters for 'by Name' request parameter structure.`);p=y.slice(V0,c0).map((p9)=>SZ(p9));break}}else{let z0=y;g=U.method,p=y9(U,z0);let U0=U.numberOfParams;E0=m4.CancellationToken.is(z0[U0])?z0[U0]:void 0}let O0=z++,M0;if(E0)M0=E0.onCancellationRequested(()=>{let z0=r0.sender.sendCancellation(PZ,O0);if(z0===void 0)return Q.log(`Received no promise from cancellation strategy when cancelling id ${O0}`),Promise.resolve();else return z0.catch(()=>{Q.log(`Sending cancellation messages for id ${O0} failed`)})});let q0={jsonrpc:K,id:O0,method:g,params:p};if(D9(q0),typeof r0.sender.enableCancellation==="function")r0.sender.enableCancellation(q0);return new Promise(async(z0,U0)=>{let V0=(YZ)=>{z0(YZ),r0.sender.cleanup(O0),M0?.dispose()},C0=(YZ)=>{U0(YZ),r0.sender.cleanup(O0),M0?.dispose()},c0={method:g,timerStart:Date.now(),resolve:V0,reject:C0};try{await J.write(q0),x.set(O0,c0)}catch(YZ){throw Q.error("Sending request failed."),c0.reject(new r.ResponseError(r.ErrorCodes.MessageWriteError,YZ.message?YZ.message:"Unknown reason")),YZ}})},onRequest:(U,y)=>{WZ();let g=null;if(u4.is(U))g=void 0,A=U;else if(m0.string(U)){if(g=null,y!==void 0)g=U,O.set(U,{handler:y,type:void 0})}else if(y!==void 0)g=U.method,O.set(U.method,{type:U,handler:y});return{dispose:()=>{if(g===null)return;if(g!==void 0)O.delete(g);else A=void 0}}},hasPendingResponse:()=>{return x.size>0},trace:async(U,y,g)=>{let p=!1,E0=gZ.Text;if(g!==void 0)if(m0.boolean(g))p=g;else p=g.sendNotification||!1,E0=g.traceFormat||gZ.Text;if(_=U,B0=E0,_===F0.Off)t=void 0;else t=y;if(p&&!R0()&&!CZ())await PZ.sendNotification(l4.type,{value:F0.toString(U)})},onError:a.event,onClose:j0.event,onUnhandledNotification:f0.event,onDispose:qZ.event,end:()=>{J.end()},dispose:()=>{if(CZ())return;u=G9.Disposed,qZ.fire(void 0);let U=new r.ResponseError(r.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let y of x.values())y.reject(U);if(x=new Map,d=new Map,f=new Set,C=new r7.LinkedMap,m0.func(J.dispose))J.dispose();if(m0.func(Z.dispose))Z.dispose()},listen:()=>{WZ(),jZ(),u=G9.Listening,Z.listen(d9)},inspect:()=>{s7.default().console.log("inspect")}};return PZ.onNotification(pJ.type,(U)=>{if(_===F0.Off||!t)return;let y=_===F0.Verbose||_===F0.Compact;t.log(U.message,y?U.verbose:void 0)}),PZ.onNotification(zJ.type,(U)=>{let y=E.get(U.token);if(y)y(U.value);else y0.fire(U)}),PZ}Y0.createMessageConnection=YK});var aJ=D((b)=>{Object.defineProperty(b,"__esModule",{value:!0});b.ProgressType=b.ProgressToken=b.createMessageConnection=b.NullLogger=b.ConnectionOptions=b.ConnectionStrategy=b.AbstractMessageBuffer=b.WriteableStreamMessageWriter=b.AbstractMessageWriter=b.MessageWriter=b.ReadableStreamMessageReader=b.AbstractMessageReader=b.MessageReader=b.SharedArrayReceiverStrategy=b.SharedArraySenderStrategy=b.CancellationToken=b.CancellationTokenSource=b.Emitter=b.Event=b.Disposable=b.LRUCache=b.Touch=b.LinkedMap=b.ParameterStructures=b.NotificationType9=b.NotificationType8=b.NotificationType7=b.NotificationType6=b.NotificationType5=b.NotificationType4=b.NotificationType3=b.NotificationType2=b.NotificationType1=b.NotificationType0=b.NotificationType=b.ErrorCodes=b.ResponseError=b.RequestType9=b.RequestType8=b.RequestType7=b.RequestType6=b.RequestType5=b.RequestType4=b.RequestType3=b.RequestType2=b.RequestType1=b.RequestType0=b.RequestType=b.Message=b.RAL=void 0;b.MessageStrategy=b.CancellationStrategy=b.CancellationSenderStrategy=b.CancellationReceiverStrategy=b.ConnectionError=b.ConnectionErrors=b.LogTraceNotification=b.SetTraceNotification=b.TraceFormat=b.TraceValues=b.Trace=void 0;var h0=q4();Object.defineProperty(b,"Message",{enumerable:!0,get:function(){return h0.Message}});Object.defineProperty(b,"RequestType",{enumerable:!0,get:function(){return h0.RequestType}});Object.defineProperty(b,"RequestType0",{enumerable:!0,get:function(){return h0.RequestType0}});Object.defineProperty(b,"RequestType1",{enumerable:!0,get:function(){return h0.RequestType1}});Object.defineProperty(b,"RequestType2",{enumerable:!0,get:function(){return h0.RequestType2}});Object.defineProperty(b,"RequestType3",{enumerable:!0,get:function(){return h0.RequestType3}});Object.defineProperty(b,"RequestType4",{enumerable:!0,get:function(){return h0.RequestType4}});Object.defineProperty(b,"RequestType5",{enumerable:!0,get:function(){return h0.RequestType5}});Object.defineProperty(b,"RequestType6",{enumerable:!0,get:function(){return h0.RequestType6}});Object.defineProperty(b,"RequestType7",{enumerable:!0,get:function(){return h0.RequestType7}});Object.defineProperty(b,"RequestType8",{enumerable:!0,get:function(){return h0.RequestType8}});Object.defineProperty(b,"RequestType9",{enumerable:!0,get:function(){return h0.RequestType9}});Object.defineProperty(b,"ResponseError",{enumerable:!0,get:function(){return h0.ResponseError}});Object.defineProperty(b,"ErrorCodes",{enumerable:!0,get:function(){return h0.ErrorCodes}});Object.defineProperty(b,"NotificationType",{enumerable:!0,get:function(){return h0.NotificationType}});Object.defineProperty(b,"NotificationType0",{enumerable:!0,get:function(){return h0.NotificationType0}});Object.defineProperty(b,"NotificationType1",{enumerable:!0,get:function(){return h0.NotificationType1}});Object.defineProperty(b,"NotificationType2",{enumerable:!0,get:function(){return h0.NotificationType2}});Object.defineProperty(b,"NotificationType3",{enumerable:!0,get:function(){return h0.NotificationType3}});Object.defineProperty(b,"NotificationType4",{enumerable:!0,get:function(){return h0.NotificationType4}});Object.defineProperty(b,"NotificationType5",{enumerable:!0,get:function(){return h0.NotificationType5}});Object.defineProperty(b,"NotificationType6",{enumerable:!0,get:function(){return h0.NotificationType6}});Object.defineProperty(b,"NotificationType7",{enumerable:!0,get:function(){return h0.NotificationType7}});Object.defineProperty(b,"NotificationType8",{enumerable:!0,get:function(){return h0.NotificationType8}});Object.defineProperty(b,"NotificationType9",{enumerable:!0,get:function(){return h0.NotificationType9}});Object.defineProperty(b,"ParameterStructures",{enumerable:!0,get:function(){return h0.ParameterStructures}});var n4=S4();Object.defineProperty(b,"LinkedMap",{enumerable:!0,get:function(){return n4.LinkedMap}});Object.defineProperty(b,"LRUCache",{enumerable:!0,get:function(){return n4.LRUCache}});Object.defineProperty(b,"Touch",{enumerable:!0,get:function(){return n4.Touch}});var $K=S7();Object.defineProperty(b,"Disposable",{enumerable:!0,get:function(){return $K.Disposable}});var JQ=I6();Object.defineProperty(b,"Event",{enumerable:!0,get:function(){return JQ.Event}});Object.defineProperty(b,"Emitter",{enumerable:!0,get:function(){return JQ.Emitter}});var YQ=gJ();Object.defineProperty(b,"CancellationTokenSource",{enumerable:!0,get:function(){return YQ.CancellationTokenSource}});Object.defineProperty(b,"CancellationToken",{enumerable:!0,get:function(){return YQ.CancellationToken}});var $Q=_7();Object.defineProperty(b,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return $Q.SharedArraySenderStrategy}});Object.defineProperty(b,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return $Q.SharedArrayReceiverStrategy}});var a4=d7();Object.defineProperty(b,"MessageReader",{enumerable:!0,get:function(){return a4.MessageReader}});Object.defineProperty(b,"AbstractMessageReader",{enumerable:!0,get:function(){return a4.AbstractMessageReader}});Object.defineProperty(b,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return a4.ReadableStreamMessageReader}});var s4=i7();Object.defineProperty(b,"MessageWriter",{enumerable:!0,get:function(){return s4.MessageWriter}});Object.defineProperty(b,"AbstractMessageWriter",{enumerable:!0,get:function(){return s4.AbstractMessageWriter}});Object.defineProperty(b,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return s4.WriteableStreamMessageWriter}});var QK=a7();Object.defineProperty(b,"AbstractMessageBuffer",{enumerable:!0,get:function(){return QK.AbstractMessageBuffer}});var VZ=ZQ();Object.defineProperty(b,"ConnectionStrategy",{enumerable:!0,get:function(){return VZ.ConnectionStrategy}});Object.defineProperty(b,"ConnectionOptions",{enumerable:!0,get:function(){return VZ.ConnectionOptions}});Object.defineProperty(b,"NullLogger",{enumerable:!0,get:function(){return VZ.NullLogger}});Object.defineProperty(b,"createMessageConnection",{enumerable:!0,get:function(){return VZ.createMessageConnection}});Object.defineProperty(b,"ProgressToken",{enumerable:!0,get:function(){return VZ.ProgressToken}});Object.defineProperty(b,"ProgressType",{enumerable:!0,get:function(){return VZ.ProgressType}});Object.defineProperty(b,"Trace",{enumerable:!0,get:function(){return VZ.Trace}});Object.defineProperty(b,"TraceValues",{enumerable:!0,get:function(){return VZ.TraceValues}});Object.defineProperty(b,"TraceFormat",{enumerable:!0,get:function(){return VZ.TraceFormat}});Object.defineProperty(b,"SetTraceNotification",{enumerable:!0,get:function(){return VZ.SetTraceNotification}});Object.defineProperty(b,"LogTraceNotification",{enumerable:!0,get:function(){return VZ.LogTraceNotification}});Object.defineProperty(b,"ConnectionErrors",{enumerable:!0,get:function(){return VZ.ConnectionErrors}});Object.defineProperty(b,"ConnectionError",{enumerable:!0,get:function(){return VZ.ConnectionError}});Object.defineProperty(b,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return VZ.CancellationReceiverStrategy}});Object.defineProperty(b,"CancellationSenderStrategy",{enumerable:!0,get:function(){return VZ.CancellationSenderStrategy}});Object.defineProperty(b,"CancellationStrategy",{enumerable:!0,get:function(){return VZ.CancellationStrategy}});Object.defineProperty(b,"MessageStrategy",{enumerable:!0,get:function(){return VZ.MessageStrategy}});var zK=c9();b.RAL=zK.default});var BQ=D((o4)=>{Object.defineProperty(o4,"__esModule",{value:!0});var QQ=require("util"),R9=aJ();class sJ extends R9.AbstractMessageBuffer{constructor(Z="utf-8"){super(Z)}emptyBuffer(){return sJ.emptyBuffer}fromString(Z,J){return Buffer.from(Z,J)}toString(Z,J){if(Z instanceof Buffer)return Z.toString(J);else return new QQ.TextDecoder(J).decode(Z)}asNative(Z,J){if(J===void 0)return Z instanceof Buffer?Z:Buffer.from(Z);else return Z instanceof Buffer?Z.slice(0,J):Buffer.from(Z,0,J)}allocNative(Z){return Buffer.allocUnsafe(Z)}}sJ.emptyBuffer=Buffer.allocUnsafe(0);class zQ{constructor(Z){this.stream=Z}onClose(Z){return this.stream.on("close",Z),R9.Disposable.create(()=>this.stream.off("close",Z))}onError(Z){return this.stream.on("error",Z),R9.Disposable.create(()=>this.stream.off("error",Z))}onEnd(Z){return this.stream.on("end",Z),R9.Disposable.create(()=>this.stream.off("end",Z))}onData(Z){return this.stream.on("data",Z),R9.Disposable.create(()=>this.stream.off("data",Z))}}class GQ{constructor(Z){this.stream=Z}onClose(Z){return this.stream.on("close",Z),R9.Disposable.create(()=>this.stream.off("close",Z))}onError(Z){return this.stream.on("error",Z),R9.Disposable.create(()=>this.stream.off("error",Z))}onEnd(Z){return this.stream.on("end",Z),R9.Disposable.create(()=>this.stream.off("end",Z))}write(Z,J){return new Promise((Y,$)=>{let Q=(z)=>{if(z===void 0||z===null)Y();else $(z)};if(typeof Z==="string")this.stream.write(Z,J,Q);else this.stream.write(Z,Q)})}end(){this.stream.end()}}var XQ=Object.freeze({messageBuffer:Object.freeze({create:(Z)=>new sJ(Z)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(Z,J)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(Z,void 0,0),J.charset))}catch(Y){return Promise.reject(Y)}}}),decoder:Object.freeze({name:"application/json",decode:(Z,J)=>{try{if(Z instanceof Buffer)return Promise.resolve(JSON.parse(Z.toString(J.charset)));else return Promise.resolve(JSON.parse(new QQ.TextDecoder(J.charset).decode(Z)))}catch(Y){return Promise.reject(Y)}}})}),stream:Object.freeze({asReadableStream:(Z)=>new zQ(Z),asWritableStream:(Z)=>new GQ(Z)}),console,timer:Object.freeze({setTimeout(Z,J,...Y){let $=setTimeout(Z,J,...Y);return{dispose:()=>clearTimeout($)}},setImmediate(Z,...J){let Y=setImmediate(Z,...J);return{dispose:()=>clearImmediate(Y)}},setInterval(Z,J,...Y){let $=setInterval(Z,J,...Y);return{dispose:()=>clearInterval($)}}})});function r4(){return XQ}(function(Z){function J(){R9.RAL.install(XQ)}Z.install=J})(r4||(r4={}));o4.default=r4});var X6=D((H0)=>{var GK=H0&&H0.__createBinding||(Object.create?function(Z,J,Y,$){if($===void 0)$=Y;var Q=Object.getOwnPropertyDescriptor(J,Y);if(!Q||("get"in Q?!J.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return J[Y]}};Object.defineProperty(Z,$,Q)}:function(Z,J,Y,$){if($===void 0)$=Y;Z[$]=J[Y]}),XK=H0&&H0.__exportStar||function(Z,J){for(var Y in Z)if(Y!=="default"&&!Object.prototype.hasOwnProperty.call(J,Y))GK(J,Z,Y)};Object.defineProperty(H0,"__esModule",{value:!0});H0.createMessageConnection=H0.createServerSocketTransport=H0.createClientSocketTransport=H0.createServerPipeTransport=H0.createClientPipeTransport=H0.generateRandomPipeName=H0.StreamMessageWriter=H0.StreamMessageReader=H0.SocketMessageWriter=H0.SocketMessageReader=H0.PortMessageWriter=H0.PortMessageReader=H0.IPCMessageWriter=H0.IPCMessageReader=void 0;var D6=BQ();D6.default.install();var jQ=require("path"),BK=require("os"),jK=require("crypto"),rJ=require("net"),dZ=aJ();XK(aJ(),H0);class VQ extends dZ.AbstractMessageReader{constructor(Z){super();this.process=Z;let J=this.process;J.on("error",(Y)=>this.fireError(Y)),J.on("close",()=>this.fireClose())}listen(Z){return this.process.on("message",Z),dZ.Disposable.create(()=>this.process.off("message",Z))}}H0.IPCMessageReader=VQ;class WQ extends dZ.AbstractMessageWriter{constructor(Z){super();this.process=Z,this.errorCount=0;let J=this.process;J.on("error",(Y)=>this.fireError(Y)),J.on("close",()=>this.fireClose)}write(Z){try{if(typeof this.process.send==="function")this.process.send(Z,void 0,void 0,(J)=>{if(J)this.errorCount++,this.handleError(J,Z);else this.errorCount=0});return Promise.resolve()}catch(J){return this.handleError(J,Z),Promise.reject(J)}}handleError(Z,J){this.errorCount++,this.fireError(Z,J,this.errorCount)}end(){}}H0.IPCMessageWriter=WQ;class AQ extends dZ.AbstractMessageReader{constructor(Z){super();this.onData=new dZ.Emitter,Z.on("close",()=>this.fireClose),Z.on("error",(J)=>this.fireError(J)),Z.on("message",(J)=>{this.onData.fire(J)})}listen(Z){return this.onData.event(Z)}}H0.PortMessageReader=AQ;class HQ extends dZ.AbstractMessageWriter{constructor(Z){super();this.port=Z,this.errorCount=0,Z.on("close",()=>this.fireClose()),Z.on("error",(J)=>this.fireError(J))}write(Z){try{return this.port.postMessage(Z),Promise.resolve()}catch(J){return this.handleError(J,Z),Promise.reject(J)}}handleError(Z,J){this.errorCount++,this.fireError(Z,J,this.errorCount)}end(){}}H0.PortMessageWriter=HQ;class b6 extends dZ.ReadableStreamMessageReader{constructor(Z,J="utf-8"){super(D6.default().stream.asReadableStream(Z),J)}}H0.SocketMessageReader=b6;class y6 extends dZ.WriteableStreamMessageWriter{constructor(Z,J){super(D6.default().stream.asWritableStream(Z),J);this.socket=Z}dispose(){super.dispose(),this.socket.destroy()}}H0.SocketMessageWriter=y6;class t4 extends dZ.ReadableStreamMessageReader{constructor(Z,J){super(D6.default().stream.asReadableStream(Z),J)}}H0.StreamMessageReader=t4;class e4 extends dZ.WriteableStreamMessageWriter{constructor(Z,J){super(D6.default().stream.asWritableStream(Z),J)}}H0.StreamMessageWriter=e4;var KQ=process.env.XDG_RUNTIME_DIR,KK=new Map([["linux",107],["darwin",103]]);function VK(){let Z=jK.randomBytes(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${Z}-sock`;let J;if(KQ)J=jQ.join(KQ,`vscode-ipc-${Z}.sock`);else J=jQ.join(BK.tmpdir(),`vscode-${Z}.sock`);let Y=KK.get(process.platform);if(Y!==void 0&&J.length>Y)D6.default().console.warn(`WARNING: IPC handle "${J}" is longer than ${Y} characters.`);return J}H0.generateRandomPipeName=VK;function WK(Z,J="utf-8"){let Y,$=new Promise((Q,z)=>{Y=Q});return new Promise((Q,z)=>{let G=rJ.createServer((B)=>{G.close(),Y([new b6(B,J),new y6(B,J)])});G.on("error",z),G.listen(Z,()=>{G.removeListener("error",z),Q({onConnected:()=>{return $}})})})}H0.createClientPipeTransport=WK;function AK(Z,J="utf-8"){let Y=rJ.createConnection(Z);return[new b6(Y,J),new y6(Y,J)]}H0.createServerPipeTransport=AK;function HK(Z,J="utf-8"){let Y,$=new Promise((Q,z)=>{Y=Q});return new Promise((Q,z)=>{let G=rJ.createServer((B)=>{G.close(),Y([new b6(B,J),new y6(B,J)])});G.on("error",z),G.listen(Z,"127.0.0.1",()=>{G.removeListener("error",z),Q({onConnected:()=>{return $}})})})}H0.createClientSocketTransport=HK;function OK(Z,J="utf-8"){let Y=rJ.createConnection(Z,"127.0.0.1");return[new b6(Y,J),new y6(Y,J)]}H0.createServerSocketTransport=OK;function NK(Z){let J=Z;return J.read!==void 0&&J.addListener!==void 0}function EK(Z){let J=Z;return J.write!==void 0&&J.addListener!==void 0}function LK(Z,J,Y,$){if(!Y)Y=dZ.NullLogger;let Q=NK(Z)?new t4(Z):Z,z=EK(J)?new e4(J):J;if(dZ.ConnectionStrategy.is($))$={connectionStrategy:$};return dZ.createMessageConnection(Q,z,Y,$)}H0.createMessageConnection=LK});var Z8=D((tH,OQ)=>{OQ.exports=X6()});var tJ=D((NQ,oJ)=>{(function(Z){if(typeof oJ==="object"&&typeof oJ.exports==="object"){var J=Z(require,NQ);if(J!==void 0)oJ.exports=J}else if(typeof define==="function"&&define.amd)define(["require","exports"],Z)})(function(Z,J){Object.defineProperty(J,"__esModule",{value:!0}),J.TextDocument=J.EOL=J.WorkspaceFolder=J.InlineCompletionContext=J.SelectedCompletionInfo=J.InlineCompletionTriggerKind=J.InlineCompletionList=J.InlineCompletionItem=J.StringValue=J.InlayHint=J.InlayHintLabelPart=J.InlayHintKind=J.InlineValueContext=J.InlineValueEvaluatableExpression=J.InlineValueVariableLookup=J.InlineValueText=J.SemanticTokens=J.SemanticTokenModifiers=J.SemanticTokenTypes=J.SelectionRange=J.DocumentLink=J.FormattingOptions=J.CodeLens=J.CodeAction=J.CodeActionContext=J.CodeActionTriggerKind=J.CodeActionKind=J.DocumentSymbol=J.WorkspaceSymbol=J.SymbolInformation=J.SymbolTag=J.SymbolKind=J.DocumentHighlight=J.DocumentHighlightKind=J.SignatureInformation=J.ParameterInformation=J.Hover=J.MarkedString=J.CompletionList=J.CompletionItem=J.CompletionItemLabelDetails=J.InsertTextMode=J.InsertReplaceEdit=J.CompletionItemTag=J.InsertTextFormat=J.CompletionItemKind=J.MarkupContent=J.MarkupKind=J.TextDocumentItem=J.OptionalVersionedTextDocumentIdentifier=J.VersionedTextDocumentIdentifier=J.TextDocumentIdentifier=J.WorkspaceChange=J.WorkspaceEdit=J.DeleteFile=J.RenameFile=J.CreateFile=J.TextDocumentEdit=J.AnnotatedTextEdit=J.ChangeAnnotationIdentifier=J.ChangeAnnotation=J.TextEdit=J.Command=J.Diagnostic=J.CodeDescription=J.DiagnosticTag=J.DiagnosticSeverity=J.DiagnosticRelatedInformation=J.FoldingRange=J.FoldingRangeKind=J.ColorPresentation=J.ColorInformation=J.Color=J.LocationLink=J.Location=J.Range=J.Position=J.uinteger=J.integer=J.URI=J.DocumentUri=void 0;var Y;(function(W){function w(P){return typeof P==="string"}W.is=w})(Y||(J.DocumentUri=Y={}));var $;(function(W){function w(P){return typeof P==="string"}W.is=w})($||(J.URI=$={}));var Q;(function(W){W.MIN_VALUE=-2147483648,W.MAX_VALUE=2147483647;function w(P){return typeof P==="number"&&W.MIN_VALUE<=P&&P<=W.MAX_VALUE}W.is=w})(Q||(J.integer=Q={}));var z;(function(W){W.MIN_VALUE=0,W.MAX_VALUE=2147483647;function w(P){return typeof P==="number"&&W.MIN_VALUE<=P&&P<=W.MAX_VALUE}W.is=w})(z||(J.uinteger=z={}));var G;(function(W){function w(H,j){if(H===Number.MAX_VALUE)H=z.MAX_VALUE;if(j===Number.MAX_VALUE)j=z.MAX_VALUE;return{line:H,character:j}}W.create=w;function P(H){var j=H;return I.objectLiteral(j)&&I.uinteger(j.line)&&I.uinteger(j.character)}W.is=P})(G||(J.Position=G={}));var B;(function(W){function w(H,j,q,R){if(I.uinteger(H)&&I.uinteger(j)&&I.uinteger(q)&&I.uinteger(R))return{start:G.create(H,j),end:G.create(q,R)};else if(G.is(H)&&G.is(j))return{start:H,end:j};else throw new Error("Range#create called with invalid arguments[".concat(H,", ").concat(j,", ").concat(q,", ").concat(R,"]"))}W.create=w;function P(H){var j=H;return I.objectLiteral(j)&&G.is(j.start)&&G.is(j.end)}W.is=P})(B||(J.Range=B={}));var K;(function(W){function w(H,j){return{uri:H,range:j}}W.create=w;function P(H){var j=H;return I.objectLiteral(j)&&B.is(j.range)&&(I.string(j.uri)||I.undefined(j.uri))}W.is=P})(K||(J.Location=K={}));var A;(function(W){function w(H,j,q,R){return{targetUri:H,targetRange:j,targetSelectionRange:q,originSelectionRange:R}}W.create=w;function P(H){var j=H;return I.objectLiteral(j)&&B.is(j.targetRange)&&I.string(j.targetUri)&&B.is(j.targetSelectionRange)&&(B.is(j.originSelectionRange)||I.undefined(j.originSelectionRange))}W.is=P})(A||(J.LocationLink=A={}));var O;(function(W){function w(H,j,q,R){return{red:H,green:j,blue:q,alpha:R}}W.create=w;function P(H){var j=H;return I.objectLiteral(j)&&I.numberRange(j.red,0,1)&&I.numberRange(j.green,0,1)&&I.numberRange(j.blue,0,1)&&I.numberRange(j.alpha,0,1)}W.is=P})(O||(J.Color=O={}));var F;(function(W){function w(H,j){return{range:H,color:j}}W.create=w;function P(H){var j=H;return I.objectLiteral(j)&&B.is(j.range)&&O.is(j.color)}W.is=P})(F||(J.ColorInformation=F={}));var L;(function(W){function w(H,j,q){return{label:H,textEdit:j,additionalTextEdits:q}}W.create=w;function P(H){var j=H;return I.objectLiteral(j)&&I.string(j.label)&&(I.undefined(j.textEdit)||t.is(j))&&(I.undefined(j.additionalTextEdits)||I.typedArray(j.additionalTextEdits,t.is))}W.is=P})(L||(J.ColorPresentation=L={}));var E;(function(W){W.Comment="comment",W.Imports="imports",W.Region="region"})(E||(J.FoldingRangeKind=E={}));var T;(function(W){function w(H,j,q,R,e,_0){var S0={startLine:H,endLine:j};if(I.defined(q))S0.startCharacter=q;if(I.defined(R))S0.endCharacter=R;if(I.defined(e))S0.kind=e;if(I.defined(_0))S0.collapsedText=_0;return S0}W.create=w;function P(H){var j=H;return I.objectLiteral(j)&&I.uinteger(j.startLine)&&I.uinteger(j.startLine)&&(I.undefined(j.startCharacter)||I.uinteger(j.startCharacter))&&(I.undefined(j.endCharacter)||I.uinteger(j.endCharacter))&&(I.undefined(j.kind)||I.string(j.kind))}W.is=P})(T||(J.FoldingRange=T={}));var C;(function(W){function w(H,j){return{location:H,message:j}}W.create=w;function P(H){var j=H;return I.defined(j)&&K.is(j.location)&&I.string(j.message)}W.is=P})(C||(J.DiagnosticRelatedInformation=C={}));var x;(function(W){W.Error=1,W.Warning=2,W.Information=3,W.Hint=4})(x||(J.DiagnosticSeverity=x={}));var f;(function(W){W.Unnecessary=1,W.Deprecated=2})(f||(J.DiagnosticTag=f={}));var d;(function(W){function w(P){var H=P;return I.objectLiteral(H)&&I.string(H.href)}W.is=w})(d||(J.CodeDescription=d={}));var _;(function(W){function w(H,j,q,R,e,_0){var S0={range:H,message:j};if(I.defined(q))S0.severity=q;if(I.defined(R))S0.code=R;if(I.defined(e))S0.source=e;if(I.defined(_0))S0.relatedInformation=_0;return S0}W.create=w;function P(H){var j,q=H;return I.defined(q)&&B.is(q.range)&&I.string(q.message)&&(I.number(q.severity)||I.undefined(q.severity))&&(I.integer(q.code)||I.string(q.code)||I.undefined(q.code))&&(I.undefined(q.codeDescription)||I.string((j=q.codeDescription)===null||j===void 0?void 0:j.href))&&(I.string(q.source)||I.undefined(q.source))&&(I.undefined(q.relatedInformation)||I.typedArray(q.relatedInformation,C.is))}W.is=P})(_||(J.Diagnostic=_={}));var B0;(function(W){function w(H,j){var q=[];for(var R=2;R<arguments.length;R++)q[R-2]=arguments[R];var e={title:H,command:j};if(I.defined(q)&&q.length>0)e.arguments=q;return e}W.create=w;function P(H){var j=H;return I.defined(j)&&I.string(j.title)&&I.string(j.command)}W.is=P})(B0||(J.Command=B0={}));var t;(function(W){function w(q,R){return{range:q,newText:R}}W.replace=w;function P(q,R){return{range:{start:q,end:q},newText:R}}W.insert=P;function H(q){return{range:q,newText:""}}W.del=H;function j(q){var R=q;return I.objectLiteral(R)&&I.string(R.newText)&&B.is(R.range)}W.is=j})(t||(J.TextEdit=t={}));var u;(function(W){function w(H,j,q){var R={label:H};if(j!==void 0)R.needsConfirmation=j;if(q!==void 0)R.description=q;return R}W.create=w;function P(H){var j=H;return I.objectLiteral(j)&&I.string(j.label)&&(I.boolean(j.needsConfirmation)||j.needsConfirmation===void 0)&&(I.string(j.description)||j.description===void 0)}W.is=P})(u||(J.ChangeAnnotation=u={}));var a;(function(W){function w(P){var H=P;return I.string(H)}W.is=w})(a||(J.ChangeAnnotationIdentifier=a={}));var j0;(function(W){function w(q,R,e){return{range:q,newText:R,annotationId:e}}W.replace=w;function P(q,R,e){return{range:{start:q,end:q},newText:R,annotationId:e}}W.insert=P;function H(q,R){return{range:q,newText:"",annotationId:R}}W.del=H;function j(q){var R=q;return t.is(R)&&(u.is(R.annotationId)||a.is(R.annotationId))}W.is=j})(j0||(J.AnnotatedTextEdit=j0={}));var f0;(function(W){function w(H,j){return{textDocument:H,edits:j}}W.create=w;function P(H){var j=H;return I.defined(j)&&R0.is(j.textDocument)&&Array.isArray(j.edits)}W.is=P})(f0||(J.TextDocumentEdit=f0={}));var y0;(function(W){function w(H,j,q){var R={kind:"create",uri:H};if(j!==void 0&&(j.overwrite!==void 0||j.ignoreIfExists!==void 0))R.options=j;if(q!==void 0)R.annotationId=q;return R}W.create=w;function P(H){var j=H;return j&&j.kind==="create"&&I.string(j.uri)&&(j.options===void 0||(j.options.overwrite===void 0||I.boolean(j.options.overwrite))&&(j.options.ignoreIfExists===void 0||I.boolean(j.options.ignoreIfExists)))&&(j.annotationId===void 0||a.is(j.annotationId))}W.is=P})(y0||(J.CreateFile=y0={}));var qZ;(function(W){function w(H,j,q,R){var e={kind:"rename",oldUri:H,newUri:j};if(q!==void 0&&(q.overwrite!==void 0||q.ignoreIfExists!==void 0))e.options=q;if(R!==void 0)e.annotationId=R;return e}W.create=w;function P(H){var j=H;return j&&j.kind==="rename"&&I.string(j.oldUri)&&I.string(j.newUri)&&(j.options===void 0||(j.options.overwrite===void 0||I.boolean(j.options.overwrite))&&(j.options.ignoreIfExists===void 0||I.boolean(j.options.ignoreIfExists)))&&(j.annotationId===void 0||a.is(j.annotationId))}W.is=P})(qZ||(J.RenameFile=qZ={}));var r0;(function(W){function w(H,j,q){var R={kind:"delete",uri:H};if(j!==void 0&&(j.recursive!==void 0||j.ignoreIfNotExists!==void 0))R.options=j;if(q!==void 0)R.annotationId=q;return R}W.create=w;function P(H){var j=H;return j&&j.kind==="delete"&&I.string(j.uri)&&(j.options===void 0||(j.options.recursive===void 0||I.boolean(j.options.recursive))&&(j.options.ignoreIfNotExists===void 0||I.boolean(j.options.ignoreIfNotExists)))&&(j.annotationId===void 0||a.is(j.annotationId))}W.is=P})(r0||(J.DeleteFile=r0={}));var cZ;(function(W){function w(P){var H=P;return H&&(H.changes!==void 0||H.documentChanges!==void 0)&&(H.documentChanges===void 0||H.documentChanges.every(function(j){if(I.string(j.kind))return y0.is(j)||qZ.is(j)||r0.is(j);else return f0.is(j)}))}W.is=w})(cZ||(J.WorkspaceEdit=cZ={}));var XZ=function(){function W(w,P){this.edits=w,this.changeAnnotations=P}return W.prototype.insert=function(w,P,H){var j,q;if(H===void 0)j=t.insert(w,P);else if(a.is(H))q=H,j=j0.insert(w,P,H);else this.assertChangeAnnotations(this.changeAnnotations),q=this.changeAnnotations.manage(H),j=j0.insert(w,P,q);if(this.edits.push(j),q!==void 0)return q},W.prototype.replace=function(w,P,H){var j,q;if(H===void 0)j=t.replace(w,P);else if(a.is(H))q=H,j=j0.replace(w,P,H);else this.assertChangeAnnotations(this.changeAnnotations),q=this.changeAnnotations.manage(H),j=j0.replace(w,P,q);if(this.edits.push(j),q!==void 0)return q},W.prototype.delete=function(w,P){var H,j;if(P===void 0)H=t.del(w);else if(a.is(P))j=P,H=j0.del(w,P);else this.assertChangeAnnotations(this.changeAnnotations),j=this.changeAnnotations.manage(P),H=j0.del(w,j);if(this.edits.push(H),j!==void 0)return j},W.prototype.add=function(w){this.edits.push(w)},W.prototype.all=function(){return this.edits},W.prototype.clear=function(){this.edits.splice(0,this.edits.length)},W.prototype.assertChangeAnnotations=function(w){if(w===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},W}(),wZ=function(){function W(w){this._annotations=w===void 0?Object.create(null):w,this._counter=0,this._size=0}return W.prototype.all=function(){return this._annotations},Object.defineProperty(W.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),W.prototype.manage=function(w,P){var H;if(a.is(w))H=w;else H=this.nextId(),P=w;if(this._annotations[H]!==void 0)throw new Error("Id ".concat(H," is already in use."));if(P===void 0)throw new Error("No annotation provided for id ".concat(H));return this._annotations[H]=P,this._size++,H},W.prototype.nextId=function(){return this._counter++,this._counter.toString()},W}(),JZ=function(){function W(w){var P=this;if(this._textEditChanges=Object.create(null),w!==void 0){if(this._workspaceEdit=w,w.documentChanges)this._changeAnnotations=new wZ(w.changeAnnotations),w.changeAnnotations=this._changeAnnotations.all(),w.documentChanges.forEach(function(H){if(f0.is(H)){var j=new XZ(H.edits,P._changeAnnotations);P._textEditChanges[H.textDocument.uri]=j}});else if(w.changes)Object.keys(w.changes).forEach(function(H){var j=new XZ(w.changes[H]);P._textEditChanges[H]=j})}else this._workspaceEdit={}}return Object.defineProperty(W.prototype,"edit",{get:function(){if(this.initDocumentChanges(),this._changeAnnotations!==void 0)if(this._changeAnnotations.size===0)this._workspaceEdit.changeAnnotations=void 0;else this._workspaceEdit.changeAnnotations=this._changeAnnotations.all();return this._workspaceEdit},enumerable:!1,configurable:!0}),W.prototype.getTextEditChange=function(w){if(R0.is(w)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var P={uri:w.uri,version:w.version},H=this._textEditChanges[P.uri];if(!H){var j=[],q={textDocument:P,edits:j};this._workspaceEdit.documentChanges.push(q),H=new XZ(j,this._changeAnnotations),this._textEditChanges[P.uri]=H}return H}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var H=this._textEditChanges[w];if(!H){var j=[];this._workspaceEdit.changes[w]=j,H=new XZ(j),this._textEditChanges[w]=H}return H}},W.prototype.initDocumentChanges=function(){if(this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0)this._changeAnnotations=new wZ,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()},W.prototype.initChanges=function(){if(this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0)this._workspaceEdit.changes=Object.create(null)},W.prototype.createFile=function(w,P,H){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var j;if(u.is(P)||a.is(P))j=P;else H=P;var q,R;if(j===void 0)q=y0.create(w,H);else R=a.is(j)?j:this._changeAnnotations.manage(j),q=y0.create(w,H,R);if(this._workspaceEdit.documentChanges.push(q),R!==void 0)return R},W.prototype.renameFile=function(w,P,H,j){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var q;if(u.is(H)||a.is(H))q=H;else j=H;var R,e;if(q===void 0)R=qZ.create(w,P,j);else e=a.is(q)?q:this._changeAnnotations.manage(q),R=qZ.create(w,P,j,e);if(this._workspaceEdit.documentChanges.push(R),e!==void 0)return e},W.prototype.deleteFile=function(w,P,H){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var j;if(u.is(P)||a.is(P))j=P;else H=P;var q,R;if(j===void 0)q=r0.create(w,H);else R=a.is(j)?j:this._changeAnnotations.manage(j),q=r0.create(w,H,R);if(this._workspaceEdit.documentChanges.push(q),R!==void 0)return R},W}();J.WorkspaceChange=JZ;var C9;(function(W){function w(H){return{uri:H}}W.create=w;function P(H){var j=H;return I.defined(j)&&I.string(j.uri)}W.is=P})(C9||(J.TextDocumentIdentifier=C9={}));var A9;(function(W){function w(H,j){return{uri:H,version:j}}W.create=w;function P(H){var j=H;return I.defined(j)&&I.string(j.uri)&&I.integer(j.version)}W.is=P})(A9||(J.VersionedTextDocumentIdentifier=A9={}));var R0;(function(W){function w(H,j){return{uri:H,version:j}}W.create=w;function P(H){var j=H;return I.defined(j)&&I.string(j.uri)&&(j.version===null||I.integer(j.version))}W.is=P})(R0||(J.OptionalVersionedTextDocumentIdentifier=R0={}));var CZ;(function(W){function w(H,j,q,R){return{uri:H,languageId:j,version:q,text:R}}W.create=w;function P(H){var j=H;return I.defined(j)&&I.string(j.uri)&&I.string(j.languageId)&&I.integer(j.version)&&I.string(j.text)}W.is=P})(CZ||(J.TextDocumentItem=CZ={}));var FZ;(function(W){W.PlainText="plaintext",W.Markdown="markdown";function w(P){var H=P;return H===W.PlainText||H===W.Markdown}W.is=w})(FZ||(J.MarkupKind=FZ={}));var BZ;(function(W){function w(P){var H=P;return I.objectLiteral(P)&&FZ.is(H.kind)&&I.string(H.value)}W.is=w})(BZ||(J.MarkupContent=BZ={}));var g9;(function(W){W.Text=1,W.Method=2,W.Function=3,W.Constructor=4,W.Field=5,W.Variable=6,W.Class=7,W.Interface=8,W.Module=9,W.Property=10,W.Unit=11,W.Value=12,W.Enum=13,W.Keyword=14,W.Snippet=15,W.Color=16,W.File=17,W.Reference=18,W.Folder=19,W.EnumMember=20,W.Constant=21,W.Struct=22,W.Event=23,W.Operator=24,W.TypeParameter=25})(g9||(J.CompletionItemKind=g9={}));var H9;(function(W){W.PlainText=1,W.Snippet=2})(H9||(J.InsertTextFormat=H9={}));var O9;(function(W){W.Deprecated=1})(O9||(J.CompletionItemTag=O9={}));var S9;(function(W){function w(H,j,q){return{newText:H,insert:j,replace:q}}W.create=w;function P(H){var j=H;return j&&I.string(j.newText)&&B.is(j.insert)&&B.is(j.replace)}W.is=P})(S9||(J.InsertReplaceEdit=S9={}));var d9;(function(W){W.asIs=1,W.adjustIndentation=2})(d9||(J.InsertTextMode=d9={}));var N9;(function(W){function w(P){var H=P;return H&&(I.string(H.detail)||H.detail===void 0)&&(I.string(H.description)||H.description===void 0)}W.is=w})(N9||(J.CompletionItemLabelDetails=N9={}));var J9;(function(W){function w(P){return{label:P}}W.create=w})(J9||(J.CompletionItem=J9={}));var Y9;(function(W){function w(P,H){return{items:P?P:[],isIncomplete:!!H}}W.create=w})(Y9||(J.CompletionList=Y9={}));var E9;(function(W){function w(H){return H.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}W.fromPlainText=w;function P(H){var j=H;return I.string(j)||I.objectLiteral(j)&&I.string(j.language)&&I.string(j.value)}W.is=P})(E9||(J.MarkedString=E9={}));var o0;(function(W){function w(P){var H=P;return!!H&&I.objectLiteral(H)&&(BZ.is(H.contents)||E9.is(H.contents)||I.typedArray(H.contents,E9.is))&&(P.range===void 0||B.is(P.range))}W.is=w})(o0||(J.Hover=o0={}));var D9;(function(W){function w(P,H){return H?{label:P,documentation:H}:{label:P}}W.create=w})(D9||(J.ParameterInformation=D9={}));var $9;(function(W){function w(P,H){var j=[];for(var q=2;q<arguments.length;q++)j[q-2]=arguments[q];var R={label:P};if(I.defined(H))R.documentation=H;if(I.defined(j))R.parameters=j;else R.parameters=[];return R}W.create=w})($9||(J.SignatureInformation=$9={}));var iZ;(function(W){W.Text=1,W.Read=2,W.Write=3})(iZ||(J.DocumentHighlightKind=iZ={}));var m9;(function(W){function w(P,H){var j={range:P};if(I.number(H))j.kind=H;return j}W.create=w})(m9||(J.DocumentHighlight=m9={}));var nZ;(function(W){W.File=1,W.Module=2,W.Namespace=3,W.Package=4,W.Class=5,W.Method=6,W.Property=7,W.Field=8,W.Constructor=9,W.Enum=10,W.Interface=11,W.Function=12,W.Variable=13,W.Constant=14,W.String=15,W.Number=16,W.Boolean=17,W.Array=18,W.Object=19,W.Key=20,W.Null=21,W.EnumMember=22,W.Struct=23,W.Event=24,W.Operator=25,W.TypeParameter=26})(nZ||(J.SymbolKind=nZ={}));var L9;(function(W){W.Deprecated=1})(L9||(J.SymbolTag=L9={}));var s0;(function(W){function w(P,H,j,q,R){var e={name:P,kind:H,location:{uri:q,range:j}};if(R)e.containerName=R;return e}W.create=w})(s0||(J.SymbolInformation=s0={}));var WZ;(function(W){function w(P,H,j,q){return q!==void 0?{name:P,kind:H,location:{uri:j,range:q}}:{name:P,kind:H,location:{uri:j}}}W.create=w})(WZ||(J.WorkspaceSymbol=WZ={}));var jZ;(function(W){function w(H,j,q,R,e,_0){var S0={name:H,detail:j,kind:q,range:R,selectionRange:e};if(_0!==void 0)S0.children=_0;return S0}W.create=w;function P(H){var j=H;return j&&I.string(j.name)&&I.number(j.kind)&&B.is(j.range)&&B.is(j.selectionRange)&&(j.detail===void 0||I.string(j.detail))&&(j.deprecated===void 0||I.boolean(j.deprecated))&&(j.children===void 0||Array.isArray(j.children))&&(j.tags===void 0||Array.isArray(j.tags))}W.is=P})(jZ||(J.DocumentSymbol=jZ={}));var kZ;(function(W){W.Empty="",W.QuickFix="quickfix",W.Refactor="refactor",W.RefactorExtract="refactor.extract",W.RefactorInline="refactor.inline",W.RefactorRewrite="refactor.rewrite",W.Source="source",W.SourceOrganizeImports="source.organizeImports",W.SourceFixAll="source.fixAll"})(kZ||(J.CodeActionKind=kZ={}));var SZ;(function(W){W.Invoked=1,W.Automatic=2})(SZ||(J.CodeActionTriggerKind=SZ={}));var U9;(function(W){function w(H,j,q){var R={diagnostics:H};if(j!==void 0&&j!==null)R.only=j;if(q!==void 0&&q!==null)R.triggerKind=q;return R}W.create=w;function P(H){var j=H;return I.defined(j)&&I.typedArray(j.diagnostics,_.is)&&(j.only===void 0||I.typedArray(j.only,I.string))&&(j.triggerKind===void 0||j.triggerKind===SZ.Invoked||j.triggerKind===SZ.Automatic)}W.is=P})(U9||(J.CodeActionContext=U9={}));var b9;(function(W){function w(H,j,q){var R={title:H},e=!0;if(typeof j==="string")e=!1,R.kind=j;else if(B0.is(j))R.command=j;else R.edit=j;if(e&&q!==void 0)R.kind=q;return R}W.create=w;function P(H){var j=H;return j&&I.string(j.title)&&(j.diagnostics===void 0||I.typedArray(j.diagnostics,_.is))&&(j.kind===void 0||I.string(j.kind))&&(j.edit!==void 0||j.command!==void 0)&&(j.command===void 0||B0.is(j.command))&&(j.isPreferred===void 0||I.boolean(j.isPreferred))&&(j.edit===void 0||cZ.is(j.edit))}W.is=P})(b9||(J.CodeAction=b9={}));var Q9;(function(W){function w(H,j){var q={range:H};if(I.defined(j))q.data=j;return q}W.create=w;function P(H){var j=H;return I.defined(j)&&B.is(j.range)&&(I.undefined(j.command)||B0.is(j.command))}W.is=P})(Q9||(J.CodeLens=Q9={}));var y9;(function(W){function w(H,j){return{tabSize:H,insertSpaces:j}}W.create=w;function P(H){var j=H;return I.defined(j)&&I.uinteger(j.tabSize)&&I.boolean(j.insertSpaces)}W.is=P})(y9||(J.FormattingOptions=y9={}));var PZ;(function(W){function w(H,j,q){return{range:H,target:j,data:q}}W.create=w;function P(H){var j=H;return I.defined(j)&&B.is(j.range)&&(I.undefined(j.target)||I.string(j.target))}W.is=P})(PZ||(J.DocumentLink=PZ={}));var U;(function(W){function w(H,j){return{range:H,parent:j}}W.create=w;function P(H){var j=H;return I.objectLiteral(j)&&B.is(j.range)&&(j.parent===void 0||W.is(j.parent))}W.is=P})(U||(J.SelectionRange=U={}));var y;(function(W){W.namespace="namespace",W.type="type",W.class="class",W.enum="enum",W.interface="interface",W.struct="struct",W.typeParameter="typeParameter",W.parameter="parameter",W.variable="variable",W.property="property",W.enumMember="enumMember",W.event="event",W.function="function",W.method="method",W.macro="macro",W.keyword="keyword",W.modifier="modifier",W.comment="comment",W.string="string",W.number="number",W.regexp="regexp",W.operator="operator",W.decorator="decorator"})(y||(J.SemanticTokenTypes=y={}));var g;(function(W){W.declaration="declaration",W.definition="definition",W.readonly="readonly",W.static="static",W.deprecated="deprecated",W.abstract="abstract",W.async="async",W.modification="modification",W.documentation="documentation",W.defaultLibrary="defaultLibrary"})(g||(J.SemanticTokenModifiers=g={}));var p;(function(W){function w(P){var H=P;return I.objectLiteral(H)&&(H.resultId===void 0||typeof H.resultId==="string")&&Array.isArray(H.data)&&(H.data.length===0||typeof H.data[0]==="number")}W.is=w})(p||(J.SemanticTokens=p={}));var E0;(function(W){function w(H,j){return{range:H,text:j}}W.create=w;function P(H){var j=H;return j!==void 0&&j!==null&&B.is(j.range)&&I.string(j.text)}W.is=P})(E0||(J.InlineValueText=E0={}));var O0;(function(W){function w(H,j,q){return{range:H,variableName:j,caseSensitiveLookup:q}}W.create=w;function P(H){var j=H;return j!==void 0&&j!==null&&B.is(j.range)&&I.boolean(j.caseSensitiveLookup)&&(I.string(j.variableName)||j.variableName===void 0)}W.is=P})(O0||(J.InlineValueVariableLookup=O0={}));var M0;(function(W){function w(H,j){return{range:H,expression:j}}W.create=w;function P(H){var j=H;return j!==void 0&&j!==null&&B.is(j.range)&&(I.string(j.expression)||j.expression===void 0)}W.is=P})(M0||(J.InlineValueEvaluatableExpression=M0={}));var q0;(function(W){function w(H,j){return{frameId:H,stoppedLocation:j}}W.create=w;function P(H){var j=H;return I.defined(j)&&B.is(H.stoppedLocation)}W.is=P})(q0||(J.InlineValueContext=q0={}));var z0;(function(W){W.Type=1,W.Parameter=2;function w(P){return P===1||P===2}W.is=w})(z0||(J.InlayHintKind=z0={}));var U0;(function(W){function w(H){return{value:H}}W.create=w;function P(H){var j=H;return I.objectLiteral(j)&&(j.tooltip===void 0||I.string(j.tooltip)||BZ.is(j.tooltip))&&(j.location===void 0||K.is(j.location))&&(j.command===void 0||B0.is(j.command))}W.is=P})(U0||(J.InlayHintLabelPart=U0={}));var V0;(function(W){function w(H,j,q){var R={position:H,label:j};if(q!==void 0)R.kind=q;return R}W.create=w;function P(H){var j=H;return I.objectLiteral(j)&&G.is(j.position)&&(I.string(j.label)||I.typedArray(j.label,U0.is))&&(j.kind===void 0||z0.is(j.kind))&&j.textEdits===void 0||I.typedArray(j.textEdits,t.is)&&(j.tooltip===void 0||I.string(j.tooltip)||BZ.is(j.tooltip))&&(j.paddingLeft===void 0||I.boolean(j.paddingLeft))&&(j.paddingRight===void 0||I.boolean(j.paddingRight))}W.is=P})(V0||(J.InlayHint=V0={}));var C0;(function(W){function w(P){return{kind:"snippet",value:P}}W.createSnippet=w})(C0||(J.StringValue=C0={}));var c0;(function(W){function w(P,H,j,q){return{insertText:P,filterText:H,range:j,command:q}}W.create=w})(c0||(J.InlineCompletionItem=c0={}));var YZ;(function(W){function w(P){return{items:P}}W.create=w})(YZ||(J.InlineCompletionList=YZ={}));var p9;(function(W){W.Invoked=0,W.Automatic=1})(p9||(J.InlineCompletionTriggerKind=p9={}));var u9;(function(W){function w(P,H){return{range:P,text:H}}W.create=w})(u9||(J.SelectedCompletionInfo=u9={}));var V;(function(W){function w(P,H){return{triggerKind:P,selectedCompletionInfo:H}}W.create=w})(V||(J.InlineCompletionContext=V={}));var S;(function(W){function w(P){var H=P;return I.objectLiteral(H)&&$.is(H.uri)&&I.string(H.name)}W.is=w})(S||(J.WorkspaceFolder=S={})),J.EOL=[`
`,`\r
`,"\r"];var i;(function(W){function w(q,R,e,_0){return new w0(q,R,e,_0)}W.create=w;function P(q){var R=q;return I.defined(R)&&I.string(R.uri)&&(I.undefined(R.languageId)||I.string(R.languageId))&&I.uinteger(R.lineCount)&&I.func(R.getText)&&I.func(R.positionAt)&&I.func(R.offsetAt)?!0:!1}W.is=P;function H(q,R){var e=q.getText(),_0=j(R,function(w9,X){var M=w9.range.start.line-X.range.start.line;if(M===0)return w9.range.start.character-X.range.start.character;return M}),S0=e.length;for(var DZ=_0.length-1;DZ>=0;DZ--){var vZ=_0[DZ],z9=q.offsetAt(vZ.range.start),K0=q.offsetAt(vZ.range.end);if(K0<=S0)e=e.substring(0,z9)+vZ.newText+e.substring(K0,e.length);else throw new Error("Overlapping edit");S0=z9}return e}W.applyEdits=H;function j(q,R){if(q.length<=1)return q;var e=q.length/2|0,_0=q.slice(0,e),S0=q.slice(e);j(_0,R),j(S0,R);var DZ=0,vZ=0,z9=0;while(DZ<_0.length&&vZ<S0.length){var K0=R(_0[DZ],S0[vZ]);if(K0<=0)q[z9++]=_0[DZ++];else q[z9++]=S0[vZ++]}while(DZ<_0.length)q[z9++]=_0[DZ++];while(vZ<S0.length)q[z9++]=S0[vZ++];return q}})(i||(J.TextDocument=i={}));var w0=function(){function W(w,P,H,j){this._uri=w,this._languageId=P,this._version=H,this._content=j,this._lineOffsets=void 0}return Object.defineProperty(W.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),W.prototype.getText=function(w){if(w){var P=this.offsetAt(w.start),H=this.offsetAt(w.end);return this._content.substring(P,H)}return this._content},W.prototype.update=function(w,P){this._content=w.text,this._version=P,this._lineOffsets=void 0},W.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){var w=[],P=this._content,H=!0;for(var j=0;j<P.length;j++){if(H)w.push(j),H=!1;var q=P.charAt(j);if(H=q==="\r"||q===`
`,q==="\r"&&j+1<P.length&&P.charAt(j+1)===`
`)j++}if(H&&P.length>0)w.push(P.length);this._lineOffsets=w}return this._lineOffsets},W.prototype.positionAt=function(w){w=Math.max(Math.min(w,this._content.length),0);var P=this.getLineOffsets(),H=0,j=P.length;if(j===0)return G.create(0,w);while(H<j){var q=Math.floor((H+j)/2);if(P[q]>w)j=q;else H=q+1}var R=H-1;return G.create(R,w-P[R])},W.prototype.offsetAt=function(w){var P=this.getLineOffsets();if(w.line>=P.length)return this._content.length;else if(w.line<0)return 0;var H=P[w.line],j=w.line+1<P.length?P[w.line+1]:this._content.length;return Math.max(Math.min(H+w.character,j),H)},Object.defineProperty(W.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),W}(),I;(function(W){var w=Object.prototype.toString;function P(K0){return typeof K0!=="undefined"}W.defined=P;function H(K0){return typeof K0==="undefined"}W.undefined=H;function j(K0){return K0===!0||K0===!1}W.boolean=j;function q(K0){return w.call(K0)==="[object String]"}W.string=q;function R(K0){return w.call(K0)==="[object Number]"}W.number=R;function e(K0,w9,X){return w.call(K0)==="[object Number]"&&w9<=K0&&K0<=X}W.numberRange=e;function _0(K0){return w.call(K0)==="[object Number]"&&-2147483648<=K0&&K0<=2147483647}W.integer=_0;function S0(K0){return w.call(K0)==="[object Number]"&&0<=K0&&K0<=2147483647}W.uinteger=S0;function DZ(K0){return w.call(K0)==="[object Function]"}W.func=DZ;function vZ(K0){return K0!==null&&typeof K0==="object"}W.objectLiteral=vZ;function z9(K0,w9){return Array.isArray(K0)&&K0.every(w9)}W.typedArray=z9})(I||(I={}))})});var v0=D((bZ)=>{Object.defineProperty(bZ,"__esModule",{value:!0});bZ.ProtocolNotificationType=bZ.ProtocolNotificationType0=bZ.ProtocolRequestType=bZ.ProtocolRequestType0=bZ.RegistrationType=bZ.MessageDirection=void 0;var R6=X6(),EQ;(function(Z){Z.clientToServer="clientToServer",Z.serverToClient="serverToClient",Z.both="both"})(EQ||(bZ.MessageDirection=EQ={}));class LQ{constructor(Z){this.method=Z}}bZ.RegistrationType=LQ;class UQ extends R6.RequestType0{constructor(Z){super(Z)}}bZ.ProtocolRequestType0=UQ;class wQ extends R6.RequestType{constructor(Z){super(Z,R6.ParameterStructures.byName)}}bZ.ProtocolRequestType=wQ;class FQ extends R6.NotificationType0{constructor(Z){super(Z)}}bZ.ProtocolNotificationType0=FQ;class PQ extends R6.NotificationType{constructor(Z){super(Z,R6.ParameterStructures.byName)}}bZ.ProtocolNotificationType=PQ});var eJ=D((t0)=>{Object.defineProperty(t0,"__esModule",{value:!0});t0.objectLiteral=t0.typedArray=t0.stringArray=t0.array=t0.func=t0.error=t0.number=t0.string=t0.boolean=void 0;function UK(Z){return Z===!0||Z===!1}t0.boolean=UK;function MQ(Z){return typeof Z==="string"||Z instanceof String}t0.string=MQ;function wK(Z){return typeof Z==="number"||Z instanceof Number}t0.number=wK;function FK(Z){return Z instanceof Error}t0.error=FK;function PK(Z){return typeof Z==="function"}t0.func=PK;function IQ(Z){return Array.isArray(Z)}t0.array=IQ;function MK(Z){return IQ(Z)&&Z.every((J)=>MQ(J))}t0.stringArray=MK;function IK(Z,J){return Array.isArray(Z)&&Z.every(J)}t0.typedArray=IK;function TK(Z){return Z!==null&&typeof Z==="object"}t0.objectLiteral=TK});var CQ=D((ZY)=>{Object.defineProperty(ZY,"__esModule",{value:!0});ZY.ImplementationRequest=void 0;var TQ=v0(),qQ;(function(Z){Z.method="textDocument/implementation",Z.messageDirection=TQ.MessageDirection.clientToServer,Z.type=new TQ.ProtocolRequestType(Z.method)})(qQ||(ZY.ImplementationRequest=qQ={}))});var bQ=D((JY)=>{Object.defineProperty(JY,"__esModule",{value:!0});JY.TypeDefinitionRequest=void 0;var SQ=v0(),DQ;(function(Z){Z.method="textDocument/typeDefinition",Z.messageDirection=SQ.MessageDirection.clientToServer,Z.type=new SQ.ProtocolRequestType(Z.method)})(DQ||(JY.TypeDefinitionRequest=DQ={}))});var hQ=D((h6)=>{Object.defineProperty(h6,"__esModule",{value:!0});h6.DidChangeWorkspaceFoldersNotification=h6.WorkspaceFoldersRequest=void 0;var YY=v0(),yQ;(function(Z){Z.method="workspace/workspaceFolders",Z.messageDirection=YY.MessageDirection.serverToClient,Z.type=new YY.ProtocolRequestType0(Z.method)})(yQ||(h6.WorkspaceFoldersRequest=yQ={}));var RQ;(function(Z){Z.method="workspace/didChangeWorkspaceFolders",Z.messageDirection=YY.MessageDirection.clientToServer,Z.type=new YY.ProtocolNotificationType(Z.method)})(RQ||(h6.DidChangeWorkspaceFoldersNotification=RQ={}))});var _Q=D(($Y)=>{Object.defineProperty($Y,"__esModule",{value:!0});$Y.ConfigurationRequest=void 0;var xQ=v0(),fQ;(function(Z){Z.method="workspace/configuration",Z.messageDirection=xQ.MessageDirection.serverToClient,Z.type=new xQ.ProtocolRequestType(Z.method)})(fQ||($Y.ConfigurationRequest=fQ={}))});var gQ=D((x6)=>{Object.defineProperty(x6,"__esModule",{value:!0});x6.ColorPresentationRequest=x6.DocumentColorRequest=void 0;var QY=v0(),kQ;(function(Z){Z.method="textDocument/documentColor",Z.messageDirection=QY.MessageDirection.clientToServer,Z.type=new QY.ProtocolRequestType(Z.method)})(kQ||(x6.DocumentColorRequest=kQ={}));var vQ;(function(Z){Z.method="textDocument/colorPresentation",Z.messageDirection=QY.MessageDirection.clientToServer,Z.type=new QY.ProtocolRequestType(Z.method)})(vQ||(x6.ColorPresentationRequest=vQ={}))});var pQ=D((f6)=>{Object.defineProperty(f6,"__esModule",{value:!0});f6.FoldingRangeRefreshRequest=f6.FoldingRangeRequest=void 0;var zY=v0(),dQ;(function(Z){Z.method="textDocument/foldingRange",Z.messageDirection=zY.MessageDirection.clientToServer,Z.type=new zY.ProtocolRequestType(Z.method)})(dQ||(f6.FoldingRangeRequest=dQ={}));var mQ;(function(Z){Z.method="workspace/foldingRange/refresh",Z.messageDirection=zY.MessageDirection.serverToClient,Z.type=new zY.ProtocolRequestType0(Z.method)})(mQ||(f6.FoldingRangeRefreshRequest=mQ={}))});var cQ=D((GY)=>{Object.defineProperty(GY,"__esModule",{value:!0});GY.DeclarationRequest=void 0;var uQ=v0(),lQ;(function(Z){Z.method="textDocument/declaration",Z.messageDirection=uQ.MessageDirection.clientToServer,Z.type=new uQ.ProtocolRequestType(Z.method)})(lQ||(GY.DeclarationRequest=lQ={}))});var aQ=D((XY)=>{Object.defineProperty(XY,"__esModule",{value:!0});XY.SelectionRangeRequest=void 0;var iQ=v0(),nQ;(function(Z){Z.method="textDocument/selectionRange",Z.messageDirection=iQ.MessageDirection.clientToServer,Z.type=new iQ.ProtocolRequestType(Z.method)})(nQ||(XY.SelectionRangeRequest=nQ={}))});var tQ=D((a9)=>{Object.defineProperty(a9,"__esModule",{value:!0});a9.WorkDoneProgressCancelNotification=a9.WorkDoneProgressCreateRequest=a9.WorkDoneProgress=void 0;var qK=X6(),BY=v0(),sQ;(function(Z){Z.type=new qK.ProgressType;function J(Y){return Y===Z.type}Z.is=J})(sQ||(a9.WorkDoneProgress=sQ={}));var rQ;(function(Z){Z.method="window/workDoneProgress/create",Z.messageDirection=BY.MessageDirection.serverToClient,Z.type=new BY.ProtocolRequestType(Z.method)})(rQ||(a9.WorkDoneProgressCreateRequest=rQ={}));var oQ;(function(Z){Z.method="window/workDoneProgress/cancel",Z.messageDirection=BY.MessageDirection.clientToServer,Z.type=new BY.ProtocolNotificationType(Z.method)})(oQ||(a9.WorkDoneProgressCancelNotification=oQ={}))});var Yz=D((s9)=>{Object.defineProperty(s9,"__esModule",{value:!0});s9.CallHierarchyOutgoingCallsRequest=s9.CallHierarchyIncomingCallsRequest=s9.CallHierarchyPrepareRequest=void 0;var _6=v0(),eQ;(function(Z){Z.method="textDocument/prepareCallHierarchy",Z.messageDirection=_6.MessageDirection.clientToServer,Z.type=new _6.ProtocolRequestType(Z.method)})(eQ||(s9.CallHierarchyPrepareRequest=eQ={}));var Zz;(function(Z){Z.method="callHierarchy/incomingCalls",Z.messageDirection=_6.MessageDirection.clientToServer,Z.type=new _6.ProtocolRequestType(Z.method)})(Zz||(s9.CallHierarchyIncomingCallsRequest=Zz={}));var Jz;(function(Z){Z.method="callHierarchy/outgoingCalls",Z.messageDirection=_6.MessageDirection.clientToServer,Z.type=new _6.ProtocolRequestType(Z.method)})(Jz||(s9.CallHierarchyOutgoingCallsRequest=Jz={}))});var Bz=D((yZ)=>{Object.defineProperty(yZ,"__esModule",{value:!0});yZ.SemanticTokensRefreshRequest=yZ.SemanticTokensRangeRequest=yZ.SemanticTokensDeltaRequest=yZ.SemanticTokensRequest=yZ.SemanticTokensRegistrationType=yZ.TokenFormat=void 0;var h9=v0(),$z;(function(Z){Z.Relative="relative"})($z||(yZ.TokenFormat=$z={}));var BJ;(function(Z){Z.method="textDocument/semanticTokens",Z.type=new h9.RegistrationType(Z.method)})(BJ||(yZ.SemanticTokensRegistrationType=BJ={}));var Qz;(function(Z){Z.method="textDocument/semanticTokens/full",Z.messageDirection=h9.MessageDirection.clientToServer,Z.type=new h9.ProtocolRequestType(Z.method),Z.registrationMethod=BJ.method})(Qz||(yZ.SemanticTokensRequest=Qz={}));var zz;(function(Z){Z.method="textDocument/semanticTokens/full/delta",Z.messageDirection=h9.MessageDirection.clientToServer,Z.type=new h9.ProtocolRequestType(Z.method),Z.registrationMethod=BJ.method})(zz||(yZ.SemanticTokensDeltaRequest=zz={}));var Gz;(function(Z){Z.method="textDocument/semanticTokens/range",Z.messageDirection=h9.MessageDirection.clientToServer,Z.type=new h9.ProtocolRequestType(Z.method),Z.registrationMethod=BJ.method})(Gz||(yZ.SemanticTokensRangeRequest=Gz={}));var Xz;(function(Z){Z.method="workspace/semanticTokens/refresh",Z.messageDirection=h9.MessageDirection.serverToClient,Z.type=new h9.ProtocolRequestType0(Z.method)})(Xz||(yZ.SemanticTokensRefreshRequest=Xz={}))});var Vz=D((jY)=>{Object.defineProperty(jY,"__esModule",{value:!0});jY.ShowDocumentRequest=void 0;var jz=v0(),Kz;(function(Z){Z.method="window/showDocument",Z.messageDirection=jz.MessageDirection.serverToClient,Z.type=new jz.ProtocolRequestType(Z.method)})(Kz||(jY.ShowDocumentRequest=Kz={}))});var Hz=D((KY)=>{Object.defineProperty(KY,"__esModule",{value:!0});KY.LinkedEditingRangeRequest=void 0;var Wz=v0(),Az;(function(Z){Z.method="textDocument/linkedEditingRange",Z.messageDirection=Wz.MessageDirection.clientToServer,Z.type=new Wz.ProtocolRequestType(Z.method)})(Az||(KY.LinkedEditingRangeRequest=Az={}))});var Pz=D((NZ)=>{Object.defineProperty(NZ,"__esModule",{value:!0});NZ.WillDeleteFilesRequest=NZ.DidDeleteFilesNotification=NZ.DidRenameFilesNotification=NZ.WillRenameFilesRequest=NZ.DidCreateFilesNotification=NZ.WillCreateFilesRequest=NZ.FileOperationPatternKind=void 0;var sZ=v0(),Oz;(function(Z){Z.file="file",Z.folder="folder"})(Oz||(NZ.FileOperationPatternKind=Oz={}));var Nz;(function(Z){Z.method="workspace/willCreateFiles",Z.messageDirection=sZ.MessageDirection.clientToServer,Z.type=new sZ.ProtocolRequestType(Z.method)})(Nz||(NZ.WillCreateFilesRequest=Nz={}));var Ez;(function(Z){Z.method="workspace/didCreateFiles",Z.messageDirection=sZ.MessageDirection.clientToServer,Z.type=new sZ.ProtocolNotificationType(Z.method)})(Ez||(NZ.DidCreateFilesNotification=Ez={}));var Lz;(function(Z){Z.method="workspace/willRenameFiles",Z.messageDirection=sZ.MessageDirection.clientToServer,Z.type=new sZ.ProtocolRequestType(Z.method)})(Lz||(NZ.WillRenameFilesRequest=Lz={}));var Uz;(function(Z){Z.method="workspace/didRenameFiles",Z.messageDirection=sZ.MessageDirection.clientToServer,Z.type=new sZ.ProtocolNotificationType(Z.method)})(Uz||(NZ.DidRenameFilesNotification=Uz={}));var wz;(function(Z){Z.method="workspace/didDeleteFiles",Z.messageDirection=sZ.MessageDirection.clientToServer,Z.type=new sZ.ProtocolNotificationType(Z.method)})(wz||(NZ.DidDeleteFilesNotification=wz={}));var Fz;(function(Z){Z.method="workspace/willDeleteFiles",Z.messageDirection=sZ.MessageDirection.clientToServer,Z.type=new sZ.ProtocolRequestType(Z.method)})(Fz||(NZ.WillDeleteFilesRequest=Fz={}))});var Cz=D((r9)=>{Object.defineProperty(r9,"__esModule",{value:!0});r9.MonikerRequest=r9.MonikerKind=r9.UniquenessLevel=void 0;var Mz=v0(),Iz;(function(Z){Z.document="document",Z.project="project",Z.group="group",Z.scheme="scheme",Z.global="global"})(Iz||(r9.UniquenessLevel=Iz={}));var Tz;(function(Z){Z.$import="import",Z.$export="export",Z.local="local"})(Tz||(r9.MonikerKind=Tz={}));var qz;(function(Z){Z.method="textDocument/moniker",Z.messageDirection=Mz.MessageDirection.clientToServer,Z.type=new Mz.ProtocolRequestType(Z.method)})(qz||(r9.MonikerRequest=qz={}))});var yz=D((o9)=>{Object.defineProperty(o9,"__esModule",{value:!0});o9.TypeHierarchySubtypesRequest=o9.TypeHierarchySupertypesRequest=o9.TypeHierarchyPrepareRequest=void 0;var k6=v0(),Sz;(function(Z){Z.method="textDocument/prepareTypeHierarchy",Z.messageDirection=k6.MessageDirection.clientToServer,Z.type=new k6.ProtocolRequestType(Z.method)})(Sz||(o9.TypeHierarchyPrepareRequest=Sz={}));var Dz;(function(Z){Z.method="typeHierarchy/supertypes",Z.messageDirection=k6.MessageDirection.clientToServer,Z.type=new k6.ProtocolRequestType(Z.method)})(Dz||(o9.TypeHierarchySupertypesRequest=Dz={}));var bz;(function(Z){Z.method="typeHierarchy/subtypes",Z.messageDirection=k6.MessageDirection.clientToServer,Z.type=new k6.ProtocolRequestType(Z.method)})(bz||(o9.TypeHierarchySubtypesRequest=bz={}))});var xz=D((v6)=>{Object.defineProperty(v6,"__esModule",{value:!0});v6.InlineValueRefreshRequest=v6.InlineValueRequest=void 0;var VY=v0(),Rz;(function(Z){Z.method="textDocument/inlineValue",Z.messageDirection=VY.MessageDirection.clientToServer,Z.type=new VY.ProtocolRequestType(Z.method)})(Rz||(v6.InlineValueRequest=Rz={}));var hz;(function(Z){Z.method="workspace/inlineValue/refresh",Z.messageDirection=VY.MessageDirection.serverToClient,Z.type=new VY.ProtocolRequestType0(Z.method)})(hz||(v6.InlineValueRefreshRequest=hz={}))});var vz=D((t9)=>{Object.defineProperty(t9,"__esModule",{value:!0});t9.InlayHintRefreshRequest=t9.InlayHintResolveRequest=t9.InlayHintRequest=void 0;var g6=v0(),fz;(function(Z){Z.method="textDocument/inlayHint",Z.messageDirection=g6.MessageDirection.clientToServer,Z.type=new g6.ProtocolRequestType(Z.method)})(fz||(t9.InlayHintRequest=fz={}));var _z;(function(Z){Z.method="inlayHint/resolve",Z.messageDirection=g6.MessageDirection.clientToServer,Z.type=new g6.ProtocolRequestType(Z.method)})(_z||(t9.InlayHintResolveRequest=_z={}));var kz;(function(Z){Z.method="workspace/inlayHint/refresh",Z.messageDirection=g6.MessageDirection.serverToClient,Z.type=new g6.ProtocolRequestType0(Z.method)})(kz||(t9.InlayHintRefreshRequest=kz={}))});var cz=D((rZ)=>{Object.defineProperty(rZ,"__esModule",{value:!0});rZ.DiagnosticRefreshRequest=rZ.WorkspaceDiagnosticRequest=rZ.DocumentDiagnosticRequest=rZ.DocumentDiagnosticReportKind=rZ.DiagnosticServerCancellationData=void 0;var lz=X6(),CK=eJ(),d6=v0(),gz;(function(Z){function J(Y){let $=Y;return $&&CK.boolean($.retriggerRequest)}Z.is=J})(gz||(rZ.DiagnosticServerCancellationData=gz={}));var dz;(function(Z){Z.Full="full",Z.Unchanged="unchanged"})(dz||(rZ.DocumentDiagnosticReportKind=dz={}));var mz;(function(Z){Z.method="textDocument/diagnostic",Z.messageDirection=d6.MessageDirection.clientToServer,Z.type=new d6.ProtocolRequestType(Z.method),Z.partialResult=new lz.ProgressType})(mz||(rZ.DocumentDiagnosticRequest=mz={}));var pz;(function(Z){Z.method="workspace/diagnostic",Z.messageDirection=d6.MessageDirection.clientToServer,Z.type=new d6.ProtocolRequestType(Z.method),Z.partialResult=new lz.ProgressType})(pz||(rZ.WorkspaceDiagnosticRequest=pz={}));var uz;(function(Z){Z.method="workspace/diagnostic/refresh",Z.messageDirection=d6.MessageDirection.serverToClient,Z.type=new d6.ProtocolRequestType0(Z.method)})(uz||(rZ.DiagnosticRefreshRequest=uz={}))});var tz=D((n0)=>{Object.defineProperty(n0,"__esModule",{value:!0});n0.DidCloseNotebookDocumentNotification=n0.DidSaveNotebookDocumentNotification=n0.DidChangeNotebookDocumentNotification=n0.NotebookCellArrayChange=n0.DidOpenNotebookDocumentNotification=n0.NotebookDocumentSyncRegistrationType=n0.NotebookDocument=n0.NotebookCell=n0.ExecutionSummary=n0.NotebookCellKind=void 0;var jJ=tJ(),X9=eJ(),P9=v0(),J8;(function(Z){Z.Markup=1,Z.Code=2;function J(Y){return Y===1||Y===2}Z.is=J})(J8||(n0.NotebookCellKind=J8={}));var Y8;(function(Z){function J(Q,z){let G={executionOrder:Q};if(z===!0||z===!1)G.success=z;return G}Z.create=J;function Y(Q){let z=Q;return X9.objectLiteral(z)&&jJ.uinteger.is(z.executionOrder)&&(z.success===void 0||X9.boolean(z.success))}Z.is=Y;function $(Q,z){if(Q===z)return!0;if(Q===null||Q===void 0||z===null||z===void 0)return!1;return Q.executionOrder===z.executionOrder&&Q.success===z.success}Z.equals=$})(Y8||(n0.ExecutionSummary=Y8={}));var WY;(function(Z){function J(z,G){return{kind:z,document:G}}Z.create=J;function Y(z){let G=z;return X9.objectLiteral(G)&&J8.is(G.kind)&&jJ.DocumentUri.is(G.document)&&(G.metadata===void 0||X9.objectLiteral(G.metadata))}Z.is=Y;function $(z,G){let B=new Set;if(z.document!==G.document)B.add("document");if(z.kind!==G.kind)B.add("kind");if(z.executionSummary!==G.executionSummary)B.add("executionSummary");if((z.metadata!==void 0||G.metadata!==void 0)&&!Q(z.metadata,G.metadata))B.add("metadata");if((z.executionSummary!==void 0||G.executionSummary!==void 0)&&!Y8.equals(z.executionSummary,G.executionSummary))B.add("executionSummary");return B}Z.diff=$;function Q(z,G){if(z===G)return!0;if(z===null||z===void 0||G===null||G===void 0)return!1;if(typeof z!==typeof G)return!1;if(typeof z!=="object")return!1;let B=Array.isArray(z),K=Array.isArray(G);if(B!==K)return!1;if(B&&K){if(z.length!==G.length)return!1;for(let A=0;A<z.length;A++)if(!Q(z[A],G[A]))return!1}if(X9.objectLiteral(z)&&X9.objectLiteral(G)){let A=Object.keys(z),O=Object.keys(G);if(A.length!==O.length)return!1;if(A.sort(),O.sort(),!Q(A,O))return!1;for(let F=0;F<A.length;F++){let L=A[F];if(!Q(z[L],G[L]))return!1}}return!0}})(WY||(n0.NotebookCell=WY={}));var iz;(function(Z){function J($,Q,z,G){return{uri:$,notebookType:Q,version:z,cells:G}}Z.create=J;function Y($){let Q=$;return X9.objectLiteral(Q)&&X9.string(Q.uri)&&jJ.integer.is(Q.version)&&X9.typedArray(Q.cells,WY.is)}Z.is=Y})(iz||(n0.NotebookDocument=iz={}));var m6;(function(Z){Z.method="notebookDocument/sync",Z.messageDirection=P9.MessageDirection.clientToServer,Z.type=new P9.RegistrationType(Z.method)})(m6||(n0.NotebookDocumentSyncRegistrationType=m6={}));var nz;(function(Z){Z.method="notebookDocument/didOpen",Z.messageDirection=P9.MessageDirection.clientToServer,Z.type=new P9.ProtocolNotificationType(Z.method),Z.registrationMethod=m6.method})(nz||(n0.DidOpenNotebookDocumentNotification=nz={}));var az;(function(Z){function J($){let Q=$;return X9.objectLiteral(Q)&&jJ.uinteger.is(Q.start)&&jJ.uinteger.is(Q.deleteCount)&&(Q.cells===void 0||X9.typedArray(Q.cells,WY.is))}Z.is=J;function Y($,Q,z){let G={start:$,deleteCount:Q};if(z!==void 0)G.cells=z;return G}Z.create=Y})(az||(n0.NotebookCellArrayChange=az={}));var sz;(function(Z){Z.method="notebookDocument/didChange",Z.messageDirection=P9.MessageDirection.clientToServer,Z.type=new P9.ProtocolNotificationType(Z.method),Z.registrationMethod=m6.method})(sz||(n0.DidChangeNotebookDocumentNotification=sz={}));var rz;(function(Z){Z.method="notebookDocument/didSave",Z.messageDirection=P9.MessageDirection.clientToServer,Z.type=new P9.ProtocolNotificationType(Z.method),Z.registrationMethod=m6.method})(rz||(n0.DidSaveNotebookDocumentNotification=rz={}));var oz;(function(Z){Z.method="notebookDocument/didClose",Z.messageDirection=P9.MessageDirection.clientToServer,Z.type=new P9.ProtocolNotificationType(Z.method),Z.registrationMethod=m6.method})(oz||(n0.DidCloseNotebookDocumentNotification=oz={}))});var JG=D((AY)=>{Object.defineProperty(AY,"__esModule",{value:!0});AY.InlineCompletionRequest=void 0;var ez=v0(),ZG;(function(Z){Z.method="textDocument/inlineCompletion",Z.messageDirection=ez.MessageDirection.clientToServer,Z.type=new ez.ProtocolRequestType(Z.method)})(ZG||(AY.InlineCompletionRequest=ZG={}))});var HX=D((N)=>{Object.defineProperty(N,"__esModule",{value:!0});N.WorkspaceSymbolRequest=N.CodeActionResolveRequest=N.CodeActionRequest=N.DocumentSymbolRequest=N.DocumentHighlightRequest=N.ReferencesRequest=N.DefinitionRequest=N.SignatureHelpRequest=N.SignatureHelpTriggerKind=N.HoverRequest=N.CompletionResolveRequest=N.CompletionRequest=N.CompletionTriggerKind=N.PublishDiagnosticsNotification=N.WatchKind=N.RelativePattern=N.FileChangeType=N.DidChangeWatchedFilesNotification=N.WillSaveTextDocumentWaitUntilRequest=N.WillSaveTextDocumentNotification=N.TextDocumentSaveReason=N.DidSaveTextDocumentNotification=N.DidCloseTextDocumentNotification=N.DidChangeTextDocumentNotification=N.TextDocumentContentChangeEvent=N.DidOpenTextDocumentNotification=N.TextDocumentSyncKind=N.TelemetryEventNotification=N.LogMessageNotification=N.ShowMessageRequest=N.ShowMessageNotification=N.MessageType=N.DidChangeConfigurationNotification=N.ExitNotification=N.ShutdownRequest=N.InitializedNotification=N.InitializeErrorCodes=N.InitializeRequest=N.WorkDoneProgressOptions=N.TextDocumentRegistrationOptions=N.StaticRegistrationOptions=N.PositionEncodingKind=N.FailureHandlingKind=N.ResourceOperationKind=N.UnregistrationRequest=N.RegistrationRequest=N.DocumentSelector=N.NotebookCellTextDocumentFilter=N.NotebookDocumentFilter=N.TextDocumentFilter=void 0;N.MonikerRequest=N.MonikerKind=N.UniquenessLevel=N.WillDeleteFilesRequest=N.DidDeleteFilesNotification=N.WillRenameFilesRequest=N.DidRenameFilesNotification=N.WillCreateFilesRequest=N.DidCreateFilesNotification=N.FileOperationPatternKind=N.LinkedEditingRangeRequest=N.ShowDocumentRequest=N.SemanticTokensRegistrationType=N.SemanticTokensRefreshRequest=N.SemanticTokensRangeRequest=N.SemanticTokensDeltaRequest=N.SemanticTokensRequest=N.TokenFormat=N.CallHierarchyPrepareRequest=N.CallHierarchyOutgoingCallsRequest=N.CallHierarchyIncomingCallsRequest=N.WorkDoneProgressCancelNotification=N.WorkDoneProgressCreateRequest=N.WorkDoneProgress=N.SelectionRangeRequest=N.DeclarationRequest=N.FoldingRangeRefreshRequest=N.FoldingRangeRequest=N.ColorPresentationRequest=N.DocumentColorRequest=N.ConfigurationRequest=N.DidChangeWorkspaceFoldersNotification=N.WorkspaceFoldersRequest=N.TypeDefinitionRequest=N.ImplementationRequest=N.ApplyWorkspaceEditRequest=N.ExecuteCommandRequest=N.PrepareRenameRequest=N.RenameRequest=N.PrepareSupportDefaultBehavior=N.DocumentOnTypeFormattingRequest=N.DocumentRangesFormattingRequest=N.DocumentRangeFormattingRequest=N.DocumentFormattingRequest=N.DocumentLinkResolveRequest=N.DocumentLinkRequest=N.CodeLensRefreshRequest=N.CodeLensResolveRequest=N.CodeLensRequest=N.WorkspaceSymbolResolveRequest=void 0;N.InlineCompletionRequest=N.DidCloseNotebookDocumentNotification=N.DidSaveNotebookDocumentNotification=N.DidChangeNotebookDocumentNotification=N.NotebookCellArrayChange=N.DidOpenNotebookDocumentNotification=N.NotebookDocumentSyncRegistrationType=N.NotebookDocument=N.NotebookCell=N.ExecutionSummary=N.NotebookCellKind=N.DiagnosticRefreshRequest=N.WorkspaceDiagnosticRequest=N.DocumentDiagnosticRequest=N.DocumentDiagnosticReportKind=N.DiagnosticServerCancellationData=N.InlayHintRefreshRequest=N.InlayHintResolveRequest=N.InlayHintRequest=N.InlineValueRefreshRequest=N.InlineValueRequest=N.TypeHierarchySupertypesRequest=N.TypeHierarchySubtypesRequest=N.TypeHierarchyPrepareRequest=void 0;var v=v0(),YG=tJ(),QZ=eJ(),SK=CQ();Object.defineProperty(N,"ImplementationRequest",{enumerable:!0,get:function(){return SK.ImplementationRequest}});var DK=bQ();Object.defineProperty(N,"TypeDefinitionRequest",{enumerable:!0,get:function(){return DK.TypeDefinitionRequest}});var KX=hQ();Object.defineProperty(N,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return KX.WorkspaceFoldersRequest}});Object.defineProperty(N,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return KX.DidChangeWorkspaceFoldersNotification}});var bK=_Q();Object.defineProperty(N,"ConfigurationRequest",{enumerable:!0,get:function(){return bK.ConfigurationRequest}});var VX=gQ();Object.defineProperty(N,"DocumentColorRequest",{enumerable:!0,get:function(){return VX.DocumentColorRequest}});Object.defineProperty(N,"ColorPresentationRequest",{enumerable:!0,get:function(){return VX.ColorPresentationRequest}});var WX=pQ();Object.defineProperty(N,"FoldingRangeRequest",{enumerable:!0,get:function(){return WX.FoldingRangeRequest}});Object.defineProperty(N,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return WX.FoldingRangeRefreshRequest}});var yK=cQ();Object.defineProperty(N,"DeclarationRequest",{enumerable:!0,get:function(){return yK.DeclarationRequest}});var RK=aQ();Object.defineProperty(N,"SelectionRangeRequest",{enumerable:!0,get:function(){return RK.SelectionRangeRequest}});var X8=tQ();Object.defineProperty(N,"WorkDoneProgress",{enumerable:!0,get:function(){return X8.WorkDoneProgress}});Object.defineProperty(N,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return X8.WorkDoneProgressCreateRequest}});Object.defineProperty(N,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return X8.WorkDoneProgressCancelNotification}});var B8=Yz();Object.defineProperty(N,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return B8.CallHierarchyIncomingCallsRequest}});Object.defineProperty(N,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return B8.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(N,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return B8.CallHierarchyPrepareRequest}});var p6=Bz();Object.defineProperty(N,"TokenFormat",{enumerable:!0,get:function(){return p6.TokenFormat}});Object.defineProperty(N,"SemanticTokensRequest",{enumerable:!0,get:function(){return p6.SemanticTokensRequest}});Object.defineProperty(N,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return p6.SemanticTokensDeltaRequest}});Object.defineProperty(N,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return p6.SemanticTokensRangeRequest}});Object.defineProperty(N,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return p6.SemanticTokensRefreshRequest}});Object.defineProperty(N,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return p6.SemanticTokensRegistrationType}});var hK=Vz();Object.defineProperty(N,"ShowDocumentRequest",{enumerable:!0,get:function(){return hK.ShowDocumentRequest}});var xK=Hz();Object.defineProperty(N,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return xK.LinkedEditingRangeRequest}});var B6=Pz();Object.defineProperty(N,"FileOperationPatternKind",{enumerable:!0,get:function(){return B6.FileOperationPatternKind}});Object.defineProperty(N,"DidCreateFilesNotification",{enumerable:!0,get:function(){return B6.DidCreateFilesNotification}});Object.defineProperty(N,"WillCreateFilesRequest",{enumerable:!0,get:function(){return B6.WillCreateFilesRequest}});Object.defineProperty(N,"DidRenameFilesNotification",{enumerable:!0,get:function(){return B6.DidRenameFilesNotification}});Object.defineProperty(N,"WillRenameFilesRequest",{enumerable:!0,get:function(){return B6.WillRenameFilesRequest}});Object.defineProperty(N,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return B6.DidDeleteFilesNotification}});Object.defineProperty(N,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return B6.WillDeleteFilesRequest}});var j8=Cz();Object.defineProperty(N,"UniquenessLevel",{enumerable:!0,get:function(){return j8.UniquenessLevel}});Object.defineProperty(N,"MonikerKind",{enumerable:!0,get:function(){return j8.MonikerKind}});Object.defineProperty(N,"MonikerRequest",{enumerable:!0,get:function(){return j8.MonikerRequest}});var K8=yz();Object.defineProperty(N,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return K8.TypeHierarchyPrepareRequest}});Object.defineProperty(N,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return K8.TypeHierarchySubtypesRequest}});Object.defineProperty(N,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return K8.TypeHierarchySupertypesRequest}});var AX=xz();Object.defineProperty(N,"InlineValueRequest",{enumerable:!0,get:function(){return AX.InlineValueRequest}});Object.defineProperty(N,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return AX.InlineValueRefreshRequest}});var V8=vz();Object.defineProperty(N,"InlayHintRequest",{enumerable:!0,get:function(){return V8.InlayHintRequest}});Object.defineProperty(N,"InlayHintResolveRequest",{enumerable:!0,get:function(){return V8.InlayHintResolveRequest}});Object.defineProperty(N,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return V8.InlayHintRefreshRequest}});var KJ=cz();Object.defineProperty(N,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return KJ.DiagnosticServerCancellationData}});Object.defineProperty(N,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return KJ.DocumentDiagnosticReportKind}});Object.defineProperty(N,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return KJ.DocumentDiagnosticRequest}});Object.defineProperty(N,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return KJ.WorkspaceDiagnosticRequest}});Object.defineProperty(N,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return KJ.DiagnosticRefreshRequest}});var M9=tz();Object.defineProperty(N,"NotebookCellKind",{enumerable:!0,get:function(){return M9.NotebookCellKind}});Object.defineProperty(N,"ExecutionSummary",{enumerable:!0,get:function(){return M9.ExecutionSummary}});Object.defineProperty(N,"NotebookCell",{enumerable:!0,get:function(){return M9.NotebookCell}});Object.defineProperty(N,"NotebookDocument",{enumerable:!0,get:function(){return M9.NotebookDocument}});Object.defineProperty(N,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return M9.NotebookDocumentSyncRegistrationType}});Object.defineProperty(N,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return M9.DidOpenNotebookDocumentNotification}});Object.defineProperty(N,"NotebookCellArrayChange",{enumerable:!0,get:function(){return M9.NotebookCellArrayChange}});Object.defineProperty(N,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return M9.DidChangeNotebookDocumentNotification}});Object.defineProperty(N,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return M9.DidSaveNotebookDocumentNotification}});Object.defineProperty(N,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return M9.DidCloseNotebookDocumentNotification}});var fK=JG();Object.defineProperty(N,"InlineCompletionRequest",{enumerable:!0,get:function(){return fK.InlineCompletionRequest}});var $8;(function(Z){function J(Y){let $=Y;return QZ.string($)||(QZ.string($.language)||QZ.string($.scheme)||QZ.string($.pattern))}Z.is=J})($8||(N.TextDocumentFilter=$8={}));var Q8;(function(Z){function J(Y){let $=Y;return QZ.objectLiteral($)&&(QZ.string($.notebookType)||QZ.string($.scheme)||QZ.string($.pattern))}Z.is=J})(Q8||(N.NotebookDocumentFilter=Q8={}));var z8;(function(Z){function J(Y){let $=Y;return QZ.objectLiteral($)&&(QZ.string($.notebook)||Q8.is($.notebook))&&($.language===void 0||QZ.string($.language))}Z.is=J})(z8||(N.NotebookCellTextDocumentFilter=z8={}));var G8;(function(Z){function J(Y){if(!Array.isArray(Y))return!1;for(let $ of Y)if(!QZ.string($)&&!$8.is($)&&!z8.is($))return!1;return!0}Z.is=J})(G8||(N.DocumentSelector=G8={}));var $G;(function(Z){Z.method="client/registerCapability",Z.messageDirection=v.MessageDirection.serverToClient,Z.type=new v.ProtocolRequestType(Z.method)})($G||(N.RegistrationRequest=$G={}));var QG;(function(Z){Z.method="client/unregisterCapability",Z.messageDirection=v.MessageDirection.serverToClient,Z.type=new v.ProtocolRequestType(Z.method)})(QG||(N.UnregistrationRequest=QG={}));var zG;(function(Z){Z.Create="create",Z.Rename="rename",Z.Delete="delete"})(zG||(N.ResourceOperationKind=zG={}));var GG;(function(Z){Z.Abort="abort",Z.Transactional="transactional",Z.TextOnlyTransactional="textOnlyTransactional",Z.Undo="undo"})(GG||(N.FailureHandlingKind=GG={}));var XG;(function(Z){Z.UTF8="utf-8",Z.UTF16="utf-16",Z.UTF32="utf-32"})(XG||(N.PositionEncodingKind=XG={}));var BG;(function(Z){function J(Y){let $=Y;return $&&QZ.string($.id)&&$.id.length>0}Z.hasId=J})(BG||(N.StaticRegistrationOptions=BG={}));var jG;(function(Z){function J(Y){let $=Y;return $&&($.documentSelector===null||G8.is($.documentSelector))}Z.is=J})(jG||(N.TextDocumentRegistrationOptions=jG={}));var KG;(function(Z){function J($){let Q=$;return QZ.objectLiteral(Q)&&(Q.workDoneProgress===void 0||QZ.boolean(Q.workDoneProgress))}Z.is=J;function Y($){let Q=$;return Q&&QZ.boolean(Q.workDoneProgress)}Z.hasWorkDoneProgress=Y})(KG||(N.WorkDoneProgressOptions=KG={}));var VG;(function(Z){Z.method="initialize",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(VG||(N.InitializeRequest=VG={}));var WG;(function(Z){Z.unknownProtocolVersion=1})(WG||(N.InitializeErrorCodes=WG={}));var AG;(function(Z){Z.method="initialized",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolNotificationType(Z.method)})(AG||(N.InitializedNotification=AG={}));var HG;(function(Z){Z.method="shutdown",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType0(Z.method)})(HG||(N.ShutdownRequest=HG={}));var OG;(function(Z){Z.method="exit",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolNotificationType0(Z.method)})(OG||(N.ExitNotification=OG={}));var NG;(function(Z){Z.method="workspace/didChangeConfiguration",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolNotificationType(Z.method)})(NG||(N.DidChangeConfigurationNotification=NG={}));var EG;(function(Z){Z.Error=1,Z.Warning=2,Z.Info=3,Z.Log=4,Z.Debug=5})(EG||(N.MessageType=EG={}));var LG;(function(Z){Z.method="window/showMessage",Z.messageDirection=v.MessageDirection.serverToClient,Z.type=new v.ProtocolNotificationType(Z.method)})(LG||(N.ShowMessageNotification=LG={}));var UG;(function(Z){Z.method="window/showMessageRequest",Z.messageDirection=v.MessageDirection.serverToClient,Z.type=new v.ProtocolRequestType(Z.method)})(UG||(N.ShowMessageRequest=UG={}));var wG;(function(Z){Z.method="window/logMessage",Z.messageDirection=v.MessageDirection.serverToClient,Z.type=new v.ProtocolNotificationType(Z.method)})(wG||(N.LogMessageNotification=wG={}));var FG;(function(Z){Z.method="telemetry/event",Z.messageDirection=v.MessageDirection.serverToClient,Z.type=new v.ProtocolNotificationType(Z.method)})(FG||(N.TelemetryEventNotification=FG={}));var PG;(function(Z){Z.None=0,Z.Full=1,Z.Incremental=2})(PG||(N.TextDocumentSyncKind=PG={}));var MG;(function(Z){Z.method="textDocument/didOpen",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolNotificationType(Z.method)})(MG||(N.DidOpenTextDocumentNotification=MG={}));var IG;(function(Z){function J($){let Q=$;return Q!==void 0&&Q!==null&&typeof Q.text==="string"&&Q.range!==void 0&&(Q.rangeLength===void 0||typeof Q.rangeLength==="number")}Z.isIncremental=J;function Y($){let Q=$;return Q!==void 0&&Q!==null&&typeof Q.text==="string"&&Q.range===void 0&&Q.rangeLength===void 0}Z.isFull=Y})(IG||(N.TextDocumentContentChangeEvent=IG={}));var TG;(function(Z){Z.method="textDocument/didChange",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolNotificationType(Z.method)})(TG||(N.DidChangeTextDocumentNotification=TG={}));var qG;(function(Z){Z.method="textDocument/didClose",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolNotificationType(Z.method)})(qG||(N.DidCloseTextDocumentNotification=qG={}));var CG;(function(Z){Z.method="textDocument/didSave",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolNotificationType(Z.method)})(CG||(N.DidSaveTextDocumentNotification=CG={}));var SG;(function(Z){Z.Manual=1,Z.AfterDelay=2,Z.FocusOut=3})(SG||(N.TextDocumentSaveReason=SG={}));var DG;(function(Z){Z.method="textDocument/willSave",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolNotificationType(Z.method)})(DG||(N.WillSaveTextDocumentNotification=DG={}));var bG;(function(Z){Z.method="textDocument/willSaveWaitUntil",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(bG||(N.WillSaveTextDocumentWaitUntilRequest=bG={}));var yG;(function(Z){Z.method="workspace/didChangeWatchedFiles",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolNotificationType(Z.method)})(yG||(N.DidChangeWatchedFilesNotification=yG={}));var RG;(function(Z){Z.Created=1,Z.Changed=2,Z.Deleted=3})(RG||(N.FileChangeType=RG={}));var hG;(function(Z){function J(Y){let $=Y;return QZ.objectLiteral($)&&(YG.URI.is($.baseUri)||YG.WorkspaceFolder.is($.baseUri))&&QZ.string($.pattern)}Z.is=J})(hG||(N.RelativePattern=hG={}));var xG;(function(Z){Z.Create=1,Z.Change=2,Z.Delete=4})(xG||(N.WatchKind=xG={}));var fG;(function(Z){Z.method="textDocument/publishDiagnostics",Z.messageDirection=v.MessageDirection.serverToClient,Z.type=new v.ProtocolNotificationType(Z.method)})(fG||(N.PublishDiagnosticsNotification=fG={}));var _G;(function(Z){Z.Invoked=1,Z.TriggerCharacter=2,Z.TriggerForIncompleteCompletions=3})(_G||(N.CompletionTriggerKind=_G={}));var kG;(function(Z){Z.method="textDocument/completion",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(kG||(N.CompletionRequest=kG={}));var vG;(function(Z){Z.method="completionItem/resolve",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(vG||(N.CompletionResolveRequest=vG={}));var gG;(function(Z){Z.method="textDocument/hover",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(gG||(N.HoverRequest=gG={}));var dG;(function(Z){Z.Invoked=1,Z.TriggerCharacter=2,Z.ContentChange=3})(dG||(N.SignatureHelpTriggerKind=dG={}));var mG;(function(Z){Z.method="textDocument/signatureHelp",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(mG||(N.SignatureHelpRequest=mG={}));var pG;(function(Z){Z.method="textDocument/definition",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(pG||(N.DefinitionRequest=pG={}));var uG;(function(Z){Z.method="textDocument/references",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(uG||(N.ReferencesRequest=uG={}));var lG;(function(Z){Z.method="textDocument/documentHighlight",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(lG||(N.DocumentHighlightRequest=lG={}));var cG;(function(Z){Z.method="textDocument/documentSymbol",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(cG||(N.DocumentSymbolRequest=cG={}));var iG;(function(Z){Z.method="textDocument/codeAction",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(iG||(N.CodeActionRequest=iG={}));var nG;(function(Z){Z.method="codeAction/resolve",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(nG||(N.CodeActionResolveRequest=nG={}));var aG;(function(Z){Z.method="workspace/symbol",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(aG||(N.WorkspaceSymbolRequest=aG={}));var sG;(function(Z){Z.method="workspaceSymbol/resolve",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(sG||(N.WorkspaceSymbolResolveRequest=sG={}));var rG;(function(Z){Z.method="textDocument/codeLens",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(rG||(N.CodeLensRequest=rG={}));var oG;(function(Z){Z.method="codeLens/resolve",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(oG||(N.CodeLensResolveRequest=oG={}));var tG;(function(Z){Z.method="workspace/codeLens/refresh",Z.messageDirection=v.MessageDirection.serverToClient,Z.type=new v.ProtocolRequestType0(Z.method)})(tG||(N.CodeLensRefreshRequest=tG={}));var eG;(function(Z){Z.method="textDocument/documentLink",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(eG||(N.DocumentLinkRequest=eG={}));var ZX;(function(Z){Z.method="documentLink/resolve",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(ZX||(N.DocumentLinkResolveRequest=ZX={}));var JX;(function(Z){Z.method="textDocument/formatting",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(JX||(N.DocumentFormattingRequest=JX={}));var YX;(function(Z){Z.method="textDocument/rangeFormatting",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(YX||(N.DocumentRangeFormattingRequest=YX={}));var $X;(function(Z){Z.method="textDocument/rangesFormatting",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})($X||(N.DocumentRangesFormattingRequest=$X={}));var QX;(function(Z){Z.method="textDocument/onTypeFormatting",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(QX||(N.DocumentOnTypeFormattingRequest=QX={}));var zX;(function(Z){Z.Identifier=1})(zX||(N.PrepareSupportDefaultBehavior=zX={}));var GX;(function(Z){Z.method="textDocument/rename",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(GX||(N.RenameRequest=GX={}));var XX;(function(Z){Z.method="textDocument/prepareRename",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(XX||(N.PrepareRenameRequest=XX={}));var BX;(function(Z){Z.method="workspace/executeCommand",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(BX||(N.ExecuteCommandRequest=BX={}));var jX;(function(Z){Z.method="workspace/applyEdit",Z.messageDirection=v.MessageDirection.serverToClient,Z.type=new v.ProtocolRequestType("workspace/applyEdit")})(jX||(N.ApplyWorkspaceEditRequest=jX={}))});var NX=D((HY)=>{Object.defineProperty(HY,"__esModule",{value:!0});HY.createProtocolConnection=void 0;var OX=X6();function _K(Z,J,Y,$){if(OX.ConnectionStrategy.is($))$={connectionStrategy:$};return OX.createMessageConnection(Z,J,Y,$)}HY.createProtocolConnection=_K});var LX=D((RZ)=>{var kK=RZ&&RZ.__createBinding||(Object.create?function(Z,J,Y,$){if($===void 0)$=Y;var Q=Object.getOwnPropertyDescriptor(J,Y);if(!Q||("get"in Q?!J.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return J[Y]}};Object.defineProperty(Z,$,Q)}:function(Z,J,Y,$){if($===void 0)$=Y;Z[$]=J[Y]}),OY=RZ&&RZ.__exportStar||function(Z,J){for(var Y in Z)if(Y!=="default"&&!Object.prototype.hasOwnProperty.call(J,Y))kK(J,Z,Y)};Object.defineProperty(RZ,"__esModule",{value:!0});RZ.LSPErrorCodes=RZ.createProtocolConnection=void 0;OY(X6(),RZ);OY(tJ(),RZ);OY(v0(),RZ);OY(HX(),RZ);var vK=NX();Object.defineProperty(RZ,"createProtocolConnection",{enumerable:!0,get:function(){return vK.createProtocolConnection}});var EX;(function(Z){Z.lspReservedErrorRangeStart=-32899,Z.RequestFailed=-32803,Z.ServerCancelled=-32802,Z.ContentModified=-32801,Z.RequestCancelled=-32800,Z.lspReservedErrorRangeEnd=-32800})(EX||(RZ.LSPErrorCodes=EX={}))});var Z0=D((I9)=>{var gK=I9&&I9.__createBinding||(Object.create?function(Z,J,Y,$){if($===void 0)$=Y;var Q=Object.getOwnPropertyDescriptor(J,Y);if(!Q||("get"in Q?!J.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return J[Y]}};Object.defineProperty(Z,$,Q)}:function(Z,J,Y,$){if($===void 0)$=Y;Z[$]=J[Y]}),UX=I9&&I9.__exportStar||function(Z,J){for(var Y in Z)if(Y!=="default"&&!Object.prototype.hasOwnProperty.call(J,Y))gK(J,Z,Y)};Object.defineProperty(I9,"__esModule",{value:!0});I9.createProtocolConnection=void 0;var dK=Z8();UX(Z8(),I9);UX(LX(),I9);function mK(Z,J,Y,$){return dK.createMessageConnection(Z,J,Y,$)}I9.createProtocolConnection=mK});var EY=D((EZ)=>{Object.defineProperty(EZ,"__esModule",{value:!0});EZ.forEach=EZ.mapAsync=EZ.map=EZ.clearTestMode=EZ.setTestMode=EZ.Semaphore=EZ.Delayer=void 0;var VJ=Z0();class FX{constructor(Z){this.defaultDelay=Z,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(Z,J=this.defaultDelay){if(this.task=Z,J>=0)this.cancelTimeout();if(!this.completionPromise)this.completionPromise=new Promise((Y)=>{this.onSuccess=Y}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var Y=this.task();return this.task=void 0,Y});if(J>=0||this.timeout===void 0)this.timeout=VJ.RAL().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},J>=0?J:this.defaultDelay);return this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let Z=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,Z}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){if(this.timeout!==void 0)this.timeout.dispose(),this.timeout=void 0}}EZ.Delayer=FX;class PX{constructor(Z=1){if(Z<=0)throw new Error("Capacity must be greater than 0");this._capacity=Z,this._active=0,this._waiting=[]}lock(Z){return new Promise((J,Y)=>{this._waiting.push({thunk:Z,resolve:J,reject:Y}),this.runNext()})}get active(){return this._active}runNext(){if(this._waiting.length===0||this._active===this._capacity)return;VJ.RAL().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let Z=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let J=Z.thunk();if(J instanceof Promise)J.then((Y)=>{this._active--,Z.resolve(Y),this.runNext()},(Y)=>{this._active--,Z.reject(Y),this.runNext()});else this._active--,Z.resolve(J),this.runNext()}catch(J){this._active--,Z.reject(J),this.runNext()}}}EZ.Semaphore=PX;var W8=!1;function pK(){W8=!0}EZ.setTestMode=pK;function uK(){W8=!1}EZ.clearTestMode=uK;var wX=15;class NY{constructor(Z=wX){this.yieldAfter=W8===!0?Math.max(Z,2):Math.max(Z,wX),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){let Z=Date.now()-this.startTime,J=Math.max(0,this.yieldAfter-Z);if(this.total+=this.counter,this.counter=0,Z>=this.yieldAfter||J<=1)return this.counterInterval=1,this.total=0,!0;else switch(Z){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}}async function lK(Z,J,Y,$){if(Z.length===0)return[];let Q=new Array(Z.length),z=new NY($?.yieldAfter);function G(K){z.start();for(let A=K;A<Z.length;A++)if(Q[A]=J(Z[A]),z.shouldYield())return $?.yieldCallback&&$.yieldCallback(),A+1;return-1}let B=G(0);while(B!==-1){if(Y!==void 0&&Y.isCancellationRequested)break;B=await new Promise((K)=>{VJ.RAL().timer.setImmediate(()=>{K(G(B))})})}return Q}EZ.map=lK;async function cK(Z,J,Y,$){if(Z.length===0)return[];let Q=new Array(Z.length),z=new NY($?.yieldAfter);async function G(K){z.start();for(let A=K;A<Z.length;A++)if(Q[A]=await J(Z[A],Y),z.shouldYield())return $?.yieldCallback&&$.yieldCallback(),A+1;return-1}let B=await G(0);while(B!==-1){if(Y!==void 0&&Y.isCancellationRequested)break;B=await new Promise((K)=>{VJ.RAL().timer.setImmediate(()=>{K(G(B))})})}return Q}EZ.mapAsync=cK;async function iK(Z,J,Y,$){if(Z.length===0)return;let Q=new NY($?.yieldAfter);function z(B){Q.start();for(let K=B;K<Z.length;K++)if(J(Z[K]),Q.shouldYield())return $?.yieldCallback&&$.yieldCallback(),K+1;return-1}let G=z(0);while(G!==-1){if(Y!==void 0&&Y.isCancellationRequested)break;G=await new Promise((B)=>{VJ.RAL().timer.setImmediate(()=>{B(z(G))})})}}EZ.forEach=iK});var H8=D((A8)=>{Object.defineProperty(A8,"__esModule",{value:!0});var nK=require("vscode");class MX extends nK.CompletionItem{constructor(Z){super(Z)}}A8.default=MX});var N8=D((O8)=>{Object.defineProperty(O8,"__esModule",{value:!0});var aK=require("vscode");class IX extends aK.CodeLens{constructor(Z){super(Z)}}O8.default=IX});var L8=D((E8)=>{Object.defineProperty(E8,"__esModule",{value:!0});var sK=require("vscode");class TX extends sK.DocumentLink{constructor(Z,J){super(Z,J)}}E8.default=TX});var w8=D((U8)=>{Object.defineProperty(U8,"__esModule",{value:!0});var rK=require("vscode");class qX extends rK.CodeAction{constructor(Z,J){super(Z);this.data=J}}U8.default=qX});var P8=D((u6)=>{Object.defineProperty(u6,"__esModule",{value:!0});u6.ProtocolDiagnostic=u6.DiagnosticCode=void 0;var oK=require("vscode"),F8=aZ(),CX;(function(Z){function J(Y){let $=Y;return $!==void 0&&$!==null&&(F8.number($.value)||F8.string($.value))&&F8.string($.target)}Z.is=J})(CX||(u6.DiagnosticCode=CX={}));class SX extends oK.Diagnostic{constructor(Z,J,Y,$){super(Z,J,Y);this.data=$,this.hasDiagnosticCode=!1}}u6.ProtocolDiagnostic=SX});var I8=D((M8)=>{Object.defineProperty(M8,"__esModule",{value:!0});var tK=require("vscode");class DX extends tK.CallHierarchyItem{constructor(Z,J,Y,$,Q,z,G){super(Z,J,Y,$,Q,z);if(G!==void 0)this.data=G}}M8.default=DX});var q8=D((T8)=>{Object.defineProperty(T8,"__esModule",{value:!0});var eK=require("vscode");class bX extends eK.TypeHierarchyItem{constructor(Z,J,Y,$,Q,z,G){super(Z,J,Y,$,Q,z);if(G!==void 0)this.data=G}}T8.default=bX});var S8=D((C8)=>{Object.defineProperty(C8,"__esModule",{value:!0});var LY=require("vscode");class yX extends LY.SymbolInformation{constructor(Z,J,Y,$,Q){let z=!($ instanceof LY.Uri);super(Z,J,Y,z?$:new LY.Location($,new LY.Range(0,0,0,0)));if(this.hasRange=z,Q!==void 0)this.data=Q}}C8.default=yX});var b8=D((D8)=>{Object.defineProperty(D8,"__esModule",{value:!0});var ZV=require("vscode");class RX extends ZV.InlayHint{constructor(Z,J,Y){super(Z,J,Y)}}D8.default=RX});var _X=D((UY)=>{Object.defineProperty(UY,"__esModule",{value:!0});UY.createConverter=void 0;var e0=require("vscode"),J0=Z0(),j6=aZ(),hX=EY(),JV=H8(),YV=N8(),$V=L8(),xX=w8(),fX=P8(),QV=I8(),zV=q8(),GV=S8(),XV=b8(),y8;(function(Z){function J(Y){let $=Y;return $&&!!$.inserting&&!!$.replacing}Z.is=J})(y8||(y8={}));function BV(Z){let Y=Z||((V)=>V.toString());function $(V){return Y(V)}function Q(V){return{uri:Y(V.uri)}}function z(V){return{uri:Y(V.uri),languageId:V.languageId,version:V.version,text:V.getText()}}function G(V){return{uri:Y(V.uri),version:V.version}}function B(V){return{textDocument:z(V)}}function K(V){let S=V;return!!S.document&&!!S.contentChanges}function A(V){let S=V;return!!S.uri&&!!S.version}function O(V,S,i){if(A(V))return{textDocument:{uri:Y(V.uri),version:V.version},contentChanges:[{text:V.getText()}]};else if(K(V)){let w0=S,I=i;return{textDocument:{uri:Y(w0),version:I},contentChanges:V.contentChanges.map((w)=>{let P=w.range;return{range:{start:{line:P.start.line,character:P.start.character},end:{line:P.end.line,character:P.end.character}},rangeLength:w.rangeLength,text:w.text}})}}else throw Error("Unsupported text document change parameter")}function F(V){return{textDocument:Q(V)}}function L(V,S=!1){let i={textDocument:Q(V)};if(S)i.text=V.getText();return i}function E(V){switch(V){case e0.TextDocumentSaveReason.Manual:return J0.TextDocumentSaveReason.Manual;case e0.TextDocumentSaveReason.AfterDelay:return J0.TextDocumentSaveReason.AfterDelay;case e0.TextDocumentSaveReason.FocusOut:return J0.TextDocumentSaveReason.FocusOut}return J0.TextDocumentSaveReason.Manual}function T(V){return{textDocument:Q(V.document),reason:E(V.reason)}}function C(V){return{files:V.files.map((S)=>({uri:Y(S)}))}}function x(V){return{files:V.files.map((S)=>({oldUri:Y(S.oldUri),newUri:Y(S.newUri)}))}}function f(V){return{files:V.files.map((S)=>({uri:Y(S)}))}}function d(V){return{files:V.files.map((S)=>({uri:Y(S)}))}}function _(V){return{files:V.files.map((S)=>({oldUri:Y(S.oldUri),newUri:Y(S.newUri)}))}}function B0(V){return{files:V.files.map((S)=>({uri:Y(S)}))}}function t(V,S){return{textDocument:Q(V),position:wZ(S)}}function u(V){switch(V){case e0.CompletionTriggerKind.TriggerCharacter:return J0.CompletionTriggerKind.TriggerCharacter;case e0.CompletionTriggerKind.TriggerForIncompleteCompletions:return J0.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return J0.CompletionTriggerKind.Invoked}}function a(V,S,i){return{textDocument:Q(V),position:wZ(S),context:{triggerKind:u(i.triggerKind),triggerCharacter:i.triggerCharacter}}}function j0(V){switch(V){case e0.SignatureHelpTriggerKind.Invoke:return J0.SignatureHelpTriggerKind.Invoked;case e0.SignatureHelpTriggerKind.TriggerCharacter:return J0.SignatureHelpTriggerKind.TriggerCharacter;case e0.SignatureHelpTriggerKind.ContentChange:return J0.SignatureHelpTriggerKind.ContentChange}}function f0(V){return{label:V.label}}function y0(V){return V.map(f0)}function qZ(V){return{label:V.label,parameters:y0(V.parameters)}}function r0(V){return V.map(qZ)}function cZ(V){if(V===void 0)return V;return{signatures:r0(V.signatures),activeSignature:V.activeSignature,activeParameter:V.activeParameter}}function XZ(V,S,i){return{textDocument:Q(V),position:wZ(S),context:{isRetrigger:i.isRetrigger,triggerCharacter:i.triggerCharacter,triggerKind:j0(i.triggerKind),activeSignatureHelp:cZ(i.activeSignatureHelp)}}}function wZ(V){return{line:V.line,character:V.character}}function JZ(V){if(V===void 0||V===null)return V;return{line:V.line>J0.uinteger.MAX_VALUE?J0.uinteger.MAX_VALUE:V.line,character:V.character>J0.uinteger.MAX_VALUE?J0.uinteger.MAX_VALUE:V.character}}function C9(V,S){return hX.map(V,JZ,S)}function A9(V){return V.map(JZ)}function R0(V){if(V===void 0||V===null)return V;return{start:JZ(V.start),end:JZ(V.end)}}function CZ(V){return V.map(R0)}function FZ(V){if(V===void 0||V===null)return V;return J0.Location.create($(V.uri),R0(V.range))}function BZ(V){switch(V){case e0.DiagnosticSeverity.Error:return J0.DiagnosticSeverity.Error;case e0.DiagnosticSeverity.Warning:return J0.DiagnosticSeverity.Warning;case e0.DiagnosticSeverity.Information:return J0.DiagnosticSeverity.Information;case e0.DiagnosticSeverity.Hint:return J0.DiagnosticSeverity.Hint}}function g9(V){if(!V)return;let S=[];for(let i of V){let w0=H9(i);if(w0!==void 0)S.push(w0)}return S.length>0?S:void 0}function H9(V){switch(V){case e0.DiagnosticTag.Unnecessary:return J0.DiagnosticTag.Unnecessary;case e0.DiagnosticTag.Deprecated:return J0.DiagnosticTag.Deprecated;default:return}}function O9(V){return{message:V.message,location:FZ(V.location)}}function S9(V){return V.map(O9)}function d9(V){if(V===void 0||V===null)return;if(j6.number(V)||j6.string(V))return V;return{value:V.value,target:$(V.target)}}function N9(V){let S=J0.Diagnostic.create(R0(V.range),V.message),i=V instanceof fX.ProtocolDiagnostic?V:void 0;if(i!==void 0&&i.data!==void 0)S.data=i.data;let w0=d9(V.code);if(fX.DiagnosticCode.is(w0))if(i!==void 0&&i.hasDiagnosticCode)S.code=w0;else S.code=w0.value,S.codeDescription={href:w0.target};else S.code=w0;if(j6.number(V.severity))S.severity=BZ(V.severity);if(Array.isArray(V.tags))S.tags=g9(V.tags);if(V.relatedInformation)S.relatedInformation=S9(V.relatedInformation);if(V.source)S.source=V.source;return S}function J9(V,S){if(V===void 0||V===null)return V;return hX.map(V,N9,S)}function Y9(V){if(V===void 0||V===null)return V;return V.map(N9)}function E9(V,S){switch(V){case"$string":return S;case J0.MarkupKind.PlainText:return{kind:V,value:S};case J0.MarkupKind.Markdown:return{kind:V,value:S.value};default:return`Unsupported Markup content received. Kind is: ${V}`}}function o0(V){switch(V){case e0.CompletionItemTag.Deprecated:return J0.CompletionItemTag.Deprecated}return}function D9(V){if(V===void 0)return V;let S=[];for(let i of V){let w0=o0(i);if(w0!==void 0)S.push(w0)}return S}function $9(V,S){if(S!==void 0)return S;return V+1}function iZ(V,S=!1){let i,w0;if(j6.string(V.label))i=V.label;else if(i=V.label.label,S&&(V.label.detail!==void 0||V.label.description!==void 0))w0={detail:V.label.detail,description:V.label.description};let I={label:i};if(w0!==void 0)I.labelDetails=w0;let W=V instanceof JV.default?V:void 0;if(V.detail)I.detail=V.detail;if(V.documentation)if(!W||W.documentationFormat==="$string")I.documentation=V.documentation;else I.documentation=E9(W.documentationFormat,V.documentation);if(V.filterText)I.filterText=V.filterText;if(m9(I,V),j6.number(V.kind))I.kind=$9(V.kind,W&&W.originalItemKind);if(V.sortText)I.sortText=V.sortText;if(V.additionalTextEdits)I.additionalTextEdits=s0(V.additionalTextEdits);if(V.commitCharacters)I.commitCharacters=V.commitCharacters.slice();if(V.command)I.command=p(V.command);if(V.preselect===!0||V.preselect===!1)I.preselect=V.preselect;let w=D9(V.tags);if(W){if(W.data!==void 0)I.data=W.data;if(W.deprecated===!0||W.deprecated===!1){if(W.deprecated===!0&&w!==void 0&&w.length>0){let P=w.indexOf(e0.CompletionItemTag.Deprecated);if(P!==-1)w.splice(P,1)}I.deprecated=W.deprecated}if(W.insertTextMode!==void 0)I.insertTextMode=W.insertTextMode}if(w!==void 0&&w.length>0)I.tags=w;if(I.insertTextMode===void 0&&V.keepWhitespace===!0)I.insertTextMode=J0.InsertTextMode.adjustIndentation;return I}function m9(V,S){let i=J0.InsertTextFormat.PlainText,w0=void 0,I=void 0;if(S.textEdit)w0=S.textEdit.newText,I=S.textEdit.range;else if(S.insertText instanceof e0.SnippetString)i=J0.InsertTextFormat.Snippet,w0=S.insertText.value;else w0=S.insertText;if(S.range)I=S.range;if(V.insertTextFormat=i,S.fromEdit&&w0!==void 0&&I!==void 0)V.textEdit=nZ(w0,I);else V.insertText=w0}function nZ(V,S){if(y8.is(S))return J0.InsertReplaceEdit.create(V,R0(S.inserting),R0(S.replacing));else return{newText:V,range:R0(S)}}function L9(V){return{range:R0(V.range),newText:V.newText}}function s0(V){if(V===void 0||V===null)return V;return V.map(L9)}function WZ(V){if(V<=e0.SymbolKind.TypeParameter)return V+1;return J0.SymbolKind.Property}function jZ(V){return V}function kZ(V){return V.map(jZ)}function SZ(V,S,i){return{textDocument:Q(V),position:wZ(S),context:{includeDeclaration:i.includeDeclaration}}}async function U9(V,S){let i=J0.CodeAction.create(V.title);if(V instanceof xX.default&&V.data!==void 0)i.data=V.data;if(V.kind!==void 0)i.kind=U(V.kind);if(V.diagnostics!==void 0)i.diagnostics=await J9(V.diagnostics,S);if(V.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");if(V.command!==void 0)i.command=p(V.command);if(V.isPreferred!==void 0)i.isPreferred=V.isPreferred;if(V.disabled!==void 0)i.disabled={reason:V.disabled.reason};return i}function b9(V){let S=J0.CodeAction.create(V.title);if(V instanceof xX.default&&V.data!==void 0)S.data=V.data;if(V.kind!==void 0)S.kind=U(V.kind);if(V.diagnostics!==void 0)S.diagnostics=Y9(V.diagnostics);if(V.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");if(V.command!==void 0)S.command=p(V.command);if(V.isPreferred!==void 0)S.isPreferred=V.isPreferred;if(V.disabled!==void 0)S.disabled={reason:V.disabled.reason};return S}async function Q9(V,S){if(V===void 0||V===null)return V;let i;if(V.only&&j6.string(V.only.value))i=[V.only.value];return J0.CodeActionContext.create(await J9(V.diagnostics,S),i,PZ(V.triggerKind))}function y9(V){if(V===void 0||V===null)return V;let S;if(V.only&&j6.string(V.only.value))S=[V.only.value];return J0.CodeActionContext.create(Y9(V.diagnostics),S,PZ(V.triggerKind))}function PZ(V){switch(V){case e0.CodeActionTriggerKind.Invoke:return J0.CodeActionTriggerKind.Invoked;case e0.CodeActionTriggerKind.Automatic:return J0.CodeActionTriggerKind.Automatic;default:return}}function U(V){if(V===void 0||V===null)return;return V.value}function y(V){if(V===void 0||V===null)return V;return J0.InlineValueContext.create(V.frameId,R0(V.stoppedLocation))}function g(V,S,i){return{context:J0.InlineCompletionContext.create(i.triggerKind,i.selectedCompletionInfo),textDocument:Q(V),position:JZ(S)}}function p(V){let S=J0.Command.create(V.title,V.command);if(V.arguments)S.arguments=V.arguments;return S}function E0(V){let S=J0.CodeLens.create(R0(V.range));if(V.command)S.command=p(V.command);if(V instanceof YV.default){if(V.data)S.data=V.data}return S}function O0(V,S){let i={tabSize:V.tabSize,insertSpaces:V.insertSpaces};if(S.trimTrailingWhitespace)i.trimTrailingWhitespace=!0;if(S.trimFinalNewlines)i.trimFinalNewlines=!0;if(S.insertFinalNewline)i.insertFinalNewline=!0;return i}function M0(V){return{textDocument:Q(V)}}function q0(V){return{textDocument:Q(V)}}function z0(V){let S=J0.DocumentLink.create(R0(V.range));if(V.target)S.target=$(V.target);if(V.tooltip!==void 0)S.tooltip=V.tooltip;let i=V instanceof $V.default?V:void 0;if(i&&i.data)S.data=i.data;return S}function U0(V){return{textDocument:Q(V)}}function V0(V){let S={name:V.name,kind:WZ(V.kind),uri:$(V.uri),range:R0(V.range),selectionRange:R0(V.selectionRange)};if(V.detail!==void 0&&V.detail.length>0)S.detail=V.detail;if(V.tags!==void 0)S.tags=kZ(V.tags);if(V instanceof QV.default&&V.data!==void 0)S.data=V.data;return S}function C0(V){let S={name:V.name,kind:WZ(V.kind),uri:$(V.uri),range:R0(V.range),selectionRange:R0(V.selectionRange)};if(V.detail!==void 0&&V.detail.length>0)S.detail=V.detail;if(V.tags!==void 0)S.tags=kZ(V.tags);if(V instanceof zV.default&&V.data!==void 0)S.data=V.data;return S}function c0(V){let S=V instanceof GV.default?{name:V.name,kind:WZ(V.kind),location:V.hasRange?FZ(V.location):{uri:Y(V.location.uri)},data:V.data}:{name:V.name,kind:WZ(V.kind),location:FZ(V.location)};if(V.tags!==void 0)S.tags=kZ(V.tags);if(V.containerName!=="")S.containerName=V.containerName;return S}function YZ(V){let S=typeof V.label==="string"?V.label:V.label.map(p9),i=J0.InlayHint.create(JZ(V.position),S);if(V.kind!==void 0)i.kind=V.kind;if(V.textEdits!==void 0)i.textEdits=s0(V.textEdits);if(V.tooltip!==void 0)i.tooltip=u9(V.tooltip);if(V.paddingLeft!==void 0)i.paddingLeft=V.paddingLeft;if(V.paddingRight!==void 0)i.paddingRight=V.paddingRight;if(V instanceof XV.default&&V.data!==void 0)i.data=V.data;return i}function p9(V){let S=J0.InlayHintLabelPart.create(V.value);if(V.location!==void 0)S.location=FZ(V.location);if(V.command!==void 0)S.command=p(V.command);if(V.tooltip!==void 0)S.tooltip=u9(V.tooltip);return S}function u9(V){if(typeof V==="string")return V;return{kind:J0.MarkupKind.Markdown,value:V.value}}return{asUri:$,asTextDocumentIdentifier:Q,asTextDocumentItem:z,asVersionedTextDocumentIdentifier:G,asOpenTextDocumentParams:B,asChangeTextDocumentParams:O,asCloseTextDocumentParams:F,asSaveTextDocumentParams:L,asWillSaveTextDocumentParams:T,asDidCreateFilesParams:C,asDidRenameFilesParams:x,asDidDeleteFilesParams:f,asWillCreateFilesParams:d,asWillRenameFilesParams:_,asWillDeleteFilesParams:B0,asTextDocumentPositionParams:t,asCompletionParams:a,asSignatureHelpParams:XZ,asWorkerPosition:wZ,asRange:R0,asRanges:CZ,asPosition:JZ,asPositions:C9,asPositionsSync:A9,asLocation:FZ,asDiagnosticSeverity:BZ,asDiagnosticTag:H9,asDiagnostic:N9,asDiagnostics:J9,asDiagnosticsSync:Y9,asCompletionItem:iZ,asTextEdit:L9,asSymbolKind:WZ,asSymbolTag:jZ,asSymbolTags:kZ,asReferenceParams:SZ,asCodeAction:U9,asCodeActionSync:b9,asCodeActionContext:Q9,asCodeActionContextSync:y9,asInlineValueContext:y,asCommand:p,asCodeLens:E0,asFormattingOptions:O0,asDocumentSymbolParams:M0,asCodeLensParams:q0,asDocumentLink:z0,asDocumentLinkParams:U0,asCallHierarchyItem:V0,asTypeHierarchyItem:C0,asInlayHint:YZ,asWorkspaceSymbol:c0,asInlineCompletionParams:g}}UY.createConverter=BV});var gX=D((FY)=>{Object.defineProperty(FY,"__esModule",{value:!0});FY.createConverter=void 0;var m=require("vscode"),o=Z0(),oZ=aZ(),L0=EY(),jV=H8(),KV=N8(),VV=L8(),WV=w8(),kX=P8(),AV=I8(),HV=q8(),OV=S8(),NV=b8(),vX=Z0(),wY;(function(Z){function J(Y){let $=Y;return $&&oZ.string($.language)&&oZ.string($.value)}Z.is=J})(wY||(wY={}));function EV(Z,J,Y){let Q=Z||((X)=>m.Uri.parse(X));function z(X){return Q(X)}function G(X){let M=[];for(let h of X)if(typeof h==="string")M.push(h);else if(vX.NotebookCellTextDocumentFilter.is(h))if(typeof h.notebook==="string")M.push({notebookType:h.notebook,language:h.language});else{let n=h.notebook.notebookType??"*";M.push({notebookType:n,scheme:h.notebook.scheme,pattern:h.notebook.pattern,language:h.language})}else if(vX.TextDocumentFilter.is(h))M.push({language:h.language,scheme:h.scheme,pattern:h.pattern});return M}async function B(X,M){return L0.map(X,A,M)}function K(X){let M=new Array(X.length);for(let h=0;h<X.length;h++)M[h]=A(X[h]);return M}function A(X){let M=new kX.ProtocolDiagnostic(T(X.range),X.message,x(X.severity),X.data);if(X.code!==void 0){if(typeof X.code==="string"||typeof X.code==="number")if(o.CodeDescription.is(X.codeDescription))M.code={value:X.code,target:z(X.codeDescription.href)};else M.code=X.code;else if(kX.DiagnosticCode.is(X.code)){M.hasDiagnosticCode=!0;let h=X.code;M.code={value:h.value,target:z(h.target)}}}if(X.source)M.source=X.source;if(X.relatedInformation)M.relatedInformation=O(X.relatedInformation);if(Array.isArray(X.tags))M.tags=F(X.tags);return M}function O(X){let M=new Array(X.length);for(let h=0;h<X.length;h++){let n=X[h];M[h]=new m.DiagnosticRelatedInformation(BZ(n.location),n.message)}return M}function F(X){if(!X)return;let M=[];for(let h of X){let n=L(h);if(n!==void 0)M.push(n)}return M.length>0?M:void 0}function L(X){switch(X){case o.DiagnosticTag.Unnecessary:return m.DiagnosticTag.Unnecessary;case o.DiagnosticTag.Deprecated:return m.DiagnosticTag.Deprecated;default:return}}function E(X){return X?new m.Position(X.line,X.character):void 0}function T(X){return X?new m.Range(X.start.line,X.start.character,X.end.line,X.end.character):void 0}async function C(X,M){return L0.map(X,(h)=>{return new m.Range(h.start.line,h.start.character,h.end.line,h.end.character)},M)}function x(X){if(X===void 0||X===null)return m.DiagnosticSeverity.Error;switch(X){case o.DiagnosticSeverity.Error:return m.DiagnosticSeverity.Error;case o.DiagnosticSeverity.Warning:return m.DiagnosticSeverity.Warning;case o.DiagnosticSeverity.Information:return m.DiagnosticSeverity.Information;case o.DiagnosticSeverity.Hint:return m.DiagnosticSeverity.Hint}return m.DiagnosticSeverity.Error}function f(X){if(oZ.string(X))return _(X);else if(wY.is(X))return _().appendCodeblock(X.value,X.language);else if(Array.isArray(X)){let M=[];for(let h of X){let n=_();if(wY.is(h))n.appendCodeblock(h.value,h.language);else n.appendMarkdown(h);M.push(n)}return M}else return _(X)}function d(X){if(oZ.string(X))return X;else switch(X.kind){case o.MarkupKind.Markdown:return _(X.value);case o.MarkupKind.PlainText:return X.value;default:return`Unsupported Markup content received. Kind is: ${X.kind}`}}function _(X){let M;if(X===void 0||typeof X==="string")M=new m.MarkdownString(X);else switch(X.kind){case o.MarkupKind.Markdown:M=new m.MarkdownString(X.value);break;case o.MarkupKind.PlainText:M=new m.MarkdownString,M.appendText(X.value);break;default:M=new m.MarkdownString,M.appendText(`Unsupported Markup content received. Kind is: ${X.kind}`);break}return M.isTrusted=J,M.supportHtml=Y,M}function B0(X){if(!X)return;return new m.Hover(f(X.contents),T(X.range))}async function t(X,M,h){if(!X)return;if(Array.isArray(X))return L0.map(X,(F9)=>y0(F9,M),h);let n=X,{defaultRange:$Z,commitCharacters:KZ}=u(n,M),T0=await L0.map(n.items,(F9)=>{return y0(F9,KZ,$Z,n.itemDefaults?.insertTextMode,n.itemDefaults?.insertTextFormat,n.itemDefaults?.data)},h);return new m.CompletionList(T0,n.isIncomplete)}function u(X,M){let h=X.itemDefaults?.editRange,n=X.itemDefaults?.commitCharacters??M;return o.Range.is(h)?{defaultRange:T(h),commitCharacters:n}:h!==void 0?{defaultRange:{inserting:T(h.insert),replacing:T(h.replace)},commitCharacters:n}:{defaultRange:void 0,commitCharacters:n}}function a(X){if(o.CompletionItemKind.Text<=X&&X<=o.CompletionItemKind.TypeParameter)return[X-1,void 0];return[m.CompletionItemKind.Text,X]}function j0(X){switch(X){case o.CompletionItemTag.Deprecated:return m.CompletionItemTag.Deprecated}return}function f0(X){if(X===void 0||X===null)return[];let M=[];for(let h of X){let n=j0(h);if(n!==void 0)M.push(n)}return M}function y0(X,M,h,n,$Z,KZ){let T0=f0(X.tags),F9=qZ(X),D0=new jV.default(F9);if(X.detail)D0.detail=X.detail;if(X.documentation)D0.documentation=d(X.documentation),D0.documentationFormat=oZ.string(X.documentation)?"$string":X.documentation.kind;if(X.filterText)D0.filterText=X.filterText;let fJ=r0(X,h,$Z);if(fJ)D0.insertText=fJ.text,D0.range=fJ.range,D0.fromEdit=fJ.fromEdit;if(oZ.number(X.kind)){let[Cj,i$]=a(X.kind);if(D0.kind=Cj,i$)D0.originalItemKind=i$}if(X.sortText)D0.sortText=X.sortText;if(X.additionalTextEdits)D0.additionalTextEdits=JZ(X.additionalTextEdits);let l$=X.commitCharacters!==void 0?oZ.stringArray(X.commitCharacters)?X.commitCharacters:void 0:M;if(l$)D0.commitCharacters=l$.slice();if(X.command)D0.command=s0(X.command);if(X.deprecated===!0||X.deprecated===!1){if(D0.deprecated=X.deprecated,X.deprecated===!0)T0.push(m.CompletionItemTag.Deprecated)}if(X.preselect===!0||X.preselect===!1)D0.preselect=X.preselect;let c$=X.data??KZ;if(c$!==void 0)D0.data=c$;if(T0.length>0)D0.tags=T0;let P4=X.insertTextMode??n;if(P4!==void 0){if(D0.insertTextMode=P4,P4===o.InsertTextMode.asIs)D0.keepWhitespace=!0}return D0}function qZ(X){if(o.CompletionItemLabelDetails.is(X.labelDetails))return{label:X.label,detail:X.labelDetails.detail,description:X.labelDetails.description};else return X.label}function r0(X,M,h){let n=X.insertTextFormat??h;if(X.textEdit!==void 0||M!==void 0){let[$Z,KZ]=X.textEdit!==void 0?cZ(X.textEdit):[M,X.textEditText??X.label];if(n===o.InsertTextFormat.Snippet)return{text:new m.SnippetString(KZ),range:$Z,fromEdit:!0};else return{text:KZ,range:$Z,fromEdit:!0}}else if(X.insertText)if(n===o.InsertTextFormat.Snippet)return{text:new m.SnippetString(X.insertText),fromEdit:!1};else return{text:X.insertText,fromEdit:!1};else return}function cZ(X){if(o.InsertReplaceEdit.is(X))return[{inserting:T(X.insert),replacing:T(X.replace)},X.newText];else return[T(X.range),X.newText]}function XZ(X){if(!X)return;return new m.TextEdit(T(X.range),X.newText)}async function wZ(X,M){if(!X)return;return L0.map(X,XZ,M)}function JZ(X){if(!X)return;let M=new Array(X.length);for(let h=0;h<X.length;h++)M[h]=XZ(X[h]);return M}async function C9(X,M){if(!X)return;let h=new m.SignatureHelp;if(oZ.number(X.activeSignature))h.activeSignature=X.activeSignature;else h.activeSignature=0;if(oZ.number(X.activeParameter))h.activeParameter=X.activeParameter;else h.activeParameter=0;if(X.signatures)h.signatures=await A9(X.signatures,M);return h}async function A9(X,M){return L0.mapAsync(X,R0,M)}async function R0(X,M){let h=new m.SignatureInformation(X.label);if(X.documentation!==void 0)h.documentation=d(X.documentation);if(X.parameters!==void 0)h.parameters=await CZ(X.parameters,M);if(X.activeParameter!==void 0)h.activeParameter=X.activeParameter;return h}function CZ(X,M){return L0.map(X,FZ,M)}function FZ(X){let M=new m.ParameterInformation(X.label);if(X.documentation)M.documentation=d(X.documentation);return M}function BZ(X){return X?new m.Location(Q(X.uri),T(X.range)):void 0}async function g9(X,M){if(!X)return;return S9(X,M)}async function H9(X,M){if(!X)return;return S9(X,M)}function O9(X){if(!X)return;let M={targetUri:Q(X.targetUri),targetRange:T(X.targetRange),originSelectionRange:T(X.originSelectionRange),targetSelectionRange:T(X.targetSelectionRange)};if(!M.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return M}async function S9(X,M){if(!X)return;if(oZ.array(X))if(X.length===0)return[];else if(o.LocationLink.is(X[0])){let h=X;return L0.map(h,O9,M)}else{let h=X;return L0.map(h,BZ,M)}else if(o.LocationLink.is(X))return[O9(X)];else return BZ(X)}async function d9(X,M){if(!X)return;return L0.map(X,BZ,M)}async function N9(X,M){if(!X)return;return L0.map(X,J9,M)}function J9(X){let M=new m.DocumentHighlight(T(X.range));if(oZ.number(X.kind))M.kind=Y9(X.kind);return M}function Y9(X){switch(X){case o.DocumentHighlightKind.Text:return m.DocumentHighlightKind.Text;case o.DocumentHighlightKind.Read:return m.DocumentHighlightKind.Read;case o.DocumentHighlightKind.Write:return m.DocumentHighlightKind.Write}return m.DocumentHighlightKind.Text}async function E9(X,M){if(!X)return;return L0.map(X,iZ,M)}function o0(X){if(X<=o.SymbolKind.TypeParameter)return X-1;return m.SymbolKind.Property}function D9(X){switch(X){case o.SymbolTag.Deprecated:return m.SymbolTag.Deprecated;default:return}}function $9(X){if(X===void 0||X===null)return;let M=[];for(let h of X){let n=D9(h);if(n!==void 0)M.push(n)}return M.length===0?void 0:M}function iZ(X){let{data:M,location:h}=X,n=h.range===void 0||M!==void 0?new OV.default(X.name,o0(X.kind),X.containerName??"",h.range===void 0?Q(h.uri):new m.Location(Q(X.location.uri),T(h.range)),M):new m.SymbolInformation(X.name,o0(X.kind),X.containerName??"",new m.Location(Q(X.location.uri),T(h.range)));return L9(n,X),n}async function m9(X,M){if(X===void 0||X===null)return;return L0.map(X,nZ,M)}function nZ(X){let M=new m.DocumentSymbol(X.name,X.detail||"",o0(X.kind),T(X.range),T(X.selectionRange));if(L9(M,X),X.children!==void 0&&X.children.length>0){let h=[];for(let n of X.children)h.push(nZ(n));M.children=h}return M}function L9(X,M){if(X.tags=$9(M.tags),M.deprecated){if(!X.tags)X.tags=[m.SymbolTag.Deprecated];else if(!X.tags.includes(m.SymbolTag.Deprecated))X.tags=X.tags.concat(m.SymbolTag.Deprecated)}}function s0(X){let M={title:X.title,command:X.command};if(X.arguments)M.arguments=X.arguments;return M}async function WZ(X,M){if(!X)return;return L0.map(X,s0,M)}let jZ=new Map;jZ.set(o.CodeActionKind.Empty,m.CodeActionKind.Empty),jZ.set(o.CodeActionKind.QuickFix,m.CodeActionKind.QuickFix),jZ.set(o.CodeActionKind.Refactor,m.CodeActionKind.Refactor),jZ.set(o.CodeActionKind.RefactorExtract,m.CodeActionKind.RefactorExtract),jZ.set(o.CodeActionKind.RefactorInline,m.CodeActionKind.RefactorInline),jZ.set(o.CodeActionKind.RefactorRewrite,m.CodeActionKind.RefactorRewrite),jZ.set(o.CodeActionKind.Source,m.CodeActionKind.Source),jZ.set(o.CodeActionKind.SourceOrganizeImports,m.CodeActionKind.SourceOrganizeImports);function kZ(X){if(X===void 0||X===null)return;let M=jZ.get(X);if(M)return M;let h=X.split(".");M=m.CodeActionKind.Empty;for(let n of h)M=M.append(n);return M}function SZ(X){if(X===void 0||X===null)return;return X.map((M)=>kZ(M))}async function U9(X,M){if(X===void 0||X===null)return;let h=new WV.default(X.title,X.data);if(X.kind!==void 0)h.kind=kZ(X.kind);if(X.diagnostics!==void 0)h.diagnostics=K(X.diagnostics);if(X.edit!==void 0)h.edit=await PZ(X.edit,M);if(X.command!==void 0)h.command=s0(X.command);if(X.isPreferred!==void 0)h.isPreferred=X.isPreferred;if(X.disabled!==void 0)h.disabled={reason:X.disabled.reason};return h}function b9(X,M){return L0.mapAsync(X,async(h)=>{if(o.Command.is(h))return s0(h);else return U9(h,M)},M)}function Q9(X){if(!X)return;let M=new KV.default(T(X.range));if(X.command)M.command=s0(X.command);if(X.data!==void 0&&X.data!==null)M.data=X.data;return M}async function y9(X,M){if(!X)return;return L0.map(X,Q9,M)}async function PZ(X,M){if(!X)return;let h=new Map;if(X.changeAnnotations!==void 0){let KZ=X.changeAnnotations;await L0.forEach(Object.keys(KZ),(T0)=>{let F9=U(KZ[T0]);h.set(T0,F9)},M)}let n=(KZ)=>{if(KZ===void 0)return;else return h.get(KZ)},$Z=new m.WorkspaceEdit;if(X.documentChanges){let KZ=X.documentChanges;await L0.forEach(KZ,(T0)=>{if(o.CreateFile.is(T0))$Z.createFile(Q(T0.uri),T0.options,n(T0.annotationId));else if(o.RenameFile.is(T0))$Z.renameFile(Q(T0.oldUri),Q(T0.newUri),T0.options,n(T0.annotationId));else if(o.DeleteFile.is(T0))$Z.deleteFile(Q(T0.uri),T0.options,n(T0.annotationId));else if(o.TextDocumentEdit.is(T0)){let F9=Q(T0.textDocument.uri);for(let D0 of T0.edits)if(o.AnnotatedTextEdit.is(D0))$Z.replace(F9,T(D0.range),D0.newText,n(D0.annotationId));else $Z.replace(F9,T(D0.range),D0.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(T0,void 0,4)}`)},M)}else if(X.changes){let KZ=X.changes;await L0.forEach(Object.keys(KZ),(T0)=>{$Z.set(Q(T0),JZ(KZ[T0]))},M)}return $Z}function U(X){if(X===void 0)return;return{label:X.label,needsConfirmation:!!X.needsConfirmation,description:X.description}}function y(X){let M=T(X.range),h=X.target?z(X.target):void 0,n=new VV.default(M,h);if(X.tooltip!==void 0)n.tooltip=X.tooltip;if(X.data!==void 0&&X.data!==null)n.data=X.data;return n}async function g(X,M){if(!X)return;return L0.map(X,y,M)}function p(X){return new m.Color(X.red,X.green,X.blue,X.alpha)}function E0(X){return new m.ColorInformation(T(X.range),p(X.color))}async function O0(X,M){if(!X)return;return L0.map(X,E0,M)}function M0(X){let M=new m.ColorPresentation(X.label);if(M.additionalTextEdits=JZ(X.additionalTextEdits),X.textEdit)M.textEdit=XZ(X.textEdit);return M}async function q0(X,M){if(!X)return;return L0.map(X,M0,M)}function z0(X){if(X)switch(X){case o.FoldingRangeKind.Comment:return m.FoldingRangeKind.Comment;case o.FoldingRangeKind.Imports:return m.FoldingRangeKind.Imports;case o.FoldingRangeKind.Region:return m.FoldingRangeKind.Region}return}function U0(X){return new m.FoldingRange(X.startLine,X.endLine,z0(X.kind))}async function V0(X,M){if(!X)return;return L0.map(X,U0,M)}function C0(X){return new m.SelectionRange(T(X.range),X.parent?C0(X.parent):void 0)}async function c0(X,M){if(!Array.isArray(X))return[];return L0.map(X,C0,M)}function YZ(X){if(o.InlineValueText.is(X))return new m.InlineValueText(T(X.range),X.text);else if(o.InlineValueVariableLookup.is(X))return new m.InlineValueVariableLookup(T(X.range),X.variableName,X.caseSensitiveLookup);else return new m.InlineValueEvaluatableExpression(T(X.range),X.expression)}async function p9(X,M){if(!Array.isArray(X))return[];return L0.map(X,YZ,M)}async function u9(X,M){let h=typeof X.label==="string"?X.label:await L0.map(X.label,V,M),n=new NV.default(E(X.position),h);if(X.kind!==void 0)n.kind=X.kind;if(X.textEdits!==void 0)n.textEdits=await wZ(X.textEdits,M);if(X.tooltip!==void 0)n.tooltip=S(X.tooltip);if(X.paddingLeft!==void 0)n.paddingLeft=X.paddingLeft;if(X.paddingRight!==void 0)n.paddingRight=X.paddingRight;if(X.data!==void 0)n.data=X.data;return n}function V(X){let M=new m.InlayHintLabelPart(X.value);if(X.location!==void 0)M.location=BZ(X.location);if(X.tooltip!==void 0)M.tooltip=S(X.tooltip);if(X.command!==void 0)M.command=s0(X.command);return M}function S(X){if(typeof X==="string")return X;return _(X)}async function i(X,M){if(!Array.isArray(X))return;return L0.mapAsync(X,u9,M)}function w0(X){if(X===null)return;let M=new AV.default(o0(X.kind),X.name,X.detail||"",z(X.uri),T(X.range),T(X.selectionRange),X.data);if(X.tags!==void 0)M.tags=$9(X.tags);return M}async function I(X,M){if(X===null)return;return L0.map(X,w0,M)}async function W(X,M){return new m.CallHierarchyIncomingCall(w0(X.from),await C(X.fromRanges,M))}async function w(X,M){if(X===null)return;return L0.mapAsync(X,W,M)}async function P(X,M){return new m.CallHierarchyOutgoingCall(w0(X.to),await C(X.fromRanges,M))}async function H(X,M){if(X===null)return;return L0.mapAsync(X,P,M)}async function j(X,M){if(X===void 0||X===null)return;return new m.SemanticTokens(new Uint32Array(X.data),X.resultId)}function q(X){return new m.SemanticTokensEdit(X.start,X.deleteCount,X.data!==void 0?new Uint32Array(X.data):void 0)}async function R(X,M){if(X===void 0||X===null)return;return new m.SemanticTokensEdits(X.edits.map(q),X.resultId)}function e(X){return X}async function _0(X,M){if(X===null||X===void 0)return;return new m.LinkedEditingRanges(await C(X.ranges,M),S0(X.wordPattern))}function S0(X){if(X===null||X===void 0)return;return new RegExp(X)}function DZ(X){if(X===null)return;let M=new HV.default(o0(X.kind),X.name,X.detail||"",z(X.uri),T(X.range),T(X.selectionRange),X.data);if(X.tags!==void 0)M.tags=$9(X.tags);return M}async function vZ(X,M){if(X===null)return;return L0.map(X,DZ,M)}function z9(X){if(oZ.string(X))return X;if(o.RelativePattern.is(X)){if(o.URI.is(X.baseUri))return new m.RelativePattern(z(X.baseUri),X.pattern);else if(o.WorkspaceFolder.is(X.baseUri)){let M=m.workspace.getWorkspaceFolder(z(X.baseUri.uri));return M!==void 0?new m.RelativePattern(M,X.pattern):void 0}}return}async function K0(X,M){if(!X)return;if(Array.isArray(X))return L0.map(X,($Z)=>w9($Z),M);let h=X,n=await L0.map(h.items,($Z)=>{return w9($Z)},M);return new m.InlineCompletionList(n)}function w9(X){let M;if(typeof X.insertText==="string")M=X.insertText;else M=new m.SnippetString(X.insertText.value);let h=void 0;if(X.command)h=s0(X.command);let n=new m.InlineCompletionItem(M,T(X.range),h);if(X.filterText)n.filterText=X.filterText;return n}return{asUri:z,asDocumentSelector:G,asDiagnostics:B,asDiagnostic:A,asRange:T,asRanges:C,asPosition:E,asDiagnosticSeverity:x,asDiagnosticTag:L,asHover:B0,asCompletionResult:t,asCompletionItem:y0,asTextEdit:XZ,asTextEdits:wZ,asSignatureHelp:C9,asSignatureInformations:A9,asSignatureInformation:R0,asParameterInformations:CZ,asParameterInformation:FZ,asDeclarationResult:g9,asDefinitionResult:H9,asLocation:BZ,asReferences:d9,asDocumentHighlights:N9,asDocumentHighlight:J9,asDocumentHighlightKind:Y9,asSymbolKind:o0,asSymbolTag:D9,asSymbolTags:$9,asSymbolInformations:E9,asSymbolInformation:iZ,asDocumentSymbols:m9,asDocumentSymbol:nZ,asCommand:s0,asCommands:WZ,asCodeAction:U9,asCodeActionKind:kZ,asCodeActionKinds:SZ,asCodeActionResult:b9,asCodeLens:Q9,asCodeLenses:y9,asWorkspaceEdit:PZ,asDocumentLink:y,asDocumentLinks:g,asFoldingRangeKind:z0,asFoldingRange:U0,asFoldingRanges:V0,asColor:p,asColorInformation:E0,asColorInformations:O0,asColorPresentation:M0,asColorPresentations:q0,asSelectionRange:C0,asSelectionRanges:c0,asInlineValue:YZ,asInlineValues:p9,asInlayHint:u9,asInlayHints:i,asSemanticTokensLegend:e,asSemanticTokens:j,asSemanticTokensEdit:q,asSemanticTokensEdits:R,asCallHierarchyItem:w0,asCallHierarchyItems:I,asCallHierarchyIncomingCall:W,asCallHierarchyIncomingCalls:w,asCallHierarchyOutgoingCall:P,asCallHierarchyOutgoingCalls:H,asLinkedEditingRanges:_0,asTypeHierarchyItem:DZ,asTypeHierarchyItems:vZ,asGlobPattern:z9,asInlineCompletionResult:K0,asInlineCompletionItem:w9}}FY.createConverter=EV});var g0=D((tZ)=>{Object.defineProperty(tZ,"__esModule",{value:!0});tZ.generateUuid=tZ.parse=tZ.isUUID=tZ.v4=tZ.empty=void 0;class PY{constructor(Z){this._value=Z}asHex(){return this._value}equals(Z){return this.asHex()===Z.asHex()}}class G0 extends PY{static _oneOf(Z){return Z[Math.floor(Z.length*Math.random())]}static _randomHex(){return G0._oneOf(G0._chars)}constructor(){super([G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),"-",G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),"-","4",G0._randomHex(),G0._randomHex(),G0._randomHex(),"-",G0._oneOf(G0._timeHighBits),G0._randomHex(),G0._randomHex(),G0._randomHex(),"-",G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex()].join(""))}}G0._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];G0._timeHighBits=["8","9","a","b"];tZ.empty=new PY("00000000-0000-0000-0000-000000000000");function dX(){return new G0}tZ.v4=dX;var LV=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function mX(Z){return LV.test(Z)}tZ.isUUID=mX;function UV(Z){if(!mX(Z))throw new Error("invalid uuid");return new PY(Z)}tZ.parse=UV;function wV(){return dX().asHex()}tZ.generateUuid=wV});var R8=D((MY)=>{Object.defineProperty(MY,"__esModule",{value:!0});MY.ProgressPart=void 0;var pX=require("vscode"),uX=Z0(),lX=aZ();class cX{constructor(Z,J,Y){this._client=Z,this._token=J,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(uX.WorkDoneProgress.type,this._token,($)=>{switch($.kind){case"begin":this.begin($);break;case"report":this.report($);break;case"end":this.done(),Y&&Y(this);break}})}begin(Z){if(this._infinite=Z.percentage===void 0,this._lspProgressDisposable===void 0)return;pX.window.withProgress({location:pX.ProgressLocation.Window,cancellable:Z.cancellable,title:Z.title},async(J,Y)=>{if(this._lspProgressDisposable===void 0)return;return this._progress=J,this._cancellationToken=Y,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(uX.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(Z),new Promise(($,Q)=>{this._resolve=$,this._reject=Q})})}report(Z){if(this._infinite&&lX.string(Z.message))this._progress!==void 0&&this._progress.report({message:Z.message});else if(lX.number(Z.percentage)){let J=Math.max(0,Math.min(Z.percentage,100)),Y=Math.max(0,J-this._reported);this._reported+=Y,this._progress!==void 0&&this._progress.report({message:Z.message,increment:Y})}}cancel(){if(this.cleanup(),this._reject!==void 0)this._reject(),this._resolve=void 0,this._reject=void 0}done(){if(this.cleanup(),this._resolve!==void 0)this._resolve(),this._resolve=void 0,this._reject=void 0}cleanup(){if(this._lspProgressDisposable!==void 0)this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0;if(this._tokenDisposable!==void 0)this._tokenDisposable.dispose(),this._tokenDisposable=void 0;this._progress=void 0,this._cancellationToken=void 0}}MY.ProgressPart=cX});var N0=D((zZ)=>{Object.defineProperty(zZ,"__esModule",{value:!0});zZ.WorkspaceFeature=zZ.TextDocumentLanguageFeature=zZ.TextDocumentEventFeature=zZ.DynamicDocumentFeature=zZ.DynamicFeature=zZ.StaticFeature=zZ.ensure=zZ.LSPCancellationError=void 0;var K6=require("vscode"),h8=Z0(),MZ=aZ(),iX=g0();class sX extends K6.CancellationError{constructor(Z){super();this.data=Z}}zZ.LSPCancellationError=sX;function FV(Z,J){if(Z[J]===void 0)Z[J]={};return Z[J]}zZ.ensure=FV;var nX;(function(Z){function J(Y){let $=Y;return $!==void 0&&$!==null&&MZ.func($.fillClientCapabilities)&&MZ.func($.initialize)&&MZ.func($.getState)&&MZ.func($.clear)&&($.fillInitializeParams===void 0||MZ.func($.fillInitializeParams))}Z.is=J})(nX||(zZ.StaticFeature=nX={}));var aX;(function(Z){function J(Y){let $=Y;return $!==void 0&&$!==null&&MZ.func($.fillClientCapabilities)&&MZ.func($.initialize)&&MZ.func($.getState)&&MZ.func($.clear)&&($.fillInitializeParams===void 0||MZ.func($.fillInitializeParams))&&MZ.func($.register)&&MZ.func($.unregister)&&$.registrationType!==void 0}Z.is=J})(aX||(zZ.DynamicFeature=aX={}));class IY{constructor(Z){this._client=Z}getState(){let Z=this.getDocumentSelectors(),J=0;for(let $ of Z){J++;for(let Q of K6.workspace.textDocuments)if(K6.languages.match($,Q)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}let Y=J>0;return{kind:"document",id:this.registrationType.method,registrations:Y,matches:!1}}}zZ.DynamicDocumentFeature=IY;class rX extends IY{static textDocumentFilter(Z,J){for(let Y of Z)if(K6.languages.match(Y,J)>0)return!0;return!1}constructor(Z,J,Y,$,Q,z,G){super(Z);this._event=J,this._type=Y,this._middleware=$,this._createParams=Q,this._textDocument=z,this._selectorFilter=G,this._selectors=new Map,this._onNotificationSent=new K6.EventEmitter}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(Z){if(!Z.registerOptions.documentSelector)return;if(!this._listener)this._listener=this._event((J)=>{this.callback(J).catch((Y)=>{this._client.error(`Sending document notification ${this._type.method} failed.`,Y)})});this._selectors.set(Z.id,this._client.protocol2CodeConverter.asDocumentSelector(Z.registerOptions.documentSelector))}async callback(Z){let J=async(Y)=>{let $=this._createParams(Y);await this._client.sendNotification(this._type,$),this.notificationSent(this.getTextDocument(Y),this._type,$)};if(this.matches(Z)){let Y=this._middleware();return Y?Y(Z,($)=>J($)):J(Z)}}matches(Z){if(this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(Z)))return!1;return!this._selectorFilter||this._selectorFilter(this._selectors.values(),Z)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(Z,J,Y){this._onNotificationSent.fire({textDocument:Z,type:J,params:Y})}unregister(Z){if(this._selectors.delete(Z),this._selectors.size===0&&this._listener)this._listener.dispose(),this._listener=void 0}clear(){if(this._selectors.clear(),this._onNotificationSent.dispose(),this._listener)this._listener.dispose(),this._listener=void 0}getProvider(Z){for(let J of this._selectors.values())if(K6.languages.match(J,Z)>0)return{send:(Y)=>{return this.callback(Y)}};return}}zZ.TextDocumentEventFeature=rX;class oX extends IY{constructor(Z,J){super(Z);this._registrationType=J,this._registrations=new Map}*getDocumentSelectors(){for(let Z of this._registrations.values()){let J=Z.data.registerOptions.documentSelector;if(J===null)continue;yield this._client.protocol2CodeConverter.asDocumentSelector(J)}}get registrationType(){return this._registrationType}register(Z){if(!Z.registerOptions.documentSelector)return;let J=this.registerLanguageProvider(Z.registerOptions,Z.id);this._registrations.set(Z.id,{disposable:J[0],data:Z,provider:J[1]})}unregister(Z){let J=this._registrations.get(Z);if(J!==void 0)J.disposable.dispose()}clear(){this._registrations.forEach((Z)=>{Z.disposable.dispose()}),this._registrations.clear()}getRegistration(Z,J){if(!J)return[void 0,void 0];else if(h8.TextDocumentRegistrationOptions.is(J)){let Y=h8.StaticRegistrationOptions.hasId(J)?J.id:iX.generateUuid(),$=J.documentSelector??Z;if($)return[Y,Object.assign({},J,{documentSelector:$})]}else if(MZ.boolean(J)&&J===!0||h8.WorkDoneProgressOptions.is(J)){if(!Z)return[void 0,void 0];let Y=MZ.boolean(J)&&J===!0?{documentSelector:Z}:Object.assign({},J,{documentSelector:Z});return[iX.generateUuid(),Y]}return[void 0,void 0]}getRegistrationOptions(Z,J){if(!Z||!J)return;return MZ.boolean(J)&&J===!0?{documentSelector:Z}:Object.assign({},J,{documentSelector:Z})}getProvider(Z){for(let J of this._registrations.values()){let Y=J.data.registerOptions.documentSelector;if(Y!==null&&K6.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(Y),Z)>0)return J.provider}return}getAllProviders(){let Z=[];for(let J of this._registrations.values())Z.push(J.provider);return Z}}zZ.TextDocumentLanguageFeature=oX;class tX{constructor(Z,J){this._client=Z,this._registrationType=J,this._registrations=new Map}getState(){let Z=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:Z}}get registrationType(){return this._registrationType}register(Z){let J=this.registerLanguageProvider(Z.registerOptions);this._registrations.set(Z.id,{disposable:J[0],provider:J[1]})}unregister(Z){let J=this._registrations.get(Z);if(J!==void 0)J.disposable.dispose()}clear(){this._registrations.forEach((Z)=>{Z.disposable.dispose()}),this._registrations.clear()}getProviders(){let Z=[];for(let J of this._registrations.values())Z.push(J.provider);return Z}}zZ.WorkspaceFeature=tX});var Z5=D((mO,eX)=>{var PV=typeof process==="object"&&process&&process.platform==="win32";eX.exports=PV?{sep:"\\"}:{sep:"/"}});var z5=D((pO,Q5)=>{Q5.exports=Y5;function Y5(Z,J,Y){if(Z instanceof RegExp)Z=J5(Z,Y);if(J instanceof RegExp)J=J5(J,Y);var $=$5(Z,J,Y);return $&&{start:$[0],end:$[1],pre:Y.slice(0,$[0]),body:Y.slice($[0]+Z.length,$[1]),post:Y.slice($[1]+J.length)}}function J5(Z,J){var Y=J.match(Z);return Y?Y[0]:null}Y5.range=$5;function $5(Z,J,Y){var $,Q,z,G,B,K=Y.indexOf(Z),A=Y.indexOf(J,K+1),O=K;if(K>=0&&A>0){if(Z===J)return[K,A];$=[],z=Y.length;while(O>=0&&!B){if(O==K)$.push(O),K=Y.indexOf(Z,O+1);else if($.length==1)B=[$.pop(),A];else{if(Q=$.pop(),Q<z)z=Q,G=A;A=Y.indexOf(J,O+1)}O=K<A&&K>=0?K:A}if($.length)B=[z,G]}return B}});var A5=D((uO,W5)=>{var G5=z5();W5.exports=TV;var X5="\x00SLASH"+Math.random()+"\x00",B5="\x00OPEN"+Math.random()+"\x00",f8="\x00CLOSE"+Math.random()+"\x00",j5="\x00COMMA"+Math.random()+"\x00",K5="\x00PERIOD"+Math.random()+"\x00";function x8(Z){return parseInt(Z,10)==Z?parseInt(Z,10):Z.charCodeAt(0)}function MV(Z){return Z.split("\\\\").join(X5).split("\\{").join(B5).split("\\}").join(f8).split("\\,").join(j5).split("\\.").join(K5)}function IV(Z){return Z.split(X5).join("\\").split(B5).join("{").split(f8).join("}").split(j5).join(",").split(K5).join(".")}function V5(Z){if(!Z)return[""];var J=[],Y=G5("{","}",Z);if(!Y)return Z.split(",");var{pre:$,body:Q,post:z}=Y,G=$.split(",");G[G.length-1]+="{"+Q+"}";var B=V5(z);if(z.length)G[G.length-1]+=B.shift(),G.push.apply(G,B);return J.push.apply(J,G),J}function TV(Z){if(!Z)return[];if(Z.substr(0,2)==="{}")Z="\\{\\}"+Z.substr(2);return WJ(MV(Z),!0).map(IV)}function qV(Z){return"{"+Z+"}"}function CV(Z){return/^-?0\d/.test(Z)}function SV(Z,J){return Z<=J}function DV(Z,J){return Z>=J}function WJ(Z,J){var Y=[],$=G5("{","}",Z);if(!$)return[Z];var Q=$.pre,z=$.post.length?WJ($.post,!1):[""];if(/\$$/.test($.pre))for(var G=0;G<z.length;G++){var B=Q+"{"+$.body+"}"+z[G];Y.push(B)}else{var K=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test($.body),A=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test($.body),O=K||A,F=$.body.indexOf(",")>=0;if(!O&&!F){if($.post.match(/,.*\}/))return Z=$.pre+"{"+$.body+f8+$.post,WJ(Z);return[Z]}var L;if(O)L=$.body.split(/\.\./);else if(L=V5($.body),L.length===1){if(L=WJ(L[0],!1).map(qV),L.length===1)return z.map(function(y0){return $.pre+L[0]+y0})}var E;if(O){var T=x8(L[0]),C=x8(L[1]),x=Math.max(L[0].length,L[1].length),f=L.length==3?Math.abs(x8(L[2])):1,d=SV,_=C<T;if(_)f*=-1,d=DV;var B0=L.some(CV);E=[];for(var t=T;d(t,C);t+=f){var u;if(A){if(u=String.fromCharCode(t),u==="\\")u=""}else if(u=String(t),B0){var a=x-u.length;if(a>0){var j0=new Array(a+1).join("0");if(t<0)u="-"+j0+u.slice(1);else u=j0+u}}E.push(u)}}else{E=[];for(var f0=0;f0<L.length;f0++)E.push.apply(E,WJ(L[f0],!1))}for(var f0=0;f0<E.length;f0++)for(var G=0;G<z.length;G++){var B=Q+E[f0]+z[G];if(!J||O||B)Y.push(B)}}return Y}});var qY=D((lO,d8)=>{var mZ=d8.exports=(Z,J,Y={})=>{if(TY(J),!Y.nocomment&&J.charAt(0)==="#")return!1;return new AJ(J,Y).match(Z)};d8.exports=mZ;var v8=Z5();mZ.sep=v8.sep;var B9=Symbol("globstar **");mZ.GLOBSTAR=B9;var bV=A5(),H5={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},g8="[^/]",_8=g8+"*?",yV="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",RV="(?:(?!(?:\\/|^)\\.).)*?",E5=(Z)=>Z.split("").reduce((J,Y)=>{return J[Y]=!0,J},{}),O5=E5("().*{}+?[]^$\\!"),hV=E5("[.("),N5=/\/+/;mZ.filter=(Z,J={})=>(Y,$,Q)=>mZ(Y,Z,J);var e9=(Z,J={})=>{let Y={};return Object.keys(Z).forEach(($)=>Y[$]=Z[$]),Object.keys(J).forEach(($)=>Y[$]=J[$]),Y};mZ.defaults=(Z)=>{if(!Z||typeof Z!=="object"||!Object.keys(Z).length)return mZ;let J=mZ,Y=($,Q,z)=>J($,Q,e9(Z,z));return Y.Minimatch=class $ extends J.Minimatch{constructor(Q,z){super(Q,e9(Z,z))}},Y.Minimatch.defaults=($)=>J.defaults(e9(Z,$)).Minimatch,Y.filter=($,Q)=>J.filter($,e9(Z,Q)),Y.defaults=($)=>J.defaults(e9(Z,$)),Y.makeRe=($,Q)=>J.makeRe($,e9(Z,Q)),Y.braceExpand=($,Q)=>J.braceExpand($,e9(Z,Q)),Y.match=($,Q,z)=>J.match($,Q,e9(Z,z)),Y};mZ.braceExpand=(Z,J)=>L5(Z,J);var L5=(Z,J={})=>{if(TY(Z),J.nobrace||!/\{(?:(?!\{).)*\}/.test(Z))return[Z];return bV(Z)},xV=65536,TY=(Z)=>{if(typeof Z!=="string")throw new TypeError("invalid pattern");if(Z.length>xV)throw new TypeError("pattern is too long")},k8=Symbol("subparse");mZ.makeRe=(Z,J)=>new AJ(Z,J||{}).makeRe();mZ.match=(Z,J,Y={})=>{let $=new AJ(J,Y);if(Z=Z.filter((Q)=>$.match(Q)),$.options.nonull&&!Z.length)Z.push(J);return Z};var fV=(Z)=>Z.replace(/\\(.)/g,"$1"),_V=(Z)=>Z.replace(/\\([^-\]])/g,"$1"),kV=(Z)=>Z.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),vV=(Z)=>Z.replace(/[[\]\\]/g,"\\$&");class AJ{constructor(Z,J){if(TY(Z),!J)J={};if(this.options=J,this.set=[],this.pattern=Z,this.windowsPathsNoEscape=!!J.windowsPathsNoEscape||J.allowWindowsEscape===!1,this.windowsPathsNoEscape)this.pattern=this.pattern.replace(/\\/g,"/");this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!J.partial,this.make()}debug(){}make(){let Z=this.pattern,J=this.options;if(!J.nocomment&&Z.charAt(0)==="#"){this.comment=!0;return}if(!Z){this.empty=!0;return}this.parseNegate();let Y=this.globSet=this.braceExpand();if(J.debug)this.debug=(...$)=>console.error(...$);this.debug(this.pattern,Y),Y=this.globParts=Y.map(($)=>$.split(N5)),this.debug(this.pattern,Y),Y=Y.map(($,Q,z)=>$.map(this.parse,this)),this.debug(this.pattern,Y),Y=Y.filter(($)=>$.indexOf(!1)===-1),this.debug(this.pattern,Y),this.set=Y}parseNegate(){if(this.options.nonegate)return;let Z=this.pattern,J=!1,Y=0;for(let $=0;$<Z.length&&Z.charAt($)==="!";$++)J=!J,Y++;if(Y)this.pattern=Z.slice(Y);this.negate=J}matchOne(Z,J,Y){var $=this.options;this.debug("matchOne",{this:this,file:Z,pattern:J}),this.debug("matchOne",Z.length,J.length);for(var Q=0,z=0,G=Z.length,B=J.length;Q<G&&z<B;Q++,z++){this.debug("matchOne loop");var K=J[z],A=Z[Q];if(this.debug(J,K,A),K===!1)return!1;if(K===B9){this.debug("GLOBSTAR",[J,K,A]);var O=Q,F=z+1;if(F===B){this.debug("** at the end");for(;Q<G;Q++)if(Z[Q]==="."||Z[Q]===".."||!$.dot&&Z[Q].charAt(0)===".")return!1;return!0}while(O<G){var L=Z[O];if(this.debug(`
globstar while`,Z,O,J,F,L),this.matchOne(Z.slice(O),J.slice(F),Y))return this.debug("globstar found match!",O,G,L),!0;else{if(L==="."||L===".."||!$.dot&&L.charAt(0)==="."){this.debug("dot detected!",Z,O,J,F);break}this.debug("globstar swallow a segment, and continue"),O++}}if(Y){if(this.debug(`
>>> no match, partial?`,Z,O,J,F),O===G)return!0}return!1}var E;if(typeof K==="string")E=A===K,this.debug("string match",K,A,E);else E=A.match(K),this.debug("pattern match",K,A,E);if(!E)return!1}if(Q===G&&z===B)return!0;else if(Q===G)return Y;else if(z===B)return Q===G-1&&Z[Q]==="";throw new Error("wtf?")}braceExpand(){return L5(this.pattern,this.options)}parse(Z,J){TY(Z);let Y=this.options;if(Z==="**")if(!Y.noglobstar)return B9;else Z="*";if(Z==="")return"";let $="",Q=!1,z=!1,G=[],B=[],K,A=!1,O=-1,F=-1,L,E,T,C=Z.charAt(0)===".",x=Y.dot||C,f=()=>C?"":x?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",d=(u)=>u.charAt(0)==="."?"":Y.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",_=()=>{if(K){switch(K){case"*":$+=_8,Q=!0;break;case"?":$+=g8,Q=!0;break;default:$+="\\"+K;break}this.debug("clearStateChar %j %j",K,$),K=!1}};for(let u=0,a;u<Z.length&&(a=Z.charAt(u));u++){if(this.debug("%s\t%s %s %j",Z,u,$,a),z){if(a==="/")return!1;if(O5[a])$+="\\";$+=a,z=!1;continue}switch(a){case"/":return!1;case"\\":if(A&&Z.charAt(u+1)==="-"){$+=a;continue}_(),z=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",Z,u,$,a),A){if(this.debug("  in class"),a==="!"&&u===F+1)a="^";$+=a;continue}if(this.debug("call clearStateChar %j",K),_(),K=a,Y.noext)_();continue;case"(":{if(A){$+="(";continue}if(!K){$+="\\(";continue}let j0={type:K,start:u-1,reStart:$.length,open:H5[K].open,close:H5[K].close};if(this.debug(this.pattern,"\t",j0),G.push(j0),$+=j0.open,j0.start===0&&j0.type!=="!")C=!0,$+=d(Z.slice(u+1));this.debug("plType %j %j",K,$),K=!1;continue}case")":{let j0=G[G.length-1];if(A||!j0){$+="\\)";continue}if(G.pop(),_(),Q=!0,E=j0,$+=E.close,E.type==="!")B.push(Object.assign(E,{reEnd:$.length}));continue}case"|":{let j0=G[G.length-1];if(A||!j0){$+="\\|";continue}if(_(),$+="|",j0.start===0&&j0.type!=="!")C=!0,$+=d(Z.slice(u+1));continue}case"[":if(_(),A){$+="\\"+a;continue}A=!0,F=u,O=$.length,$+=a;continue;case"]":if(u===F+1||!A){$+="\\"+a;continue}L=Z.substring(F+1,u);try{RegExp("["+vV(_V(L))+"]"),$+=a}catch(j0){$=$.substring(0,O)+"(?:$.)"}Q=!0,A=!1;continue;default:if(_(),O5[a]&&!(a==="^"&&A))$+="\\";$+=a;break}}if(A)L=Z.slice(F+1),T=this.parse(L,k8),$=$.substring(0,O)+"\\["+T[0],Q=Q||T[1];for(E=G.pop();E;E=G.pop()){let u;u=$.slice(E.reStart+E.open.length),this.debug("setting tail",$,E),u=u.replace(/((?:\\{2}){0,64})(\\?)\|/g,(j0,f0,y0)=>{if(!y0)y0="\\";return f0+f0+y0+"|"}),this.debug(`tail=%j
   %s`,u,u,E,$);let a=E.type==="*"?_8:E.type==="?"?g8:"\\"+E.type;Q=!0,$=$.slice(0,E.reStart)+a+"\\("+u}if(_(),z)$+="\\\\";let B0=hV[$.charAt(0)];for(let u=B.length-1;u>-1;u--){let a=B[u],j0=$.slice(0,a.reStart),f0=$.slice(a.reStart,a.reEnd-8),y0=$.slice(a.reEnd),qZ=$.slice(a.reEnd-8,a.reEnd)+y0,r0=j0.split(")").length,cZ=j0.split("(").length-r0,XZ=y0;for(let JZ=0;JZ<cZ;JZ++)XZ=XZ.replace(/\)[+*?]?/,"");y0=XZ;let wZ=y0===""&&J!==k8?"(?:$|\\/)":"";$=j0+f0+y0+wZ+qZ}if($!==""&&Q)$="(?=.)"+$;if(B0)$=f()+$;if(J===k8)return[$,Q];if(Y.nocase&&!Q)Q=Z.toUpperCase()!==Z.toLowerCase();if(!Q)return fV(Z);let t=Y.nocase?"i":"";try{return Object.assign(new RegExp("^"+$+"$",t),{_glob:Z,_src:$})}catch(u){return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let Z=this.set;if(!Z.length)return this.regexp=!1,this.regexp;let J=this.options,Y=J.noglobstar?_8:J.dot?yV:RV,$=J.nocase?"i":"",Q=Z.map((z)=>{return z=z.map((G)=>typeof G==="string"?kV(G):G===B9?B9:G._src).reduce((G,B)=>{if(!(G[G.length-1]===B9&&B===B9))G.push(B);return G},[]),z.forEach((G,B)=>{if(G!==B9||z[B-1]===B9)return;if(B===0)if(z.length>1)z[B+1]="(?:\\/|"+Y+"\\/)?"+z[B+1];else z[B]=Y;else if(B===z.length-1)z[B-1]+="(?:\\/|"+Y+")?";else z[B-1]+="(?:\\/|\\/"+Y+"\\/)"+z[B+1],z[B+1]=B9}),z.filter((G)=>G!==B9).join("/")}).join("|");if(Q="^(?:"+Q+")$",this.negate)Q="^(?!"+Q+").*$";try{this.regexp=new RegExp(Q,$)}catch(z){this.regexp=!1}return this.regexp}match(Z,J=this.partial){if(this.debug("match",Z,this.pattern),this.comment)return!1;if(this.empty)return Z==="";if(Z==="/"&&J)return!0;let Y=this.options;if(v8.sep!=="/")Z=Z.split(v8.sep).join("/");Z=Z.split(N5),this.debug(this.pattern,"split",Z);let $=this.set;this.debug(this.pattern,"set",$);let Q;for(let z=Z.length-1;z>=0;z--)if(Q=Z[z],Q)break;for(let z=0;z<$.length;z++){let G=$[z],B=Z;if(Y.matchBase&&G.length===1)B=[Q];if(this.matchOne(B,G,J)){if(Y.flipNegate)return!0;return!this.negate}}if(Y.flipNegate)return!1;return this.negate}static defaults(Z){return mZ.defaults(Z).Minimatch}}mZ.Minimatch=AJ});var p8=D((Z6)=>{Object.defineProperty(Z6,"__esModule",{value:!0});Z6.DiagnosticFeature=Z6.DiagnosticPullMode=Z6.vsdiag=void 0;var gV=qY(),W0=require("vscode"),a0=Z0(),dV=g0(),m8=N0();function CY(Z,J){if(Z[J]===void 0)Z[J]={};return Z[J]}var eZ;(function(Z){let J;(function(Y){Y.full="full",Y.unChanged="unChanged"})(J=Z.DocumentDiagnosticReportKind||(Z.DocumentDiagnosticReportKind={}))})(eZ||(Z6.vsdiag=eZ={}));var SY;(function(Z){Z.onType="onType",Z.onSave="onSave"})(SY||(Z6.DiagnosticPullMode=SY={}));var LZ;(function(Z){Z.active="open",Z.reschedule="reschedule",Z.outDated="drop"})(LZ||(LZ={}));class HJ{constructor(){this.open=new Set,this._onOpen=new W0.EventEmitter,this._onClose=new W0.EventEmitter,HJ.fillTabResources(this.open);let Z=(J)=>{if(J.closed.length===0&&J.opened.length===0)return;let Y=this.open,$=new Set;HJ.fillTabResources($);let Q=new Set,z=new Set($);for(let G of Y.values())if($.has(G))z.delete(G);else Q.add(G);if(this.open=$,Q.size>0){let G=new Set;for(let B of Q)G.add(W0.Uri.parse(B));this._onClose.fire(G)}if(z.size>0){let G=new Set;for(let B of z)G.add(W0.Uri.parse(B));this._onOpen.fire(G)}};if(W0.window.tabGroups.onDidChangeTabs!==void 0)this.disposable=W0.window.tabGroups.onDidChangeTabs(Z);else this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(Z){return Z instanceof W0.Uri?W0.window.activeTextEditor?.document.uri===Z:W0.window.activeTextEditor?.document===Z}isVisible(Z){let J=Z instanceof W0.Uri?Z:Z.uri;return this.open.has(J.toString())}getTabResources(){let Z=new Set;return HJ.fillTabResources(new Set,Z),Z}static fillTabResources(Z,J){let Y=Z??new Set;for(let $ of W0.window.tabGroups.all)for(let Q of $.tabs){let z=Q.input,G;if(z instanceof W0.TabInputText)G=z.uri;else if(z instanceof W0.TabInputTextDiff)G=z.modified;else if(z instanceof W0.TabInputCustom)G=z.uri;if(G!==void 0&&!Y.has(G.toString()))Y.add(G.toString()),J!==void 0&&J.add(G)}}}var ZZ;(function(Z){Z[Z.document=1]="document",Z[Z.workspace=2]="workspace"})(ZZ||(ZZ={}));var x9;(function(Z){function J(Y){return Y instanceof W0.Uri?Y.toString():Y.uri.toString()}Z.asKey=J})(x9||(x9={}));class U5{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(Z,J,Y){let $=Z===ZZ.document?this.documentPullStates:this.workspacePullStates,[Q,z,G]=J instanceof W0.Uri?[J.toString(),J,Y]:[J.uri.toString(),J.uri,J.version],B=$.get(Q);if(B===void 0)B={document:z,pulledVersion:G,resultId:void 0},$.set(Q,B);return B}update(Z,J,Y,$){let Q=Z===ZZ.document?this.documentPullStates:this.workspacePullStates,[z,G,B,K]=J instanceof W0.Uri?[J.toString(),J,Y,$]:[J.uri.toString(),J.uri,J.version,Y],A=Q.get(z);if(A===void 0)A={document:G,pulledVersion:B,resultId:K},Q.set(z,A);else A.pulledVersion=B,A.resultId=K}unTrack(Z,J){let Y=x9.asKey(J);(Z===ZZ.document?this.documentPullStates:this.workspacePullStates).delete(Y)}tracks(Z,J){let Y=x9.asKey(J);return(Z===ZZ.document?this.documentPullStates:this.workspacePullStates).has(Y)}getResultId(Z,J){let Y=x9.asKey(J);return(Z===ZZ.document?this.documentPullStates:this.workspacePullStates).get(Y)?.resultId}getAllResultIds(){let Z=[];for(let[J,Y]of this.workspacePullStates){if(this.documentPullStates.has(J))Y=this.documentPullStates.get(J);if(Y.resultId!==void 0)Z.push({uri:J,value:Y.resultId})}return Z}}class w5{constructor(Z,J,Y){this.client=Z,this.tabs=J,this.options=Y,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new W0.EventEmitter,this.provider=this.createProvider(),this.diagnostics=W0.languages.createDiagnosticCollection(Y.identifier),this.openRequests=new Map,this.documentStates=new U5,this.workspaceErrorCounter=0}knows(Z,J){let Y=J instanceof W0.Uri?J:J.uri;return this.documentStates.tracks(Z,J)||this.openRequests.has(Y.toString())}forget(Z,J){this.documentStates.unTrack(Z,J)}pull(Z,J){if(this.isDisposed)return;let Y=Z instanceof W0.Uri?Z:Z.uri;this.pullAsync(Z).then(()=>{if(J)J()},($)=>{this.client.error(`Document pull failed for text document ${Y.toString()}`,$,!1)})}async pullAsync(Z,J){if(this.isDisposed)return;let Y=Z instanceof W0.Uri,$=Y?Z:Z.uri,Q=$.toString();J=Y?J:Z.version;let z=this.openRequests.get(Q),G=Y?this.documentStates.track(ZZ.document,Z,J):this.documentStates.track(ZZ.document,Z);if(z===void 0){let B=new W0.CancellationTokenSource;this.openRequests.set(Q,{state:LZ.active,document:Z,version:J,tokenSource:B});let K,A;try{K=await this.provider.provideDiagnostics(Z,G.resultId,B.token)??{kind:eZ.DocumentDiagnosticReportKind.full,items:[]}}catch(O){if(O instanceof m8.LSPCancellationError&&a0.DiagnosticServerCancellationData.is(O.data)&&O.data.retriggerRequest===!1)A={state:LZ.outDated,document:Z};if(A===void 0&&O instanceof W0.CancellationError)A={state:LZ.reschedule,document:Z};else throw O}if(A=A??this.openRequests.get(Q),A===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${Q}`),this.diagnostics.delete($);return}if(this.openRequests.delete(Q),!this.tabs.isVisible(Z)){this.documentStates.unTrack(ZZ.document,Z);return}if(A.state===LZ.outDated)return;if(K!==void 0){if(K.kind===eZ.DocumentDiagnosticReportKind.full)this.diagnostics.set($,K.items);G.pulledVersion=J,G.resultId=K.resultId}if(A.state===LZ.reschedule)this.pull(Z)}else if(z.state===LZ.active)z.tokenSource.cancel(),this.openRequests.set(Q,{state:LZ.reschedule,document:z.document});else if(z.state===LZ.outDated)this.openRequests.set(Q,{state:LZ.reschedule,document:z.document})}forgetDocument(Z){let J=Z instanceof W0.Uri?Z:Z.uri,Y=J.toString(),$=this.openRequests.get(Y);if(this.options.workspaceDiagnostics)if($!==void 0)this.openRequests.set(Y,{state:LZ.reschedule,document:Z});else this.pull(Z,()=>{this.forget(ZZ.document,Z)});else{if($!==void 0){if($.state===LZ.active)$.tokenSource.cancel();this.openRequests.set(Y,{state:LZ.outDated,document:Z})}this.diagnostics.delete(J),this.forget(ZZ.document,Z)}}pullWorkspace(){if(this.isDisposed)return;this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=a0.RAL().timer.setTimeout(()=>{this.pullWorkspace()},2000)},(Z)=>{if(!(Z instanceof m8.LSPCancellationError)&&!a0.DiagnosticServerCancellationData.is(Z.data))this.client.error("Workspace diagnostic pull failed.",Z,!1),this.workspaceErrorCounter++;if(this.workspaceErrorCounter<=5)this.workspaceTimeout=a0.RAL().timer.setTimeout(()=>{this.pullWorkspace()},2000)})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;if(this.workspaceCancellation!==void 0)this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0;this.workspaceCancellation=new W0.CancellationTokenSource;let Z=this.documentStates.getAllResultIds().map((J)=>{return{uri:this.client.protocol2CodeConverter.asUri(J.uri),value:J.value}});await this.provider.provideWorkspaceDiagnostics(Z,this.workspaceCancellation.token,(J)=>{if(!J||this.isDisposed)return;for(let Y of J.items){if(Y.kind===eZ.DocumentDiagnosticReportKind.full){if(!this.documentStates.tracks(ZZ.document,Y.uri))this.diagnostics.set(Y.uri,Y.items)}this.documentStates.update(ZZ.workspace,Y.uri,Y.version??void 0,Y.resultId)}})}createProvider(){let Z={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(J,Y,$)=>{let Q=(G,B,K)=>{let A={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(G instanceof W0.Uri?G:G.uri)},previousResultId:B};if(this.isDisposed===!0||!this.client.isRunning())return{kind:eZ.DocumentDiagnosticReportKind.full,items:[]};return this.client.sendRequest(a0.DocumentDiagnosticRequest.type,A,K).then(async(O)=>{if(O===void 0||O===null||this.isDisposed||K.isCancellationRequested)return{kind:eZ.DocumentDiagnosticReportKind.full,items:[]};if(O.kind===a0.DocumentDiagnosticReportKind.Full)return{kind:eZ.DocumentDiagnosticReportKind.full,resultId:O.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(O.items,K)};else return{kind:eZ.DocumentDiagnosticReportKind.unChanged,resultId:O.resultId}},(O)=>{return this.client.handleFailedRequest(a0.DocumentDiagnosticRequest.type,K,O,{kind:eZ.DocumentDiagnosticReportKind.full,items:[]})})},z=this.client.middleware;return z.provideDiagnostics?z.provideDiagnostics(J,Y,$,Q):Q(J,Y,$)}};if(this.options.workspaceDiagnostics)Z.provideWorkspaceDiagnostics=(J,Y,$)=>{let Q=async(K)=>{if(K.kind===a0.DocumentDiagnosticReportKind.Full)return{kind:eZ.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(K.uri),resultId:K.resultId,version:K.version,items:await this.client.protocol2CodeConverter.asDiagnostics(K.items,Y)};else return{kind:eZ.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(K.uri),resultId:K.resultId,version:K.version}},z=(K)=>{let A=[];for(let O of K)A.push({uri:this.client.code2ProtocolConverter.asUri(O.uri),value:O.value});return A},G=(K,A)=>{let O=dV.generateUuid(),F=this.client.onProgress(a0.WorkspaceDiagnosticRequest.partialResult,O,async(E)=>{if(E===void 0||E===null){$(null);return}let T={items:[]};for(let C of E.items)try{T.items.push(await Q(C))}catch(x){this.client.error("Converting workspace diagnostics failed.",x)}$(T)}),L={identifier:this.options.identifier,previousResultIds:z(K),partialResultToken:O};if(this.isDisposed===!0||!this.client.isRunning())return{items:[]};return this.client.sendRequest(a0.WorkspaceDiagnosticRequest.type,L,A).then(async(E)=>{if(A.isCancellationRequested)return{items:[]};let T={items:[]};for(let C of E.items)T.items.push(await Q(C));return F.dispose(),$(T),{items:[]}},(E)=>{return F.dispose(),this.client.handleFailedRequest(a0.DocumentDiagnosticRequest.type,A,E,{items:[]})})},B=this.client.middleware;return B.provideWorkspaceDiagnostics?B.provideWorkspaceDiagnostics(J,Y,$,G):G(J,Y,$)};return Z}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[Z,J]of this.openRequests){if(J.state===LZ.active)J.tokenSource.cancel();this.openRequests.set(Z,{state:LZ.outDated,document:J.document})}this.diagnostics.dispose()}}class F5{constructor(Z){this.diagnosticRequestor=Z,this.documents=new a0.LinkedMap,this.isDisposed=!1}add(Z){if(this.isDisposed===!0)return;let J=x9.asKey(Z);if(this.documents.has(J))return;this.documents.set(J,Z,a0.Touch.Last),this.trigger()}remove(Z){let J=x9.asKey(Z);if(this.documents.delete(J),this.documents.size===0)this.stop();else if(J===this.endDocumentKey())this.endDocument=this.documents.last}trigger(){if(this.isDisposed===!0)return;if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=a0.RAL().timer.setInterval(()=>{let Z=this.documents.first;if(Z!==void 0){let J=x9.asKey(Z);if(this.diagnosticRequestor.pull(Z),this.documents.set(J,Z,a0.Touch.Last),J===this.endDocumentKey())this.stop()}},200)}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}endDocumentKey(){return this.endDocument!==void 0?x9.asKey(this.endDocument):void 0}}class P5{constructor(Z,J,Y){let $=Z.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},Q=Z.protocol2CodeConverter.asDocumentSelector(Y.documentSelector),z=[],G=(E)=>{let T=Y.documentSelector;if($.match!==void 0)return $.match(T,E);for(let C of T){if(!a0.TextDocumentFilter.is(C))continue;if(typeof C==="string")return!1;if(C.language!==void 0&&C.language!=="*")return!1;if(C.scheme!==void 0&&C.scheme!=="*"&&C.scheme!==E.scheme)return!1;if(C.pattern!==void 0){let x=new gV.Minimatch(C.pattern,{noext:!0});if(!x.makeRe())return!1;if(!x.match(E.fsPath))return!1}}return!0},B=(E)=>{return E instanceof W0.Uri?G(E):W0.languages.match(Q,E)>0&&J.isVisible(E)},K=(E)=>{return E instanceof W0.Uri?this.activeTextDocument?.uri.toString()===E.toString():this.activeTextDocument===E};this.diagnosticRequestor=new w5(Z,J,Y),this.backgroundScheduler=new F5(this.diagnosticRequestor);let A=(E)=>{if(!B(E)||!Y.interFileDependencies||K(E))return;this.backgroundScheduler.add(E)};this.activeTextDocument=W0.window.activeTextEditor?.document,W0.window.onDidChangeActiveTextEditor((E)=>{let T=this.activeTextDocument;if(this.activeTextDocument=E?.document,T!==void 0)A(T);if(this.activeTextDocument!==void 0)this.backgroundScheduler.remove(this.activeTextDocument)});let O=Z.getFeature(a0.DidOpenTextDocumentNotification.method);z.push(O.onNotificationSent((E)=>{let T=E.textDocument;if(this.diagnosticRequestor.knows(ZZ.document,T))return;if(B(T))this.diagnosticRequestor.pull(T,()=>{A(T)})})),z.push(J.onOpen((E)=>{for(let T of E){if(this.diagnosticRequestor.knows(ZZ.document,T))continue;let C=T.toString(),x;for(let f of W0.workspace.textDocuments)if(C===f.uri.toString()){x=f;break}if(x!==void 0&&B(x))this.diagnosticRequestor.pull(x,()=>{A(x)})}}));let F=new Set;for(let E of W0.workspace.textDocuments)if(B(E))this.diagnosticRequestor.pull(E,()=>{A(E)}),F.add(E.uri.toString());if($.onTabs===!0){for(let E of J.getTabResources())if(!F.has(E.toString())&&B(E))this.diagnosticRequestor.pull(E,()=>{A(E)})}if($.onChange===!0){let E=Z.getFeature(a0.DidChangeTextDocumentNotification.method);z.push(E.onNotificationSent(async(T)=>{let C=T.textDocument;if(($.filter===void 0||!$.filter(C,SY.onType))&&this.diagnosticRequestor.knows(ZZ.document,C))this.diagnosticRequestor.pull(C,()=>{this.backgroundScheduler.trigger()})}))}if($.onSave===!0){let E=Z.getFeature(a0.DidSaveTextDocumentNotification.method);z.push(E.onNotificationSent((T)=>{let C=T.textDocument;if(($.filter===void 0||!$.filter(C,SY.onSave))&&this.diagnosticRequestor.knows(ZZ.document,C))this.diagnosticRequestor.pull(T.textDocument,()=>{this.backgroundScheduler.trigger()})}))}let L=Z.getFeature(a0.DidCloseTextDocumentNotification.method);if(z.push(L.onNotificationSent((E)=>{this.cleanUpDocument(E.textDocument)})),J.onClose((E)=>{for(let T of E)this.cleanUpDocument(T)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let E of W0.workspace.textDocuments)if(B(E))this.diagnosticRequestor.pull(E)}),Y.workspaceDiagnostics===!0&&Y.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14")this.diagnosticRequestor.pullWorkspace();this.disposable=W0.Disposable.from(...z,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(Z){if(this.diagnosticRequestor.knows(ZZ.document,Z))this.diagnosticRequestor.forgetDocument(Z),this.backgroundScheduler.remove(Z)}}class M5 extends m8.TextDocumentLanguageFeature{constructor(Z){super(Z,a0.DocumentDiagnosticRequest.type)}fillClientCapabilities(Z){let J=CY(CY(Z,"textDocument"),"diagnostic");J.dynamicRegistration=!0,J.relatedDocumentSupport=!1,CY(CY(Z,"workspace"),"diagnostics").refreshSupport=!0}initialize(Z,J){this._client.onRequest(a0.DiagnosticRefreshRequest.type,async()=>{for(let z of this.getAllProviders())z.onDidChangeDiagnosticsEmitter.fire()});let[$,Q]=this.getRegistration(J,Z.diagnosticProvider);if(!$||!Q)return;this.register({id:$,registerOptions:Q})}clear(){if(this.tabs!==void 0)this.tabs.dispose(),this.tabs=void 0;super.clear()}registerLanguageProvider(Z){if(this.tabs===void 0)this.tabs=new HJ;let J=new P5(this._client,this.tabs,Z);return[J.disposable,J]}}Z6.DiagnosticFeature=M5});var q5=D((yY)=>{Object.defineProperty(yY,"__esModule",{value:!0});yY.NotebookDocumentSyncFeature=void 0;var UZ=require("vscode"),mV=qY(),f9=Z0(),pV=g0(),I5=aZ();function T5(Z,J){if(Z[J]===void 0)Z[J]={};return Z[J]}var l6;(function(Z){let J;(function(Y){function $(L,E){return{version:L.version,uri:E.asUri(L.uri)}}Y.asVersionedNotebookDocumentIdentifier=$;function Q(L,E,T){let C=f9.NotebookDocument.create(T.asUri(L.uri),L.notebookType,L.version,z(E,T));if(Object.keys(L.metadata).length>0)C.metadata=G(L.metadata);return C}Y.asNotebookDocument=Q;function z(L,E){return L.map((T)=>B(T,E))}Y.asNotebookCells=z;function G(L){return A(new Set,L)}Y.asMetadata=G;function B(L,E){let T=f9.NotebookCell.create(K(L.kind),E.asUri(L.document.uri));if(Object.keys(L.metadata).length>0)T.metadata=G(L.metadata);if(L.executionSummary!==void 0&&(I5.number(L.executionSummary.executionOrder)&&I5.boolean(L.executionSummary.success)))T.executionSummary={executionOrder:L.executionSummary.executionOrder,success:L.executionSummary.success};return T}Y.asNotebookCell=B;function K(L){switch(L){case UZ.NotebookCellKind.Markup:return f9.NotebookCellKind.Markup;case UZ.NotebookCellKind.Code:return f9.NotebookCellKind.Code}}function A(L,E){if(L.has(E))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(E)){let T=[];for(let C of E)if(C!==null&&typeof C==="object"||Array.isArray(C))T.push(A(L,C));else{if(C instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");T.push(C)}return T}else{let T=Object.keys(E),C=Object.create(null);for(let x of T){let f=E[x];if(f!==null&&typeof f==="object"||Array.isArray(f))C[x]=A(L,f);else{if(f instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");C[x]=f}}return C}}function O(L,E){let T=E.asChangeTextDocumentParams(L,L.document.uri,L.document.version);return{document:T.textDocument,changes:T.contentChanges}}Y.asTextContentChange=O;function F(L,E){let T=Object.create(null);if(L.metadata)T.metadata=Z.c2p.asMetadata(L.metadata);if(L.cells!==void 0){let C=Object.create(null),x=L.cells;if(x.structure)C.structure={array:{start:x.structure.array.start,deleteCount:x.structure.array.deleteCount,cells:x.structure.array.cells!==void 0?x.structure.array.cells.map((f)=>Z.c2p.asNotebookCell(f,E)):void 0},didOpen:x.structure.didOpen!==void 0?x.structure.didOpen.map((f)=>E.asOpenTextDocumentParams(f.document).textDocument):void 0,didClose:x.structure.didClose!==void 0?x.structure.didClose.map((f)=>E.asCloseTextDocumentParams(f.document).textDocument):void 0};if(x.data!==void 0)C.data=x.data.map((f)=>Z.c2p.asNotebookCell(f,E));if(x.textContent!==void 0)C.textContent=x.textContent.map((f)=>Z.c2p.asTextContentChange(f,E));if(Object.keys(C).length>0)T.cells=C}return T}Y.asNotebookDocumentChangeEvent=F})(J=Z.c2p||(Z.c2p={}))})(l6||(l6={}));var u8;(function(Z){function J(B,K,A){let O=B.length,F=K.length,L=0;while(L<F&&L<O&&Y(B[L],K[L],A))L++;if(L<F&&L<O){let E=O-1,T=F-1;while(E>=0&&T>=0&&Y(B[E],K[T],A))E--,T--;let C=E+1-L,x=L===T+1?void 0:K.slice(L,T+1);return x!==void 0?{start:L,deleteCount:C,cells:x}:{start:L,deleteCount:C}}else if(L<F)return{start:L,deleteCount:0,cells:K.slice(L)};else if(L<O)return{start:L,deleteCount:O-L};else return}Z.computeDiff=J;function Y(B,K,A=!0){if(B.kind!==K.kind||B.document.uri.toString()!==K.document.uri.toString()||B.document.languageId!==K.document.languageId||!$(B.executionSummary,K.executionSummary))return!1;return!A||A&&z(B.metadata,K.metadata)}function $(B,K){if(B===K)return!0;if(B===void 0||K===void 0)return!1;return B.executionOrder===K.executionOrder&&B.success===K.success&&Q(B.timing,K.timing)}function Q(B,K){if(B===K)return!0;if(B===void 0||K===void 0)return!1;return B.startTime===K.startTime&&B.endTime===K.endTime}function z(B,K){if(B===K)return!0;if(B===null||B===void 0||K===null||K===void 0)return!1;if(typeof B!==typeof K)return!1;if(typeof B!=="object")return!1;let A=Array.isArray(B),O=Array.isArray(K);if(A!==O)return!1;if(A&&O){if(B.length!==K.length)return!1;for(let F=0;F<B.length;F++)if(!z(B[F],K[F]))return!1}if(G(B)&&G(K)){let F=Object.keys(B),L=Object.keys(K);if(F.length!==L.length)return!1;if(F.sort(),L.sort(),!z(F,L))return!1;for(let E=0;E<F.length;E++){let T=F[E];if(!z(B[T],K[T]))return!1}return!0}return!1}function G(B){return B!==null&&typeof B==="object"}Z.isObjectLiteral=G})(u8||(u8={}));var l8;(function(Z){function J(Y,$){if(typeof Y==="string")return Y==="*"||$.notebookType===Y;if(Y.notebookType!==void 0&&Y.notebookType!=="*"&&$.notebookType!==Y.notebookType)return!1;let Q=$.uri;if(Y.scheme!==void 0&&Y.scheme!=="*"&&Q.scheme!==Y.scheme)return!1;if(Y.pattern!==void 0){let z=new mV.Minimatch(Y.pattern,{noext:!0});if(!z.makeRe())return!1;if(!z.match(Q.fsPath))return!1}return!0}Z.matchNotebook=J})(l8||(l8={}));var DY;(function(Z){function J($){let Q=$.notebookSelector,z=[];for(let G of Q){let B=(typeof G.notebook==="string"?G.notebook:G.notebook?.notebookType)??"*",K=typeof G.notebook==="string"?void 0:G.notebook?.scheme,A=typeof G.notebook==="string"?void 0:G.notebook?.pattern;if(G.cells!==void 0)for(let O of G.cells)z.push(Y(B,K,A,O.language));else z.push(Y(B,K,A,void 0))}return z}Z.asDocumentSelector=J;function Y($,Q,z,G){return Q===void 0&&z===void 0?{notebook:$,language:G}:{notebook:{notebookType:$,scheme:Q,pattern:z},language:G}}})(DY||(DY={}));var bY;(function(Z){function J(Y){return{cells:Y,uris:new Set(Y.map(($)=>$.document.uri.toString()))}}Z.create=J})(bY||(bY={}));class OJ{constructor(Z,J){this.client=Z,this.options=J,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=Z.protocol2CodeConverter.asDocumentSelector(DY.asDocumentSelector(J)),UZ.workspace.onDidOpenNotebookDocument((Y)=>{this.notebookDidOpen.add(Y.uri.toString()),this.didOpen(Y)},void 0,this.disposables);for(let Y of UZ.workspace.notebookDocuments)this.notebookDidOpen.add(Y.uri.toString()),this.didOpen(Y);if(UZ.workspace.onDidChangeNotebookDocument((Y)=>this.didChangeNotebookDocument(Y),void 0,this.disposables),this.options.save===!0)UZ.workspace.onDidSaveNotebookDocument((Y)=>this.didSave(Y),void 0,this.disposables);UZ.workspace.onDidCloseNotebookDocument((Y)=>{this.didClose(Y),this.notebookDidOpen.delete(Y.uri.toString())},void 0,this.disposables)}getState(){for(let Z of UZ.workspace.notebookDocuments)if(this.getMatchingCells(Z)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(Z){return UZ.languages.match(this.selector,Z)>0}didOpenNotebookCellTextDocument(Z,J){if(UZ.languages.match(this.selector,J.document)===0)return;if(!this.notebookDidOpen.has(Z.uri.toString()))return;let Y=this.notebookSyncInfo.get(Z.uri.toString()),$=this.cellMatches(Z,J);if(Y!==void 0){let Q=Y.uris.has(J.document.uri.toString());if($&&Q||!$&&!Q)return;if($){let z=this.getMatchingCells(Z);if(z!==void 0){let G=this.asNotebookDocumentChangeEvent(Z,void 0,Y,z);if(G!==void 0)this.doSendChange(G,z).catch(()=>{})}}}else if($)this.doSendOpen(Z,[J]).catch(()=>{})}didChangeNotebookCellTextDocument(Z,J){if(UZ.languages.match(this.selector,J.document)===0)return;this.doSendChange({notebook:Z,cells:{textContent:[J]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(Z,J){let Y=this.notebookSyncInfo.get(Z.uri.toString());if(Y===void 0)return;let $=J.document.uri,Q=Y.cells.findIndex((z)=>z.document.uri.toString()===$.toString());if(Q===-1)return;if(Q===0&&Y.cells.length===1)this.doSendClose(Z,Y.cells).catch(()=>{});else{let z=Y.cells.slice(),G=z.splice(Q,1);this.doSendChange({notebook:Z,cells:{structure:{array:{start:Q,deleteCount:1},didClose:G}}},z).catch(()=>{})}}dispose(){for(let Z of this.disposables)Z.dispose()}didOpen(Z,J=this.getMatchingCells(Z),Y=this.notebookSyncInfo.get(Z.uri.toString())){if(Y!==void 0)if(J!==void 0){let $=this.asNotebookDocumentChangeEvent(Z,void 0,Y,J);if($!==void 0)this.doSendChange($,J).catch(()=>{})}else this.doSendClose(Z,[]).catch(()=>{});else{if(J===void 0)return;this.doSendOpen(Z,J).catch(()=>{})}}didChangeNotebookDocument(Z){let J=Z.notebook,Y=this.notebookSyncInfo.get(J.uri.toString());if(Y===void 0){if(Z.contentChanges.length===0)return;let $=this.getMatchingCells(J);if($===void 0)return;this.didOpen(J,$,Y)}else{let $=this.getMatchingCells(J);if($===void 0){this.didClose(J,Y);return}let Q=this.asNotebookDocumentChangeEvent(Z.notebook,Z,Y,$);if(Q!==void 0)this.doSendChange(Q,$).catch(()=>{})}}didSave(Z){if(this.notebookSyncInfo.get(Z.uri.toString())===void 0)return;this.doSendSave(Z).catch(()=>{})}didClose(Z,J=this.notebookSyncInfo.get(Z.uri.toString())){if(J===void 0)return;let Y=Z.getCells().filter(($)=>J.uris.has($.document.uri.toString()));this.doSendClose(Z,Y).catch(()=>{})}async sendDidOpenNotebookDocument(Z){let J=this.getMatchingCells(Z);if(J===void 0)return;return this.doSendOpen(Z,J)}async doSendOpen(Z,J){let Y=async(Q,z)=>{let G=l6.c2p.asNotebookDocument(Q,z,this.client.code2ProtocolConverter),B=z.map((K)=>this.client.code2ProtocolConverter.asTextDocumentItem(K.document));try{await this.client.sendNotification(f9.DidOpenNotebookDocumentNotification.type,{notebookDocument:G,cellTextDocuments:B})}catch(K){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",K),K}},$=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(Z.uri.toString(),bY.create(J)),$?.didOpen!==void 0?$.didOpen(Z,J,Y):Y(Z,J)}async sendDidChangeNotebookDocument(Z){return this.doSendChange(Z,void 0)}async doSendChange(Z,J=this.getMatchingCells(Z.notebook)){let Y=async(Q)=>{try{await this.client.sendNotification(f9.DidChangeNotebookDocumentNotification.type,{notebookDocument:l6.c2p.asVersionedNotebookDocumentIdentifier(Q.notebook,this.client.code2ProtocolConverter),change:l6.c2p.asNotebookDocumentChangeEvent(Q,this.client.code2ProtocolConverter)})}catch(z){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",z),z}},$=this.client.middleware?.notebooks;if(Z.cells?.structure!==void 0)this.notebookSyncInfo.set(Z.notebook.uri.toString(),bY.create(J??[]));return $?.didChange!==void 0?$?.didChange(Z,Y):Y(Z)}async sendDidSaveNotebookDocument(Z){return this.doSendSave(Z)}async doSendSave(Z){let J=async($)=>{try{await this.client.sendNotification(f9.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri($.uri)}})}catch(Q){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",Q),Q}},Y=this.client.middleware?.notebooks;return Y?.didSave!==void 0?Y.didSave(Z,J):J(Z)}async sendDidCloseNotebookDocument(Z){return this.doSendClose(Z,this.getMatchingCells(Z)??[])}async doSendClose(Z,J){let Y=async(Q,z)=>{try{await this.client.sendNotification(f9.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(Q.uri)},cellTextDocuments:z.map((G)=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(G.document))})}catch(G){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",G),G}},$=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(Z.uri.toString()),$?.didClose!==void 0?$.didClose(Z,J,Y):Y(Z,J)}asNotebookDocumentChangeEvent(Z,J,Y,$){if(J!==void 0&&J.notebook!==Z)throw new Error("Notebook must be identical");let Q={notebook:Z};if(J?.metadata!==void 0)Q.metadata=l6.c2p.asMetadata(J.metadata);let z;if(J?.cellChanges!==void 0&&J.cellChanges.length>0){let G=[];z=new Set($.map((B)=>B.document.uri.toString()));for(let B of J.cellChanges)if(z.has(B.cell.document.uri.toString())&&(B.executionSummary!==void 0||B.metadata!==void 0))G.push(B.cell);if(G.length>0)Q.cells=Q.cells??{},Q.cells.data=G}if((J?.contentChanges!==void 0&&J.contentChanges.length>0||J===void 0)&&Y!==void 0&&$!==void 0){let G=Y.cells,B=$,K=u8.computeDiff(G,B,!1),A,O;if(K!==void 0){A=K.cells===void 0?new Map:new Map(K.cells.map((E)=>[E.document.uri.toString(),E])),O=K.deleteCount===0?new Map:new Map(G.slice(K.start,K.start+K.deleteCount).map((E)=>[E.document.uri.toString(),E]));for(let E of Array.from(O.keys()))if(A.has(E))O.delete(E),A.delete(E);Q.cells=Q.cells??{};let F=[],L=[];if(A.size>0||O.size>0){for(let E of A.values())F.push(E);for(let E of O.values())L.push(E)}Q.cells.structure={array:K,didOpen:F,didClose:L}}}return Object.keys(Q).length>1?Q:void 0}getMatchingCells(Z,J=Z.getCells()){if(this.options.notebookSelector===void 0)return;for(let Y of this.options.notebookSelector)if(Y.notebook===void 0||l8.matchNotebook(Y.notebook,Z)){let $=this.filterCells(Z,J,Y.cells);return $.length===0?void 0:$}return}cellMatches(Z,J){let Y=this.getMatchingCells(Z,[J]);return Y!==void 0&&Y[0]===J}filterCells(Z,J,Y){let $=Y!==void 0?J.filter((Q)=>{let z=Q.document.languageId;return Y.some((G)=>G.language==="*"||z===G.language)}):J;return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells==="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(Z,$):$}}class V6{constructor(Z){this.client=Z,this.registrations=new Map,this.registrationType=f9.NotebookDocumentSyncRegistrationType.type,UZ.workspace.onDidOpenTextDocument((J)=>{if(J.uri.scheme!==V6.CellScheme)return;let[Y,$]=this.findNotebookDocumentAndCell(J);if(Y===void 0||$===void 0)return;for(let Q of this.registrations.values())if(Q instanceof OJ)Q.didOpenNotebookCellTextDocument(Y,$)}),UZ.workspace.onDidChangeTextDocument((J)=>{if(J.contentChanges.length===0)return;let Y=J.document;if(Y.uri.scheme!==V6.CellScheme)return;let[$]=this.findNotebookDocumentAndCell(Y);if($===void 0)return;for(let Q of this.registrations.values())if(Q instanceof OJ)Q.didChangeNotebookCellTextDocument($,J)}),UZ.workspace.onDidCloseTextDocument((J)=>{if(J.uri.scheme!==V6.CellScheme)return;let[Y,$]=this.findNotebookDocumentAndCell(J);if(Y===void 0||$===void 0)return;for(let Q of this.registrations.values())if(Q instanceof OJ)Q.didCloseNotebookCellTextDocument(Y,$)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(let Z of this.registrations.values()){let J=Z.getState();if(J.kind==="document"&&J.registrations===!0&&J.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(Z){let J=T5(T5(Z,"notebookDocument"),"synchronization");J.dynamicRegistration=!0,J.executionSummarySupport=!0}preInitialize(Z){let J=Z.notebookDocumentSync;if(J===void 0)return;this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(DY.asDocumentSelector(J))}initialize(Z){let J=Z.notebookDocumentSync;if(J===void 0)return;let Y=J.id??pV.generateUuid();this.register({id:Y,registerOptions:J})}register(Z){let J=new OJ(this.client,Z.registerOptions);this.registrations.set(Z.id,J)}unregister(Z){let J=this.registrations.get(Z);J&&J.dispose()}clear(){for(let Z of this.registrations.values())Z.dispose();this.registrations.clear()}handles(Z){if(Z.uri.scheme!==V6.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&UZ.languages.match(this.dedicatedChannel,Z)>0)return!0;for(let J of this.registrations.values())if(J.handles(Z))return!0;return!1}getProvider(Z){for(let J of this.registrations.values())if(J.handles(Z.document))return J;return}findNotebookDocumentAndCell(Z){let J=Z.uri.toString();for(let Y of UZ.workspace.notebookDocuments)for(let $ of Y.getCells())if($.document.uri.toString()===J)return[Y,$];return[void 0,void 0]}}yY.NotebookDocumentSyncFeature=V6;V6.CellScheme="vscode-notebook-cell"});var b5=D((J6)=>{Object.defineProperty(J6,"__esModule",{value:!0});J6.SyncConfigurationFeature=J6.toJSONObject=J6.ConfigurationFeature=void 0;var c6=require("vscode"),NJ=Z0(),uV=aZ(),lV=g0(),C5=N0();class S5{constructor(Z){this._client=Z}getState(){return{kind:"static"}}fillClientCapabilities(Z){Z.workspace=Z.workspace||{},Z.workspace.configuration=!0}initialize(){let Z=this._client;Z.onRequest(NJ.ConfigurationRequest.type,(J,Y)=>{let $=(z)=>{let G=[];for(let B of z.items){let K=B.scopeUri!==void 0&&B.scopeUri!==null?this._client.protocol2CodeConverter.asUri(B.scopeUri):void 0;G.push(this.getConfiguration(K,B.section!==null?B.section:void 0))}return G},Q=Z.middleware.workspace;return Q&&Q.configuration?Q.configuration(J,Y,$):$(J,Y)})}getConfiguration(Z,J){let Y=null;if(J){let $=J.lastIndexOf(".");if($===-1)Y=W6(c6.workspace.getConfiguration(void 0,Z).get(J));else{let Q=c6.workspace.getConfiguration(J.substr(0,$),Z);if(Q)Y=W6(Q.get(J.substr($+1)))}}else{let $=c6.workspace.getConfiguration(void 0,Z);Y={};for(let Q of Object.keys($))if($.has(Q))Y[Q]=W6($.get(Q))}if(Y===void 0)Y=null;return Y}clear(){}}J6.ConfigurationFeature=S5;function W6(Z){if(Z){if(Array.isArray(Z))return Z.map(W6);else if(typeof Z==="object"){let J=Object.create(null);for(let Y in Z)if(Object.prototype.hasOwnProperty.call(Z,Y))J[Y]=W6(Z[Y]);return J}}return Z}J6.toJSONObject=W6;class D5{constructor(Z){this._client=Z,this.isCleared=!1,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return NJ.DidChangeConfigurationNotification.type}fillClientCapabilities(Z){C5.ensure(C5.ensure(Z,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){this.isCleared=!1;let Z=this._client.clientOptions.synchronize?.configurationSection;if(Z!==void 0)this.register({id:lV.generateUuid(),registerOptions:{section:Z}})}register(Z){let J=c6.workspace.onDidChangeConfiguration((Y)=>{this.onDidChangeConfiguration(Z.registerOptions.section,Y)});if(this._listeners.set(Z.id,J),Z.registerOptions.section!==void 0)this.onDidChangeConfiguration(Z.registerOptions.section,void 0)}unregister(Z){let J=this._listeners.get(Z);if(J)this._listeners.delete(Z),J.dispose()}clear(){for(let Z of this._listeners.values())Z.dispose();this._listeners.clear(),this.isCleared=!0}onDidChangeConfiguration(Z,J){if(this.isCleared)return;let Y;if(uV.string(Z))Y=[Z];else Y=Z;if(Y!==void 0&&J!==void 0){if(!Y.some((G)=>J.affectsConfiguration(G)))return}let $=async(z)=>{if(z===void 0)return this._client.sendNotification(NJ.DidChangeConfigurationNotification.type,{settings:null});else return this._client.sendNotification(NJ.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(z)})},Q=this._client.middleware.workspace?.didChangeConfiguration;(Q?Q(Y,$):$(Y)).catch((z)=>{this._client.error(`Sending notification ${NJ.DidChangeConfigurationNotification.type.method} failed`,z)})}extractSettingsInformation(Z){function J(Q,z){let G=Q;for(let B=0;B<z.length-1;B++){let K=G[z[B]];if(!K)K=Object.create(null),G[z[B]]=K;G=K}return G}let Y=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,$=Object.create(null);for(let Q=0;Q<Z.length;Q++){let z=Z[Q],G=z.indexOf("."),B=null;if(G>=0)B=c6.workspace.getConfiguration(z.substr(0,G),Y).get(z.substr(G+1));else B=c6.workspace.getConfiguration(void 0,Y).get(z);if(B){let K=Z[Q].split(".");J($,K)[K[K.length-1]]=W6(B)}}return $}}J6.SyncConfigurationFeature=D5});var k5=D((hZ)=>{Object.defineProperty(hZ,"__esModule",{value:!0});hZ.DidSaveTextDocumentFeature=hZ.WillSaveWaitUntilFeature=hZ.WillSaveFeature=hZ.DidChangeTextDocumentFeature=hZ.DidCloseTextDocumentFeature=hZ.DidOpenTextDocumentFeature=void 0;var pZ=require("vscode"),b0=Z0(),p0=N0(),i6=g0();class y5 extends p0.TextDocumentEventFeature{constructor(Z,J){super(Z,pZ.workspace.onDidOpenTextDocument,b0.DidOpenTextDocumentNotification.type,()=>Z.middleware.didOpen,(Y)=>Z.code2ProtocolConverter.asOpenTextDocumentParams(Y),(Y)=>Y,p0.TextDocumentEventFeature.textDocumentFilter);this._syncedDocuments=J}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(Z){p0.ensure(p0.ensure(Z,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(Z,J){let Y=Z.resolvedTextDocumentSync;if(J&&Y&&Y.openClose)this.register({id:i6.generateUuid(),registerOptions:{documentSelector:J}})}get registrationType(){return b0.DidOpenTextDocumentNotification.type}register(Z){if(super.register(Z),!Z.registerOptions.documentSelector)return;let J=this._client.protocol2CodeConverter.asDocumentSelector(Z.registerOptions.documentSelector);pZ.workspace.textDocuments.forEach((Y)=>{let $=Y.uri.toString();if(this._syncedDocuments.has($))return;if(pZ.languages.match(J,Y)>0&&!this._client.hasDedicatedTextSynchronizationFeature(Y)){let Q=this._client.middleware,z=(G)=>{return this._client.sendNotification(this._type,this._createParams(G))};(Q.didOpen?Q.didOpen(Y,z):z(Y)).catch((G)=>{this._client.error(`Sending document notification ${this._type.method} failed`,G)}),this._syncedDocuments.set($,Y)}})}getTextDocument(Z){return Z}notificationSent(Z,J,Y){this._syncedDocuments.set(Z.uri.toString(),Z),super.notificationSent(Z,J,Y)}}hZ.DidOpenTextDocumentFeature=y5;class R5 extends p0.TextDocumentEventFeature{constructor(Z,J,Y){super(Z,pZ.workspace.onDidCloseTextDocument,b0.DidCloseTextDocumentNotification.type,()=>Z.middleware.didClose,($)=>Z.code2ProtocolConverter.asCloseTextDocumentParams($),($)=>$,p0.TextDocumentEventFeature.textDocumentFilter);this._syncedDocuments=J,this._pendingTextDocumentChanges=Y}get registrationType(){return b0.DidCloseTextDocumentNotification.type}fillClientCapabilities(Z){p0.ensure(p0.ensure(Z,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(Z,J){let Y=Z.resolvedTextDocumentSync;if(J&&Y&&Y.openClose)this.register({id:i6.generateUuid(),registerOptions:{documentSelector:J}})}async callback(Z){await super.callback(Z),this._pendingTextDocumentChanges.delete(Z.uri.toString())}getTextDocument(Z){return Z}notificationSent(Z,J,Y){this._syncedDocuments.delete(Z.uri.toString()),super.notificationSent(Z,J,Y)}unregister(Z){let J=this._selectors.get(Z);super.unregister(Z);let Y=this._selectors.values();this._syncedDocuments.forEach(($)=>{if(pZ.languages.match(J,$)>0&&!this._selectorFilter(Y,$)&&!this._client.hasDedicatedTextSynchronizationFeature($)){let Q=this._client.middleware,z=(G)=>{return this._client.sendNotification(this._type,this._createParams(G))};this._syncedDocuments.delete($.uri.toString()),(Q.didClose?Q.didClose($,z):z($)).catch((G)=>{this._client.error(`Sending document notification ${this._type.method} failed`,G)})}})}}hZ.DidCloseTextDocumentFeature=R5;class h5 extends p0.DynamicDocumentFeature{constructor(Z,J){super(Z);this._changeData=new Map,this._onNotificationSent=new pZ.EventEmitter,this._onPendingChangeAdded=new pZ.EventEmitter,this._pendingTextDocumentChanges=J,this._syncKind=b0.TextDocumentSyncKind.None}get onNotificationSent(){return this._onNotificationSent.event}get onPendingChangeAdded(){return this._onPendingChangeAdded.event}get syncKind(){return this._syncKind}get registrationType(){return b0.DidChangeTextDocumentNotification.type}fillClientCapabilities(Z){p0.ensure(p0.ensure(Z,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(Z,J){let Y=Z.resolvedTextDocumentSync;if(J&&Y&&Y.change!==void 0&&Y.change!==b0.TextDocumentSyncKind.None)this.register({id:i6.generateUuid(),registerOptions:Object.assign({},{documentSelector:J},{syncKind:Y.change})})}register(Z){if(!Z.registerOptions.documentSelector)return;if(!this._listener)this._listener=pZ.workspace.onDidChangeTextDocument(this.callback,this);this._changeData.set(Z.id,{syncKind:Z.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(Z.registerOptions.documentSelector)}),this.updateSyncKind(Z.registerOptions.syncKind)}*getDocumentSelectors(){for(let Z of this._changeData.values())yield Z.documentSelector}async callback(Z){if(Z.contentChanges.length===0)return;let J=Z.document.uri,Y=Z.document.version,$=[];for(let Q of this._changeData.values())if(pZ.languages.match(Q.documentSelector,Z.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(Z.document)){let z=this._client.middleware;if(Q.syncKind===b0.TextDocumentSyncKind.Incremental){let G=async(B)=>{let K=this._client.code2ProtocolConverter.asChangeTextDocumentParams(B,J,Y);await this._client.sendNotification(b0.DidChangeTextDocumentNotification.type,K),this.notificationSent(B.document,b0.DidChangeTextDocumentNotification.type,K)};$.push(z.didChange?z.didChange(Z,(B)=>G(B)):G(Z))}else if(Q.syncKind===b0.TextDocumentSyncKind.Full){let G=async(B)=>{let K=B.document.uri.toString();this._pendingTextDocumentChanges.set(K,B.document),this._onPendingChangeAdded.fire()};$.push(z.didChange?z.didChange(Z,(B)=>G(B)):G(Z))}}return Promise.all($).then(void 0,(Q)=>{throw this._client.error(`Sending document notification ${b0.DidChangeTextDocumentNotification.type.method} failed`,Q),Q})}notificationSent(Z,J,Y){this._onNotificationSent.fire({textDocument:Z,type:J,params:Y})}unregister(Z){if(this._changeData.delete(Z),this._changeData.size===0){if(this._listener)this._listener.dispose(),this._listener=void 0;this._syncKind=b0.TextDocumentSyncKind.None}else{this._syncKind=b0.TextDocumentSyncKind.None;for(let J of this._changeData.values())if(this.updateSyncKind(J.syncKind),this._syncKind===b0.TextDocumentSyncKind.Full)break}}clear(){if(this._pendingTextDocumentChanges.clear(),this._changeData.clear(),this._syncKind=b0.TextDocumentSyncKind.None,this._listener)this._listener.dispose(),this._listener=void 0}getPendingDocumentChanges(Z){if(this._pendingTextDocumentChanges.size===0)return[];let J;if(Z.size===0)J=Array.from(this._pendingTextDocumentChanges.values()),this._pendingTextDocumentChanges.clear();else{J=[];for(let Y of this._pendingTextDocumentChanges)if(!Z.has(Y[0]))J.push(Y[1]),this._pendingTextDocumentChanges.delete(Y[0])}return J}getProvider(Z){for(let J of this._changeData.values())if(pZ.languages.match(J.documentSelector,Z)>0)return{send:(Y)=>{return this.callback(Y)}};return}updateSyncKind(Z){if(this._syncKind===b0.TextDocumentSyncKind.Full)return;switch(Z){case b0.TextDocumentSyncKind.Full:this._syncKind=Z;break;case b0.TextDocumentSyncKind.Incremental:if(this._syncKind===b0.TextDocumentSyncKind.None)this._syncKind=b0.TextDocumentSyncKind.Incremental;break}}}hZ.DidChangeTextDocumentFeature=h5;class x5 extends p0.TextDocumentEventFeature{constructor(Z){super(Z,pZ.workspace.onWillSaveTextDocument,b0.WillSaveTextDocumentNotification.type,()=>Z.middleware.willSave,(J)=>Z.code2ProtocolConverter.asWillSaveTextDocumentParams(J),(J)=>J.document,(J,Y)=>p0.TextDocumentEventFeature.textDocumentFilter(J,Y.document))}get registrationType(){return b0.WillSaveTextDocumentNotification.type}fillClientCapabilities(Z){let J=p0.ensure(p0.ensure(Z,"textDocument"),"synchronization");J.willSave=!0}initialize(Z,J){let Y=Z.resolvedTextDocumentSync;if(J&&Y&&Y.willSave)this.register({id:i6.generateUuid(),registerOptions:{documentSelector:J}})}getTextDocument(Z){return Z.document}}hZ.WillSaveFeature=x5;class f5 extends p0.DynamicDocumentFeature{constructor(Z){super(Z);this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return b0.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(Z){let J=p0.ensure(p0.ensure(Z,"textDocument"),"synchronization");J.willSaveWaitUntil=!0}initialize(Z,J){let Y=Z.resolvedTextDocumentSync;if(J&&Y&&Y.willSaveWaitUntil)this.register({id:i6.generateUuid(),registerOptions:{documentSelector:J}})}register(Z){if(!Z.registerOptions.documentSelector)return;if(!this._listener)this._listener=pZ.workspace.onWillSaveTextDocument(this.callback,this);this._selectors.set(Z.id,this._client.protocol2CodeConverter.asDocumentSelector(Z.registerOptions.documentSelector))}callback(Z){if(p0.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),Z.document)&&!this._client.hasDedicatedTextSynchronizationFeature(Z.document)){let J=this._client.middleware,Y=($)=>{return this._client.sendRequest(b0.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams($)).then(async(Q)=>{let z=await this._client.protocol2CodeConverter.asTextEdits(Q);return z===void 0?[]:z})};Z.waitUntil(J.willSaveWaitUntil?J.willSaveWaitUntil(Z,Y):Y(Z))}}unregister(Z){if(this._selectors.delete(Z),this._selectors.size===0&&this._listener)this._listener.dispose(),this._listener=void 0}clear(){if(this._selectors.clear(),this._listener)this._listener.dispose(),this._listener=void 0}}hZ.WillSaveWaitUntilFeature=f5;class _5 extends p0.TextDocumentEventFeature{constructor(Z){super(Z,pZ.workspace.onDidSaveTextDocument,b0.DidSaveTextDocumentNotification.type,()=>Z.middleware.didSave,(J)=>Z.code2ProtocolConverter.asSaveTextDocumentParams(J,this._includeText),(J)=>J,p0.TextDocumentEventFeature.textDocumentFilter);this._includeText=!1}get registrationType(){return b0.DidSaveTextDocumentNotification.type}fillClientCapabilities(Z){p0.ensure(p0.ensure(Z,"textDocument"),"synchronization").didSave=!0}initialize(Z,J){let Y=Z.resolvedTextDocumentSync;if(J&&Y&&Y.save){let $=typeof Y.save==="boolean"?{includeText:!1}:{includeText:!!Y.save.includeText};this.register({id:i6.generateUuid(),registerOptions:Object.assign({},{documentSelector:J},$)})}}register(Z){this._includeText=!!Z.registerOptions.includeText,super.register(Z)}getTextDocument(Z){return Z}}hZ.DidSaveTextDocumentFeature=_5});var g5=D((RY)=>{Object.defineProperty(RY,"__esModule",{value:!0});RY.CompletionItemFeature=void 0;var cV=require("vscode"),A0=Z0(),c8=N0(),iV=g0(),nV=[A0.CompletionItemKind.Text,A0.CompletionItemKind.Method,A0.CompletionItemKind.Function,A0.CompletionItemKind.Constructor,A0.CompletionItemKind.Field,A0.CompletionItemKind.Variable,A0.CompletionItemKind.Class,A0.CompletionItemKind.Interface,A0.CompletionItemKind.Module,A0.CompletionItemKind.Property,A0.CompletionItemKind.Unit,A0.CompletionItemKind.Value,A0.CompletionItemKind.Enum,A0.CompletionItemKind.Keyword,A0.CompletionItemKind.Snippet,A0.CompletionItemKind.Color,A0.CompletionItemKind.File,A0.CompletionItemKind.Reference,A0.CompletionItemKind.Folder,A0.CompletionItemKind.EnumMember,A0.CompletionItemKind.Constant,A0.CompletionItemKind.Struct,A0.CompletionItemKind.Event,A0.CompletionItemKind.Operator,A0.CompletionItemKind.TypeParameter];class v5 extends c8.TextDocumentLanguageFeature{constructor(Z){super(Z,A0.CompletionRequest.type);this.labelDetailsSupport=new Map}fillClientCapabilities(Z){let J=c8.ensure(c8.ensure(Z,"textDocument"),"completion");J.dynamicRegistration=!0,J.contextSupport=!0,J.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[A0.MarkupKind.Markdown,A0.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[A0.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[A0.InsertTextMode.asIs,A0.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},J.insertTextMode=A0.InsertTextMode.adjustIndentation,J.completionItemKind={valueSet:nV},J.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode","data"]}}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.completionProvider);if(!Y)return;this.register({id:iV.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z,J){this.labelDetailsSupport.set(J,!!Z.completionItem?.labelDetailsSupport);let Y=Z.triggerCharacters??[],$=Z.allCommitCharacters,Q=Z.documentSelector,z={provideCompletionItems:(G,B,K,A)=>{let O=this._client,F=this._client.middleware,L=(E,T,C,x)=>{return O.sendRequest(A0.CompletionRequest.type,O.code2ProtocolConverter.asCompletionParams(E,T,C),x).then((f)=>{if(x.isCancellationRequested)return null;return O.protocol2CodeConverter.asCompletionResult(f,$,x)},(f)=>{return O.handleFailedRequest(A0.CompletionRequest.type,x,f,null)})};return F.provideCompletionItem?F.provideCompletionItem(G,B,A,K,L):L(G,B,A,K)},resolveCompletionItem:Z.resolveProvider?(G,B)=>{let K=this._client,A=this._client.middleware,O=(F,L)=>{return K.sendRequest(A0.CompletionResolveRequest.type,K.code2ProtocolConverter.asCompletionItem(F,!!this.labelDetailsSupport.get(J)),L).then((E)=>{if(L.isCancellationRequested)return null;return K.protocol2CodeConverter.asCompletionItem(E)},(E)=>{return K.handleFailedRequest(A0.CompletionResolveRequest.type,L,E,F)})};return A.resolveCompletionItem?A.resolveCompletionItem(G,B,O):O(G,B)}:void 0};return[cV.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(Q),z,...Y),z]}}RY.CompletionItemFeature=v5});var m5=D((hY)=>{Object.defineProperty(hY,"__esModule",{value:!0});hY.HoverFeature=void 0;var aV=require("vscode"),EJ=Z0(),i8=N0(),sV=g0();class d5 extends i8.TextDocumentLanguageFeature{constructor(Z){super(Z,EJ.HoverRequest.type)}fillClientCapabilities(Z){let J=i8.ensure(i8.ensure(Z,"textDocument"),"hover");J.dynamicRegistration=!0,J.contentFormat=[EJ.MarkupKind.Markdown,EJ.MarkupKind.PlainText]}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.hoverProvider);if(!Y)return;this.register({id:sV.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideHover:($,Q,z)=>{let G=this._client,B=(A,O,F)=>{return G.sendRequest(EJ.HoverRequest.type,G.code2ProtocolConverter.asTextDocumentPositionParams(A,O),F).then((L)=>{if(F.isCancellationRequested)return null;return G.protocol2CodeConverter.asHover(L)},(L)=>{return G.handleFailedRequest(EJ.HoverRequest.type,F,L,null)})},K=G.middleware;return K.provideHover?K.provideHover($,Q,z,B):B($,Q,z)}};return[this.registerProvider(J,Y),Y]}registerProvider(Z,J){return aV.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}}hY.HoverFeature=d5});var u5=D((xY)=>{Object.defineProperty(xY,"__esModule",{value:!0});xY.DefinitionFeature=void 0;var rV=require("vscode"),n8=Z0(),a8=N0(),oV=g0();class p5 extends a8.TextDocumentLanguageFeature{constructor(Z){super(Z,n8.DefinitionRequest.type)}fillClientCapabilities(Z){let J=a8.ensure(a8.ensure(Z,"textDocument"),"definition");J.dynamicRegistration=!0,J.linkSupport=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.definitionProvider);if(!Y)return;this.register({id:oV.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideDefinition:($,Q,z)=>{let G=this._client,B=(A,O,F)=>{return G.sendRequest(n8.DefinitionRequest.type,G.code2ProtocolConverter.asTextDocumentPositionParams(A,O),F).then((L)=>{if(F.isCancellationRequested)return null;return G.protocol2CodeConverter.asDefinitionResult(L,F)},(L)=>{return G.handleFailedRequest(n8.DefinitionRequest.type,F,L,null)})},K=G.middleware;return K.provideDefinition?K.provideDefinition($,Q,z,B):B($,Q,z)}};return[this.registerProvider(J,Y),Y]}registerProvider(Z,J){return rV.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}}xY.DefinitionFeature=p5});var i5=D((fY)=>{Object.defineProperty(fY,"__esModule",{value:!0});fY.SignatureHelpFeature=void 0;var l5=require("vscode"),LJ=Z0(),s8=N0(),tV=g0();class c5 extends s8.TextDocumentLanguageFeature{constructor(Z){super(Z,LJ.SignatureHelpRequest.type)}fillClientCapabilities(Z){let J=s8.ensure(s8.ensure(Z,"textDocument"),"signatureHelp");J.dynamicRegistration=!0,J.signatureInformation={documentationFormat:[LJ.MarkupKind.Markdown,LJ.MarkupKind.PlainText]},J.signatureInformation.parameterInformation={labelOffsetSupport:!0},J.signatureInformation.activeParameterSupport=!0,J.contextSupport=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.signatureHelpProvider);if(!Y)return;this.register({id:tV.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J={provideSignatureHelp:(Y,$,Q,z)=>{let G=this._client,B=(A,O,F,L)=>{return G.sendRequest(LJ.SignatureHelpRequest.type,G.code2ProtocolConverter.asSignatureHelpParams(A,O,F),L).then((E)=>{if(L.isCancellationRequested)return null;return G.protocol2CodeConverter.asSignatureHelp(E,L)},(E)=>{return G.handleFailedRequest(LJ.SignatureHelpRequest.type,L,E,null)})},K=G.middleware;return K.provideSignatureHelp?K.provideSignatureHelp(Y,$,z,Q,B):B(Y,$,z,Q)}};return[this.registerProvider(Z,J),J]}registerProvider(Z,J){let Y=this._client.protocol2CodeConverter.asDocumentSelector(Z.documentSelector);if(Z.retriggerCharacters===void 0){let $=Z.triggerCharacters||[];return l5.languages.registerSignatureHelpProvider(Y,J,...$)}else{let $={triggerCharacters:Z.triggerCharacters||[],retriggerCharacters:Z.retriggerCharacters||[]};return l5.languages.registerSignatureHelpProvider(Y,J,$)}}}fY.SignatureHelpFeature=c5});var a5=D((_Y)=>{Object.defineProperty(_Y,"__esModule",{value:!0});_Y.DocumentHighlightFeature=void 0;var eV=require("vscode"),r8=Z0(),o8=N0(),ZW=g0();class n5 extends o8.TextDocumentLanguageFeature{constructor(Z){super(Z,r8.DocumentHighlightRequest.type)}fillClientCapabilities(Z){o8.ensure(o8.ensure(Z,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.documentHighlightProvider);if(!Y)return;this.register({id:ZW.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideDocumentHighlights:($,Q,z)=>{let G=this._client,B=(A,O,F)=>{return G.sendRequest(r8.DocumentHighlightRequest.type,G.code2ProtocolConverter.asTextDocumentPositionParams(A,O),F).then((L)=>{if(F.isCancellationRequested)return null;return G.protocol2CodeConverter.asDocumentHighlights(L,F)},(L)=>{return G.handleFailedRequest(r8.DocumentHighlightRequest.type,F,L,null)})},K=G.middleware;return K.provideDocumentHighlights?K.provideDocumentHighlights($,Q,z,B):B($,Q,z)}};return[eV.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),Y),Y]}}_Y.DocumentHighlightFeature=n5});var e8=D((T9)=>{Object.defineProperty(T9,"__esModule",{value:!0});T9.DocumentSymbolFeature=T9.SupportedSymbolTags=T9.SupportedSymbolKinds=void 0;var JW=require("vscode"),P0=Z0(),t8=N0(),YW=g0();T9.SupportedSymbolKinds=[P0.SymbolKind.File,P0.SymbolKind.Module,P0.SymbolKind.Namespace,P0.SymbolKind.Package,P0.SymbolKind.Class,P0.SymbolKind.Method,P0.SymbolKind.Property,P0.SymbolKind.Field,P0.SymbolKind.Constructor,P0.SymbolKind.Enum,P0.SymbolKind.Interface,P0.SymbolKind.Function,P0.SymbolKind.Variable,P0.SymbolKind.Constant,P0.SymbolKind.String,P0.SymbolKind.Number,P0.SymbolKind.Boolean,P0.SymbolKind.Array,P0.SymbolKind.Object,P0.SymbolKind.Key,P0.SymbolKind.Null,P0.SymbolKind.EnumMember,P0.SymbolKind.Struct,P0.SymbolKind.Event,P0.SymbolKind.Operator,P0.SymbolKind.TypeParameter];T9.SupportedSymbolTags=[P0.SymbolTag.Deprecated];class s5 extends t8.TextDocumentLanguageFeature{constructor(Z){super(Z,P0.DocumentSymbolRequest.type)}fillClientCapabilities(Z){let J=t8.ensure(t8.ensure(Z,"textDocument"),"documentSymbol");J.dynamicRegistration=!0,J.symbolKind={valueSet:T9.SupportedSymbolKinds},J.hierarchicalDocumentSymbolSupport=!0,J.tagSupport={valueSet:T9.SupportedSymbolTags},J.labelSupport=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.documentSymbolProvider);if(!Y)return;this.register({id:YW.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideDocumentSymbols:(Q,z)=>{let G=this._client,B=async(A,O)=>{try{let F=await G.sendRequest(P0.DocumentSymbolRequest.type,G.code2ProtocolConverter.asDocumentSymbolParams(A),O);if(O.isCancellationRequested||F===void 0||F===null)return null;if(F.length===0)return[];else{let L=F[0];if(P0.DocumentSymbol.is(L))return await G.protocol2CodeConverter.asDocumentSymbols(F,O);else return await G.protocol2CodeConverter.asSymbolInformations(F,O)}}catch(F){return G.handleFailedRequest(P0.DocumentSymbolRequest.type,O,F,null)}},K=G.middleware;return K.provideDocumentSymbols?K.provideDocumentSymbols(Q,z,B):B(Q,z)}},$=Z.label!==void 0?{label:Z.label}:void 0;return[JW.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),Y,$),Y]}}T9.DocumentSymbolFeature=s5});var t5=D((kY)=>{Object.defineProperty(kY,"__esModule",{value:!0});kY.WorkspaceSymbolFeature=void 0;var $W=require("vscode"),UJ=Z0(),Z$=N0(),r5=e8(),QW=g0();class o5 extends Z$.WorkspaceFeature{constructor(Z){super(Z,UJ.WorkspaceSymbolRequest.type)}fillClientCapabilities(Z){let J=Z$.ensure(Z$.ensure(Z,"workspace"),"symbol");J.dynamicRegistration=!0,J.symbolKind={valueSet:r5.SupportedSymbolKinds},J.tagSupport={valueSet:r5.SupportedSymbolTags},J.resolveSupport={properties:["location.range"]}}initialize(Z){if(!Z.workspaceSymbolProvider)return;this.register({id:QW.generateUuid(),registerOptions:Z.workspaceSymbolProvider===!0?{workDoneProgress:!1}:Z.workspaceSymbolProvider})}registerLanguageProvider(Z){let J={provideWorkspaceSymbols:(Y,$)=>{let Q=this._client,z=(B,K)=>{return Q.sendRequest(UJ.WorkspaceSymbolRequest.type,{query:B},K).then((A)=>{if(K.isCancellationRequested)return null;return Q.protocol2CodeConverter.asSymbolInformations(A,K)},(A)=>{return Q.handleFailedRequest(UJ.WorkspaceSymbolRequest.type,K,A,null)})},G=Q.middleware;return G.provideWorkspaceSymbols?G.provideWorkspaceSymbols(Y,$,z):z(Y,$)},resolveWorkspaceSymbol:Z.resolveProvider===!0?(Y,$)=>{let Q=this._client,z=(B,K)=>{return Q.sendRequest(UJ.WorkspaceSymbolResolveRequest.type,Q.code2ProtocolConverter.asWorkspaceSymbol(B),K).then((A)=>{if(K.isCancellationRequested)return null;return Q.protocol2CodeConverter.asSymbolInformation(A)},(A)=>{return Q.handleFailedRequest(UJ.WorkspaceSymbolResolveRequest.type,K,A,null)})},G=Q.middleware;return G.resolveWorkspaceSymbol?G.resolveWorkspaceSymbol(Y,$,z):z(Y,$)}:void 0};return[$W.languages.registerWorkspaceSymbolProvider(J),J]}}kY.WorkspaceSymbolFeature=o5});var ZB=D((vY)=>{Object.defineProperty(vY,"__esModule",{value:!0});vY.ReferencesFeature=void 0;var zW=require("vscode"),J$=Z0(),Y$=N0(),GW=g0();class e5 extends Y$.TextDocumentLanguageFeature{constructor(Z){super(Z,J$.ReferencesRequest.type)}fillClientCapabilities(Z){Y$.ensure(Y$.ensure(Z,"textDocument"),"references").dynamicRegistration=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.referencesProvider);if(!Y)return;this.register({id:GW.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideReferences:($,Q,z,G)=>{let B=this._client,K=(O,F,L,E)=>{return B.sendRequest(J$.ReferencesRequest.type,B.code2ProtocolConverter.asReferenceParams(O,F,L),E).then((T)=>{if(E.isCancellationRequested)return null;return B.protocol2CodeConverter.asReferences(T,E)},(T)=>{return B.handleFailedRequest(J$.ReferencesRequest.type,E,T,null)})},A=B.middleware;return A.provideReferences?A.provideReferences($,Q,z,G,K):K($,Q,z,G)}};return[this.registerProvider(J,Y),Y]}registerProvider(Z,J){return zW.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}}vY.ReferencesFeature=e5});var YB=D((gY)=>{Object.defineProperty(gY,"__esModule",{value:!0});gY.CodeActionFeature=void 0;var XW=require("vscode"),uZ=Z0(),BW=g0(),$$=N0();class JB extends $$.TextDocumentLanguageFeature{constructor(Z){super(Z,uZ.CodeActionRequest.type)}fillClientCapabilities(Z){let J=$$.ensure($$.ensure(Z,"textDocument"),"codeAction");J.dynamicRegistration=!0,J.isPreferredSupport=!0,J.disabledSupport=!0,J.dataSupport=!0,J.resolveSupport={properties:["edit"]},J.codeActionLiteralSupport={codeActionKind:{valueSet:[uZ.CodeActionKind.Empty,uZ.CodeActionKind.QuickFix,uZ.CodeActionKind.Refactor,uZ.CodeActionKind.RefactorExtract,uZ.CodeActionKind.RefactorInline,uZ.CodeActionKind.RefactorRewrite,uZ.CodeActionKind.Source,uZ.CodeActionKind.SourceOrganizeImports]}},J.honorsChangeAnnotations=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.codeActionProvider);if(!Y)return;this.register({id:BW.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideCodeActions:($,Q,z,G)=>{let B=this._client,K=async(O,F,L,E)=>{let T={textDocument:B.code2ProtocolConverter.asTextDocumentIdentifier(O),range:B.code2ProtocolConverter.asRange(F),context:B.code2ProtocolConverter.asCodeActionContextSync(L)};return B.sendRequest(uZ.CodeActionRequest.type,T,E).then((C)=>{if(E.isCancellationRequested||C===null||C===void 0)return null;return B.protocol2CodeConverter.asCodeActionResult(C,E)},(C)=>{return B.handleFailedRequest(uZ.CodeActionRequest.type,E,C,null)})},A=B.middleware;return A.provideCodeActions?A.provideCodeActions($,Q,z,G,K):K($,Q,z,G)},resolveCodeAction:Z.resolveProvider?($,Q)=>{let z=this._client,G=this._client.middleware,B=async(K,A)=>{return z.sendRequest(uZ.CodeActionResolveRequest.type,z.code2ProtocolConverter.asCodeActionSync(K),A).then((O)=>{if(A.isCancellationRequested)return K;return z.protocol2CodeConverter.asCodeAction(O,A)},(O)=>{return z.handleFailedRequest(uZ.CodeActionResolveRequest.type,A,O,K)})};return G.resolveCodeAction?G.resolveCodeAction($,Q,B):B($,Q)}:void 0};return[XW.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),Y,Z.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(Z.codeActionKinds)}:void 0),Y]}}gY.CodeActionFeature=JB});var zB=D((dY)=>{Object.defineProperty(dY,"__esModule",{value:!0});dY.CodeLensFeature=void 0;var $B=require("vscode"),n6=Z0(),jW=g0(),wJ=N0();class QB extends wJ.TextDocumentLanguageFeature{constructor(Z){super(Z,n6.CodeLensRequest.type)}fillClientCapabilities(Z){wJ.ensure(wJ.ensure(Z,"textDocument"),"codeLens").dynamicRegistration=!0,wJ.ensure(wJ.ensure(Z,"workspace"),"codeLens").refreshSupport=!0}initialize(Z,J){this._client.onRequest(n6.CodeLensRefreshRequest.type,async()=>{for(let Q of this.getAllProviders())Q.onDidChangeCodeLensEmitter.fire()});let $=this.getRegistrationOptions(J,Z.codeLensProvider);if(!$)return;this.register({id:jW.generateUuid(),registerOptions:$})}registerLanguageProvider(Z){let J=Z.documentSelector,Y=new $B.EventEmitter,$={onDidChangeCodeLenses:Y.event,provideCodeLenses:(Q,z)=>{let G=this._client,B=(A,O)=>{return G.sendRequest(n6.CodeLensRequest.type,G.code2ProtocolConverter.asCodeLensParams(A),O).then((F)=>{if(O.isCancellationRequested)return null;return G.protocol2CodeConverter.asCodeLenses(F,O)},(F)=>{return G.handleFailedRequest(n6.CodeLensRequest.type,O,F,null)})},K=G.middleware;return K.provideCodeLenses?K.provideCodeLenses(Q,z,B):B(Q,z)},resolveCodeLens:Z.resolveProvider?(Q,z)=>{let G=this._client,B=(A,O)=>{return G.sendRequest(n6.CodeLensResolveRequest.type,G.code2ProtocolConverter.asCodeLens(A),O).then((F)=>{if(O.isCancellationRequested)return A;return G.protocol2CodeConverter.asCodeLens(F)},(F)=>{return G.handleFailedRequest(n6.CodeLensResolveRequest.type,O,F,A)})},K=G.middleware;return K.resolveCodeLens?K.resolveCodeLens(Q,z,B):B(Q,z)}:void 0};return[$B.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),$),{provider:$,onDidChangeCodeLensEmitter:Y}]}}dY.CodeLensFeature=QB});var jB=D((Y6)=>{Object.defineProperty(Y6,"__esModule",{value:!0});Y6.DocumentOnTypeFormattingFeature=Y6.DocumentRangeFormattingFeature=Y6.DocumentFormattingFeature=void 0;var mY=require("vscode"),j9=Z0(),Q$=g0(),_9=N0(),a6;(function(Z){function J(Y){let $=mY.workspace.getConfiguration("files",Y);return{trimTrailingWhitespace:$.get("trimTrailingWhitespace"),trimFinalNewlines:$.get("trimFinalNewlines"),insertFinalNewline:$.get("insertFinalNewline")}}Z.fromConfiguration=J})(a6||(a6={}));class GB extends _9.TextDocumentLanguageFeature{constructor(Z){super(Z,j9.DocumentFormattingRequest.type)}fillClientCapabilities(Z){_9.ensure(_9.ensure(Z,"textDocument"),"formatting").dynamicRegistration=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.documentFormattingProvider);if(!Y)return;this.register({id:Q$.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideDocumentFormattingEdits:($,Q,z)=>{let G=this._client,B=(A,O,F)=>{let L={textDocument:G.code2ProtocolConverter.asTextDocumentIdentifier(A),options:G.code2ProtocolConverter.asFormattingOptions(O,a6.fromConfiguration(A))};return G.sendRequest(j9.DocumentFormattingRequest.type,L,F).then((E)=>{if(F.isCancellationRequested)return null;return G.protocol2CodeConverter.asTextEdits(E,F)},(E)=>{return G.handleFailedRequest(j9.DocumentFormattingRequest.type,F,E,null)})},K=G.middleware;return K.provideDocumentFormattingEdits?K.provideDocumentFormattingEdits($,Q,z,B):B($,Q,z)}};return[mY.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),Y),Y]}}Y6.DocumentFormattingFeature=GB;class XB extends _9.TextDocumentLanguageFeature{constructor(Z){super(Z,j9.DocumentRangeFormattingRequest.type)}fillClientCapabilities(Z){let J=_9.ensure(_9.ensure(Z,"textDocument"),"rangeFormatting");J.dynamicRegistration=!0,J.rangesSupport=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.documentRangeFormattingProvider);if(!Y)return;this.register({id:Q$.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideDocumentRangeFormattingEdits:($,Q,z,G)=>{let B=this._client,K=(O,F,L,E)=>{let T={textDocument:B.code2ProtocolConverter.asTextDocumentIdentifier(O),range:B.code2ProtocolConverter.asRange(F),options:B.code2ProtocolConverter.asFormattingOptions(L,a6.fromConfiguration(O))};return B.sendRequest(j9.DocumentRangeFormattingRequest.type,T,E).then((C)=>{if(E.isCancellationRequested)return null;return B.protocol2CodeConverter.asTextEdits(C,E)},(C)=>{return B.handleFailedRequest(j9.DocumentRangeFormattingRequest.type,E,C,null)})},A=B.middleware;return A.provideDocumentRangeFormattingEdits?A.provideDocumentRangeFormattingEdits($,Q,z,G,K):K($,Q,z,G)}};if(Z.rangesSupport)Y.provideDocumentRangesFormattingEdits=($,Q,z,G)=>{let B=this._client,K=(O,F,L,E)=>{let T={textDocument:B.code2ProtocolConverter.asTextDocumentIdentifier(O),ranges:B.code2ProtocolConverter.asRanges(F),options:B.code2ProtocolConverter.asFormattingOptions(L,a6.fromConfiguration(O))};return B.sendRequest(j9.DocumentRangesFormattingRequest.type,T,E).then((C)=>{if(E.isCancellationRequested)return null;return B.protocol2CodeConverter.asTextEdits(C,E)},(C)=>{return B.handleFailedRequest(j9.DocumentRangesFormattingRequest.type,E,C,null)})},A=B.middleware;return A.provideDocumentRangesFormattingEdits?A.provideDocumentRangesFormattingEdits($,Q,z,G,K):K($,Q,z,G)};return[mY.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),Y),Y]}}Y6.DocumentRangeFormattingFeature=XB;class BB extends _9.TextDocumentLanguageFeature{constructor(Z){super(Z,j9.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(Z){_9.ensure(_9.ensure(Z,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.documentOnTypeFormattingProvider);if(!Y)return;this.register({id:Q$.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideOnTypeFormattingEdits:(Q,z,G,B,K)=>{let A=this._client,O=(L,E,T,C,x)=>{let f={textDocument:A.code2ProtocolConverter.asTextDocumentIdentifier(L),position:A.code2ProtocolConverter.asPosition(E),ch:T,options:A.code2ProtocolConverter.asFormattingOptions(C,a6.fromConfiguration(L))};return A.sendRequest(j9.DocumentOnTypeFormattingRequest.type,f,x).then((d)=>{if(x.isCancellationRequested)return null;return A.protocol2CodeConverter.asTextEdits(d,x)},(d)=>{return A.handleFailedRequest(j9.DocumentOnTypeFormattingRequest.type,x,d,null)})},F=A.middleware;return F.provideOnTypeFormattingEdits?F.provideOnTypeFormattingEdits(Q,z,G,B,K,O):O(Q,z,G,B,K)}},$=Z.moreTriggerCharacter||[];return[mY.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),Y,Z.firstTriggerCharacter,...$),Y]}}Y6.DocumentOnTypeFormattingFeature=BB});var WB=D((pY)=>{Object.defineProperty(pY,"__esModule",{value:!0});pY.RenameFeature=void 0;var KW=require("vscode"),A6=Z0(),VW=g0(),KB=aZ(),z$=N0();class VB extends z$.TextDocumentLanguageFeature{constructor(Z){super(Z,A6.RenameRequest.type)}fillClientCapabilities(Z){let J=z$.ensure(z$.ensure(Z,"textDocument"),"rename");J.dynamicRegistration=!0,J.prepareSupport=!0,J.prepareSupportDefaultBehavior=A6.PrepareSupportDefaultBehavior.Identifier,J.honorsChangeAnnotations=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.renameProvider);if(!Y)return;if(KB.boolean(Z.renameProvider))Y.prepareProvider=!1;this.register({id:VW.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideRenameEdits:($,Q,z,G)=>{let B=this._client,K=(O,F,L,E)=>{let T={textDocument:B.code2ProtocolConverter.asTextDocumentIdentifier(O),position:B.code2ProtocolConverter.asPosition(F),newName:L};return B.sendRequest(A6.RenameRequest.type,T,E).then((C)=>{if(E.isCancellationRequested)return null;return B.protocol2CodeConverter.asWorkspaceEdit(C,E)},(C)=>{return B.handleFailedRequest(A6.RenameRequest.type,E,C,null,!1)})},A=B.middleware;return A.provideRenameEdits?A.provideRenameEdits($,Q,z,G,K):K($,Q,z,G)},prepareRename:Z.prepareProvider?($,Q,z)=>{let G=this._client,B=(A,O,F)=>{let L={textDocument:G.code2ProtocolConverter.asTextDocumentIdentifier(A),position:G.code2ProtocolConverter.asPosition(O)};return G.sendRequest(A6.PrepareRenameRequest.type,L,F).then((E)=>{if(F.isCancellationRequested)return null;if(A6.Range.is(E))return G.protocol2CodeConverter.asRange(E);else if(this.isDefaultBehavior(E))return E.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed."));else if(E&&A6.Range.is(E.range))return{range:G.protocol2CodeConverter.asRange(E.range),placeholder:E.placeholder};return Promise.reject(new Error("The element can't be renamed."))},(E)=>{if(typeof E.message==="string")throw new Error(E.message);else throw new Error("The element can't be renamed.")})},K=G.middleware;return K.prepareRename?K.prepareRename($,Q,z,B):B($,Q,z)}:void 0};return[this.registerProvider(J,Y),Y]}registerProvider(Z,J){return KW.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}isDefaultBehavior(Z){let J=Z;return J&&KB.boolean(J.defaultBehavior)}}pY.RenameFeature=VB});var HB=D((uY)=>{Object.defineProperty(uY,"__esModule",{value:!0});uY.DocumentLinkFeature=void 0;var WW=require("vscode"),FJ=Z0(),G$=N0(),AW=g0();class AB extends G$.TextDocumentLanguageFeature{constructor(Z){super(Z,FJ.DocumentLinkRequest.type)}fillClientCapabilities(Z){let J=G$.ensure(G$.ensure(Z,"textDocument"),"documentLink");J.dynamicRegistration=!0,J.tooltipSupport=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.documentLinkProvider);if(!Y)return;this.register({id:AW.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideDocumentLinks:($,Q)=>{let z=this._client,G=(K,A)=>{return z.sendRequest(FJ.DocumentLinkRequest.type,z.code2ProtocolConverter.asDocumentLinkParams(K),A).then((O)=>{if(A.isCancellationRequested)return null;return z.protocol2CodeConverter.asDocumentLinks(O,A)},(O)=>{return z.handleFailedRequest(FJ.DocumentLinkRequest.type,A,O,null)})},B=z.middleware;return B.provideDocumentLinks?B.provideDocumentLinks($,Q,G):G($,Q)},resolveDocumentLink:Z.resolveProvider?($,Q)=>{let z=this._client,G=(K,A)=>{return z.sendRequest(FJ.DocumentLinkResolveRequest.type,z.code2ProtocolConverter.asDocumentLink(K),A).then((O)=>{if(A.isCancellationRequested)return K;return z.protocol2CodeConverter.asDocumentLink(O)},(O)=>{return z.handleFailedRequest(FJ.DocumentLinkResolveRequest.type,A,O,K)})},B=z.middleware;return B.resolveDocumentLink?B.resolveDocumentLink($,Q,G):G($,Q)}:void 0};return[WW.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),Y),Y]}}uY.DocumentLinkFeature=AB});var EB=D((lY)=>{Object.defineProperty(lY,"__esModule",{value:!0});lY.ExecuteCommandFeature=void 0;var HW=require("vscode"),X$=Z0(),OW=g0(),OB=N0();class NB{constructor(Z){this._client=Z,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return X$.ExecuteCommandRequest.type}fillClientCapabilities(Z){OB.ensure(OB.ensure(Z,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(Z){if(!Z.executeCommandProvider)return;this.register({id:OW.generateUuid(),registerOptions:Object.assign({},Z.executeCommandProvider)})}register(Z){let J=this._client,Y=J.middleware,$=(Q,z)=>{let G={command:Q,arguments:z};return J.sendRequest(X$.ExecuteCommandRequest.type,G).then(void 0,(B)=>{return J.handleFailedRequest(X$.ExecuteCommandRequest.type,void 0,B,void 0)})};if(Z.registerOptions.commands){let Q=[];for(let z of Z.registerOptions.commands)Q.push(HW.commands.registerCommand(z,(...G)=>{return Y.executeCommand?Y.executeCommand(z,G,$):$(z,G)}));this._commands.set(Z.id,Q)}}unregister(Z){let J=this._commands.get(Z);if(J)J.forEach((Y)=>Y.dispose())}clear(){this._commands.forEach((Z)=>{Z.forEach((J)=>J.dispose())}),this._commands.clear()}}lY.ExecuteCommandFeature=NB});var UB=D((iY)=>{Object.defineProperty(iY,"__esModule",{value:!0});iY.FileSystemWatcherFeature=void 0;var NW=require("vscode"),H6=Z0(),cY=N0();class LB{constructor(Z,J){this._client=Z,this._notifyFileEvent=J,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return H6.DidChangeWatchedFilesNotification.type}fillClientCapabilities(Z){cY.ensure(cY.ensure(Z,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,cY.ensure(cY.ensure(Z,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(Z,J){}register(Z){if(!Array.isArray(Z.registerOptions.watchers))return;let J=[];for(let Y of Z.registerOptions.watchers){let $=this._client.protocol2CodeConverter.asGlobPattern(Y.globPattern);if($===void 0)continue;let Q=!0,z=!0,G=!0;if(Y.kind!==void 0&&Y.kind!==null)Q=(Y.kind&H6.WatchKind.Create)!==0,z=(Y.kind&H6.WatchKind.Change)!==0,G=(Y.kind&H6.WatchKind.Delete)!==0;let B=NW.workspace.createFileSystemWatcher($,!Q,!z,!G);this.hookListeners(B,Q,z,G,J),J.push(B)}this._watchers.set(Z.id,J)}registerRaw(Z,J){let Y=[];for(let $ of J)this.hookListeners($,!0,!0,!0,Y);this._watchers.set(Z,Y)}hookListeners(Z,J,Y,$,Q){if(J)Z.onDidCreate((z)=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(z),type:H6.FileChangeType.Created}),null,Q);if(Y)Z.onDidChange((z)=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(z),type:H6.FileChangeType.Changed}),null,Q);if($)Z.onDidDelete((z)=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(z),type:H6.FileChangeType.Deleted}),null,Q)}unregister(Z){let J=this._watchers.get(Z);if(J)for(let Y of J)Y.dispose()}clear(){this._watchers.forEach((Z)=>{for(let J of Z)J.dispose()}),this._watchers.clear()}}iY.FileSystemWatcherFeature=LB});var FB=D((nY)=>{Object.defineProperty(nY,"__esModule",{value:!0});nY.ColorProviderFeature=void 0;var EW=require("vscode"),PJ=Z0(),B$=N0();class wB extends B$.TextDocumentLanguageFeature{constructor(Z){super(Z,PJ.DocumentColorRequest.type)}fillClientCapabilities(Z){B$.ensure(B$.ensure(Z,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(Z,J){let[Y,$]=this.getRegistration(J,Z.colorProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideColorPresentations:($,Q,z)=>{let G=this._client,B=(A,O,F)=>{let L={color:A,textDocument:G.code2ProtocolConverter.asTextDocumentIdentifier(O.document),range:G.code2ProtocolConverter.asRange(O.range)};return G.sendRequest(PJ.ColorPresentationRequest.type,L,F).then((E)=>{if(F.isCancellationRequested)return null;return this._client.protocol2CodeConverter.asColorPresentations(E,F)},(E)=>{return G.handleFailedRequest(PJ.ColorPresentationRequest.type,F,E,null)})},K=G.middleware;return K.provideColorPresentations?K.provideColorPresentations($,Q,z,B):B($,Q,z)},provideDocumentColors:($,Q)=>{let z=this._client,G=(K,A)=>{let O={textDocument:z.code2ProtocolConverter.asTextDocumentIdentifier(K)};return z.sendRequest(PJ.DocumentColorRequest.type,O,A).then((F)=>{if(A.isCancellationRequested)return null;return this._client.protocol2CodeConverter.asColorInformations(F,A)},(F)=>{return z.handleFailedRequest(PJ.DocumentColorRequest.type,A,F,null)})},B=z.middleware;return B.provideDocumentColors?B.provideDocumentColors($,Q,G):G($,Q)}};return[EW.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),Y),Y]}}nY.ColorProviderFeature=wB});var MB=D((aY)=>{Object.defineProperty(aY,"__esModule",{value:!0});aY.ImplementationFeature=void 0;var LW=require("vscode"),j$=Z0(),K$=N0();class PB extends K$.TextDocumentLanguageFeature{constructor(Z){super(Z,j$.ImplementationRequest.type)}fillClientCapabilities(Z){let J=K$.ensure(K$.ensure(Z,"textDocument"),"implementation");J.dynamicRegistration=!0,J.linkSupport=!0}initialize(Z,J){let[Y,$]=this.getRegistration(J,Z.implementationProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideImplementation:($,Q,z)=>{let G=this._client,B=(A,O,F)=>{return G.sendRequest(j$.ImplementationRequest.type,G.code2ProtocolConverter.asTextDocumentPositionParams(A,O),F).then((L)=>{if(F.isCancellationRequested)return null;return G.protocol2CodeConverter.asDefinitionResult(L,F)},(L)=>{return G.handleFailedRequest(j$.ImplementationRequest.type,F,L,null)})},K=G.middleware;return K.provideImplementation?K.provideImplementation($,Q,z,B):B($,Q,z)}};return[this.registerProvider(J,Y),Y]}registerProvider(Z,J){return LW.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}}aY.ImplementationFeature=PB});var TB=D((sY)=>{Object.defineProperty(sY,"__esModule",{value:!0});sY.TypeDefinitionFeature=void 0;var UW=require("vscode"),V$=Z0(),MJ=N0();class IB extends MJ.TextDocumentLanguageFeature{constructor(Z){super(Z,V$.TypeDefinitionRequest.type)}fillClientCapabilities(Z){MJ.ensure(MJ.ensure(Z,"textDocument"),"typeDefinition").dynamicRegistration=!0;let J=MJ.ensure(MJ.ensure(Z,"textDocument"),"typeDefinition");J.dynamicRegistration=!0,J.linkSupport=!0}initialize(Z,J){let[Y,$]=this.getRegistration(J,Z.typeDefinitionProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideTypeDefinition:($,Q,z)=>{let G=this._client,B=(A,O,F)=>{return G.sendRequest(V$.TypeDefinitionRequest.type,G.code2ProtocolConverter.asTextDocumentPositionParams(A,O),F).then((L)=>{if(F.isCancellationRequested)return null;return G.protocol2CodeConverter.asDefinitionResult(L,F)},(L)=>{return G.handleFailedRequest(V$.TypeDefinitionRequest.type,F,L,null)})},K=G.middleware;return K.provideTypeDefinition?K.provideTypeDefinition($,Q,z,B):B($,Q,z)}};return[this.registerProvider(J,Y),Y]}registerProvider(Z,J){return UW.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}}sY.TypeDefinitionFeature=IB});var CB=D((s6)=>{Object.defineProperty(s6,"__esModule",{value:!0});s6.WorkspaceFoldersFeature=s6.arrayDiff=void 0;var wW=g0(),rY=require("vscode"),IJ=Z0();function W$(Z,J){if(Z===void 0||Z===null)return;return Z[J]}function A$(Z,J){return Z.filter((Y)=>J.indexOf(Y)<0)}s6.arrayDiff=A$;class qB{constructor(Z){this._client=Z,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return IJ.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(Z){let J=rY.workspace.workspaceFolders;if(this.initializeWithFolders(J),J===void 0)Z.workspaceFolders=null;else Z.workspaceFolders=J.map((Y)=>this.asProtocol(Y))}initializeWithFolders(Z){this._initialFolders=Z}fillClientCapabilities(Z){Z.workspace=Z.workspace||{},Z.workspace.workspaceFolders=!0}initialize(Z){let J=this._client;J.onRequest(IJ.WorkspaceFoldersRequest.type,(Q)=>{let z=()=>{let B=rY.workspace.workspaceFolders;if(B===void 0)return null;return B.map((A)=>{return this.asProtocol(A)})},G=J.middleware.workspace;return G&&G.workspaceFolders?G.workspaceFolders(Q,z):z(Q)});let Y=W$(W$(W$(Z,"workspace"),"workspaceFolders"),"changeNotifications"),$;if(typeof Y==="string")$=Y;else if(Y===!0)$=wW.generateUuid();if($)this.register({id:$,registerOptions:void 0})}sendInitialEvent(Z){let J;if(this._initialFolders&&Z){let Y=A$(this._initialFolders,Z),$=A$(Z,this._initialFolders);if($.length>0||Y.length>0)J=this.doSendEvent($,Y)}else if(this._initialFolders)J=this.doSendEvent([],this._initialFolders);else if(Z)J=this.doSendEvent(Z,[]);if(J!==void 0)J.catch((Y)=>{this._client.error(`Sending notification ${IJ.DidChangeWorkspaceFoldersNotification.type.method} failed`,Y)})}doSendEvent(Z,J){let Y={event:{added:Z.map(($)=>this.asProtocol($)),removed:J.map(($)=>this.asProtocol($))}};return this._client.sendNotification(IJ.DidChangeWorkspaceFoldersNotification.type,Y)}register(Z){let J=Z.id,Y=this._client,$=rY.workspace.onDidChangeWorkspaceFolders((Q)=>{let z=(K)=>{return this.doSendEvent(K.added,K.removed)},G=Y.middleware.workspace;(G&&G.didChangeWorkspaceFolders?G.didChangeWorkspaceFolders(Q,z):z(Q)).catch((K)=>{this._client.error(`Sending notification ${IJ.DidChangeWorkspaceFoldersNotification.type.method} failed`,K)})});this._listeners.set(J,$),this.sendInitialEvent(rY.workspace.workspaceFolders)}unregister(Z){let J=this._listeners.get(Z);if(J===void 0)return;this._listeners.delete(Z),J.dispose()}clear(){for(let Z of this._listeners.values())Z.dispose();this._listeners.clear()}asProtocol(Z){if(Z===void 0)return null;return{uri:this._client.code2ProtocolConverter.asUri(Z.uri),name:Z.name}}}s6.WorkspaceFoldersFeature=qB});var bB=D((oY)=>{Object.defineProperty(oY,"__esModule",{value:!0});oY.FoldingRangeFeature=void 0;var SB=require("vscode"),O6=Z0(),TJ=N0();class DB extends TJ.TextDocumentLanguageFeature{constructor(Z){super(Z,O6.FoldingRangeRequest.type)}fillClientCapabilities(Z){let J=TJ.ensure(TJ.ensure(Z,"textDocument"),"foldingRange");J.dynamicRegistration=!0,J.rangeLimit=5000,J.lineFoldingOnly=!0,J.foldingRangeKind={valueSet:[O6.FoldingRangeKind.Comment,O6.FoldingRangeKind.Imports,O6.FoldingRangeKind.Region]},J.foldingRange={collapsedText:!1},TJ.ensure(TJ.ensure(Z,"workspace"),"foldingRange").refreshSupport=!0}initialize(Z,J){this._client.onRequest(O6.FoldingRangeRefreshRequest.type,async()=>{for(let Q of this.getAllProviders())Q.onDidChangeFoldingRange.fire()});let[Y,$]=this.getRegistration(J,Z.foldingRangeProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=Z.documentSelector,Y=new SB.EventEmitter,$={onDidChangeFoldingRanges:Y.event,provideFoldingRanges:(Q,z,G)=>{let B=this._client,K=(O,F,L)=>{let E={textDocument:B.code2ProtocolConverter.asTextDocumentIdentifier(O)};return B.sendRequest(O6.FoldingRangeRequest.type,E,L).then((T)=>{if(L.isCancellationRequested)return null;return B.protocol2CodeConverter.asFoldingRanges(T,L)},(T)=>{return B.handleFailedRequest(O6.FoldingRangeRequest.type,L,T,null)})},A=B.middleware;return A.provideFoldingRanges?A.provideFoldingRanges(Q,z,G,K):K(Q,z,G)}};return[SB.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),$),{provider:$,onDidChangeFoldingRange:Y}]}}oY.FoldingRangeFeature=DB});var RB=D((tY)=>{Object.defineProperty(tY,"__esModule",{value:!0});tY.DeclarationFeature=void 0;var FW=require("vscode"),H$=Z0(),O$=N0();class yB extends O$.TextDocumentLanguageFeature{constructor(Z){super(Z,H$.DeclarationRequest.type)}fillClientCapabilities(Z){let J=O$.ensure(O$.ensure(Z,"textDocument"),"declaration");J.dynamicRegistration=!0,J.linkSupport=!0}initialize(Z,J){let[Y,$]=this.getRegistration(J,Z.declarationProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideDeclaration:($,Q,z)=>{let G=this._client,B=(A,O,F)=>{return G.sendRequest(H$.DeclarationRequest.type,G.code2ProtocolConverter.asTextDocumentPositionParams(A,O),F).then((L)=>{if(F.isCancellationRequested)return null;return G.protocol2CodeConverter.asDeclarationResult(L,F)},(L)=>{return G.handleFailedRequest(H$.DeclarationRequest.type,F,L,null)})},K=G.middleware;return K.provideDeclaration?K.provideDeclaration($,Q,z,B):B($,Q,z)}};return[this.registerProvider(J,Y),Y]}registerProvider(Z,J){return FW.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}}tY.DeclarationFeature=yB});var xB=D((eY)=>{Object.defineProperty(eY,"__esModule",{value:!0});eY.SelectionRangeFeature=void 0;var PW=require("vscode"),N$=Z0(),E$=N0();class hB extends E$.TextDocumentLanguageFeature{constructor(Z){super(Z,N$.SelectionRangeRequest.type)}fillClientCapabilities(Z){let J=E$.ensure(E$.ensure(Z,"textDocument"),"selectionRange");J.dynamicRegistration=!0}initialize(Z,J){let[Y,$]=this.getRegistration(J,Z.selectionRangeProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideSelectionRanges:($,Q,z)=>{let G=this._client,B=async(A,O,F)=>{let L={textDocument:G.code2ProtocolConverter.asTextDocumentIdentifier(A),positions:G.code2ProtocolConverter.asPositionsSync(O,F)};return G.sendRequest(N$.SelectionRangeRequest.type,L,F).then((E)=>{if(F.isCancellationRequested)return null;return G.protocol2CodeConverter.asSelectionRanges(E,F)},(E)=>{return G.handleFailedRequest(N$.SelectionRangeRequest.type,F,E,null)})},K=G.middleware;return K.provideSelectionRanges?K.provideSelectionRanges($,Q,z,B):B($,Q,z)}};return[this.registerProvider(J,Y),Y]}registerProvider(Z,J){return PW.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}}eY.SelectionRangeFeature=hB});var kB=D((Z4)=>{Object.defineProperty(Z4,"__esModule",{value:!0});Z4.ProgressFeature=void 0;var fB=Z0(),MW=R8();function IW(Z,J){if(Z[J]===void 0)Z[J]=Object.create(null);return Z[J]}class _B{constructor(Z){this._client=Z,this.activeParts=new Set}getState(){return{kind:"window",id:fB.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(Z){IW(Z,"window").workDoneProgress=!0}initialize(){let Z=this._client,J=($)=>{this.activeParts.delete($)},Y=($)=>{this.activeParts.add(new MW.ProgressPart(this._client,$.token,J))};Z.onRequest(fB.WorkDoneProgressCreateRequest.type,Y)}clear(){for(let Z of this.activeParts)Z.done();this.activeParts.clear()}}Z4.ProgressFeature=_B});var dB=D((J4)=>{Object.defineProperty(J4,"__esModule",{value:!0});J4.CallHierarchyFeature=void 0;var TW=require("vscode"),N6=Z0(),L$=N0();class vB{constructor(Z){this.client=Z,this.middleware=Z.middleware}prepareCallHierarchy(Z,J,Y){let $=this.client,Q=this.middleware,z=(G,B,K)=>{let A=$.code2ProtocolConverter.asTextDocumentPositionParams(G,B);return $.sendRequest(N6.CallHierarchyPrepareRequest.type,A,K).then((O)=>{if(K.isCancellationRequested)return null;return $.protocol2CodeConverter.asCallHierarchyItems(O,K)},(O)=>{return $.handleFailedRequest(N6.CallHierarchyPrepareRequest.type,K,O,null)})};return Q.prepareCallHierarchy?Q.prepareCallHierarchy(Z,J,Y,z):z(Z,J,Y)}provideCallHierarchyIncomingCalls(Z,J){let Y=this.client,$=this.middleware,Q=(z,G)=>{let B={item:Y.code2ProtocolConverter.asCallHierarchyItem(z)};return Y.sendRequest(N6.CallHierarchyIncomingCallsRequest.type,B,G).then((K)=>{if(G.isCancellationRequested)return null;return Y.protocol2CodeConverter.asCallHierarchyIncomingCalls(K,G)},(K)=>{return Y.handleFailedRequest(N6.CallHierarchyIncomingCallsRequest.type,G,K,null)})};return $.provideCallHierarchyIncomingCalls?$.provideCallHierarchyIncomingCalls(Z,J,Q):Q(Z,J)}provideCallHierarchyOutgoingCalls(Z,J){let Y=this.client,$=this.middleware,Q=(z,G)=>{let B={item:Y.code2ProtocolConverter.asCallHierarchyItem(z)};return Y.sendRequest(N6.CallHierarchyOutgoingCallsRequest.type,B,G).then((K)=>{if(G.isCancellationRequested)return null;return Y.protocol2CodeConverter.asCallHierarchyOutgoingCalls(K,G)},(K)=>{return Y.handleFailedRequest(N6.CallHierarchyOutgoingCallsRequest.type,G,K,null)})};return $.provideCallHierarchyOutgoingCalls?$.provideCallHierarchyOutgoingCalls(Z,J,Q):Q(Z,J)}}class gB extends L$.TextDocumentLanguageFeature{constructor(Z){super(Z,N6.CallHierarchyPrepareRequest.type)}fillClientCapabilities(Z){let J=Z,Y=L$.ensure(L$.ensure(J,"textDocument"),"callHierarchy");Y.dynamicRegistration=!0}initialize(Z,J){let[Y,$]=this.getRegistration(J,Z.callHierarchyProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=this._client,Y=new vB(J);return[TW.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z.documentSelector),Y),Y]}}J4.CallHierarchyFeature=gB});var pB=D(($4)=>{Object.defineProperty($4,"__esModule",{value:!0});$4.SemanticTokensFeature=void 0;var Y4=require("vscode"),$0=Z0(),qJ=N0(),qW=aZ();class mB extends qJ.TextDocumentLanguageFeature{constructor(Z){super(Z,$0.SemanticTokensRegistrationType.type)}fillClientCapabilities(Z){let J=qJ.ensure(qJ.ensure(Z,"textDocument"),"semanticTokens");J.dynamicRegistration=!0,J.tokenTypes=[$0.SemanticTokenTypes.namespace,$0.SemanticTokenTypes.type,$0.SemanticTokenTypes.class,$0.SemanticTokenTypes.enum,$0.SemanticTokenTypes.interface,$0.SemanticTokenTypes.struct,$0.SemanticTokenTypes.typeParameter,$0.SemanticTokenTypes.parameter,$0.SemanticTokenTypes.variable,$0.SemanticTokenTypes.property,$0.SemanticTokenTypes.enumMember,$0.SemanticTokenTypes.event,$0.SemanticTokenTypes.function,$0.SemanticTokenTypes.method,$0.SemanticTokenTypes.macro,$0.SemanticTokenTypes.keyword,$0.SemanticTokenTypes.modifier,$0.SemanticTokenTypes.comment,$0.SemanticTokenTypes.string,$0.SemanticTokenTypes.number,$0.SemanticTokenTypes.regexp,$0.SemanticTokenTypes.operator,$0.SemanticTokenTypes.decorator],J.tokenModifiers=[$0.SemanticTokenModifiers.declaration,$0.SemanticTokenModifiers.definition,$0.SemanticTokenModifiers.readonly,$0.SemanticTokenModifiers.static,$0.SemanticTokenModifiers.deprecated,$0.SemanticTokenModifiers.abstract,$0.SemanticTokenModifiers.async,$0.SemanticTokenModifiers.modification,$0.SemanticTokenModifiers.documentation,$0.SemanticTokenModifiers.defaultLibrary],J.formats=[$0.TokenFormat.Relative],J.requests={range:!0,full:{delta:!0}},J.multilineTokenSupport=!1,J.overlappingTokenSupport=!1,J.serverCancelSupport=!0,J.augmentsSyntaxTokens=!0,qJ.ensure(qJ.ensure(Z,"workspace"),"semanticTokens").refreshSupport=!0}initialize(Z,J){this._client.onRequest($0.SemanticTokensRefreshRequest.type,async()=>{for(let z of this.getAllProviders())z.onDidChangeSemanticTokensEmitter.fire()});let[$,Q]=this.getRegistration(J,Z.semanticTokensProvider);if(!$||!Q)return;this.register({id:$,registerOptions:Q})}registerLanguageProvider(Z){let J=Z.documentSelector,Y=qW.boolean(Z.full)?Z.full:Z.full!==void 0,$=Z.full!==void 0&&typeof Z.full!=="boolean"&&Z.full.delta===!0,Q=new Y4.EventEmitter,z=Y?{onDidChangeSemanticTokens:Q.event,provideDocumentSemanticTokens:(L,E)=>{let T=this._client,C=T.middleware,x=(f,d)=>{let _={textDocument:T.code2ProtocolConverter.asTextDocumentIdentifier(f)};return T.sendRequest($0.SemanticTokensRequest.type,_,d).then((B0)=>{if(d.isCancellationRequested)return null;return T.protocol2CodeConverter.asSemanticTokens(B0,d)},(B0)=>{return T.handleFailedRequest($0.SemanticTokensRequest.type,d,B0,null)})};return C.provideDocumentSemanticTokens?C.provideDocumentSemanticTokens(L,E,x):x(L,E)},provideDocumentSemanticTokensEdits:$?(L,E,T)=>{let C=this._client,x=C.middleware,f=(d,_,B0)=>{let t={textDocument:C.code2ProtocolConverter.asTextDocumentIdentifier(d),previousResultId:_};return C.sendRequest($0.SemanticTokensDeltaRequest.type,t,B0).then(async(u)=>{if(B0.isCancellationRequested)return null;if($0.SemanticTokens.is(u))return await C.protocol2CodeConverter.asSemanticTokens(u,B0);else return await C.protocol2CodeConverter.asSemanticTokensEdits(u,B0)},(u)=>{return C.handleFailedRequest($0.SemanticTokensDeltaRequest.type,B0,u,null)})};return x.provideDocumentSemanticTokensEdits?x.provideDocumentSemanticTokensEdits(L,E,T,f):f(L,E,T)}:void 0}:void 0,B=Z.range===!0?{provideDocumentRangeSemanticTokens:(L,E,T)=>{let C=this._client,x=C.middleware,f=(d,_,B0)=>{let t={textDocument:C.code2ProtocolConverter.asTextDocumentIdentifier(d),range:C.code2ProtocolConverter.asRange(_)};return C.sendRequest($0.SemanticTokensRangeRequest.type,t,B0).then((u)=>{if(B0.isCancellationRequested)return null;return C.protocol2CodeConverter.asSemanticTokens(u,B0)},(u)=>{return C.handleFailedRequest($0.SemanticTokensRangeRequest.type,B0,u,null)})};return x.provideDocumentRangeSemanticTokens?x.provideDocumentRangeSemanticTokens(L,E,T,f):f(L,E,T)}}:void 0,K=[],A=this._client,O=A.protocol2CodeConverter.asSemanticTokensLegend(Z.legend),F=A.protocol2CodeConverter.asDocumentSelector(J);if(z!==void 0)K.push(Y4.languages.registerDocumentSemanticTokensProvider(F,z,O));if(B!==void 0)K.push(Y4.languages.registerDocumentRangeSemanticTokensProvider(F,B,O));return[new Y4.Disposable(()=>K.forEach((L)=>L.dispose())),{range:B,full:z,onDidChangeSemanticTokensEmitter:Q}]}}$4.SemanticTokensFeature=mB});var oB=D((xZ)=>{Object.defineProperty(xZ,"__esModule",{value:!0});xZ.WillDeleteFilesFeature=xZ.WillRenameFilesFeature=xZ.WillCreateFilesFeature=xZ.DidDeleteFilesFeature=xZ.DidRenameFilesFeature=xZ.DidCreateFilesFeature=void 0;var Z9=require("vscode"),CW=qY(),k9=Z0(),SW=g0();function uB(Z,J){if(Z[J]===void 0)Z[J]={};return Z[J]}function DW(Z,J){return Z[J]}function lB(Z,J,Y){Z[J]=Y}class E6{constructor(Z,J,Y,$,Q){this._client=Z,this._event=J,this._registrationType=Y,this._clientCapability=$,this._serverCapability=Q,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(Z){let J=uB(uB(Z,"workspace"),"fileOperations");lB(J,"dynamicRegistration",!0),lB(J,this._clientCapability,!0)}initialize(Z){let J=Z.workspace?.fileOperations,Y=J!==void 0?DW(J,this._serverCapability):void 0;if(Y?.filters!==void 0)try{this.register({id:SW.generateUuid(),registerOptions:{filters:Y.filters}})}catch($){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${$}`)}}register(Z){if(!this._listener)this._listener=this._event(this.send,this);let J=Z.registerOptions.filters.map((Y)=>{let $=new CW.Minimatch(Y.pattern.glob,E6.asMinimatchOptions(Y.pattern.options));if(!$.makeRe())throw new Error(`Invalid pattern ${Y.pattern.glob}!`);return{scheme:Y.scheme,matcher:$,kind:Y.pattern.matches}});this._filters.set(Z.id,J)}unregister(Z){if(this._filters.delete(Z),this._filters.size===0&&this._listener)this._listener.dispose(),this._listener=void 0}clear(){if(this._filters.clear(),this._listener)this._listener.dispose(),this._listener=void 0}getFileType(Z){return E6.getFileType(Z)}async filter(Z,J){let Y=await Promise.all(Z.files.map(async(Q)=>{let z=J(Q),G=z.fsPath.replace(/\\/g,"/");for(let B of this._filters.values())for(let K of B){if(K.scheme!==void 0&&K.scheme!==z.scheme)continue;if(K.matcher.match(G)){if(K.kind===void 0)return!0;let A=await this.getFileType(z);if(A===void 0)return this._client.error(`Failed to determine file type for ${z.toString()}.`),!0;if(A===Z9.FileType.File&&K.kind===k9.FileOperationPatternKind.file||A===Z9.FileType.Directory&&K.kind===k9.FileOperationPatternKind.folder)return!0}else if(K.kind===k9.FileOperationPatternKind.folder){if(await E6.getFileType(z)===Z9.FileType.Directory&&K.matcher.match(`${G}/`))return!0}}return!1})),$=Z.files.filter((Q,z)=>Y[z]);return{...Z,files:$}}static async getFileType(Z){try{return(await Z9.workspace.fs.stat(Z)).type}catch(J){return}}static asMinimatchOptions(Z){let J={dot:!0};if(Z?.ignoreCase===!0)J.nocase=!0;return J}}class U$ extends E6{constructor(Z,J,Y,$,Q,z,G){super(Z,J,Y,$,Q);this._notificationType=Y,this._accessUri=z,this._createParams=G}async send(Z){let J=await this.filter(Z,this._accessUri);if(J.files.length){let Y=async($)=>{return this._client.sendNotification(this._notificationType,this._createParams($))};return this.doSend(J,Y)}}}class w$ extends U${constructor(){super(...arguments);this._fsPathFileTypes=new Map}async getFileType(Z){let J=Z.fsPath;if(this._fsPathFileTypes.has(J))return this._fsPathFileTypes.get(J);let Y=await E6.getFileType(Z);if(Y)this._fsPathFileTypes.set(J,Y);return Y}async cacheFileTypes(Z,J){await this.filter(Z,J)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(Z){if(super.unregister(Z),this.filterSize()===0&&this._willListener)this._willListener.dispose(),this._willListener=void 0}clear(){if(super.clear(),this._willListener)this._willListener.dispose(),this._willListener=void 0}}class cB extends U${constructor(Z){super(Z,Z9.workspace.onDidCreateFiles,k9.DidCreateFilesNotification.type,"didCreate","didCreate",(J)=>J,Z.code2ProtocolConverter.asDidCreateFilesParams)}doSend(Z,J){let Y=this._client.middleware.workspace;return Y?.didCreateFiles?Y.didCreateFiles(Z,J):J(Z)}}xZ.DidCreateFilesFeature=cB;class iB extends w${constructor(Z){super(Z,Z9.workspace.onDidRenameFiles,k9.DidRenameFilesNotification.type,"didRename","didRename",(J)=>J.oldUri,Z.code2ProtocolConverter.asDidRenameFilesParams)}register(Z){if(!this._willListener)this._willListener=Z9.workspace.onWillRenameFiles(this.willRename,this);super.register(Z)}willRename(Z){Z.waitUntil(this.cacheFileTypes(Z,(J)=>J.oldUri))}doSend(Z,J){this.clearFileTypeCache();let Y=this._client.middleware.workspace;return Y?.didRenameFiles?Y.didRenameFiles(Z,J):J(Z)}}xZ.DidRenameFilesFeature=iB;class nB extends w${constructor(Z){super(Z,Z9.workspace.onDidDeleteFiles,k9.DidDeleteFilesNotification.type,"didDelete","didDelete",(J)=>J,Z.code2ProtocolConverter.asDidDeleteFilesParams)}register(Z){if(!this._willListener)this._willListener=Z9.workspace.onWillDeleteFiles(this.willDelete,this);super.register(Z)}willDelete(Z){Z.waitUntil(this.cacheFileTypes(Z,(J)=>J))}doSend(Z,J){this.clearFileTypeCache();let Y=this._client.middleware.workspace;return Y?.didDeleteFiles?Y.didDeleteFiles(Z,J):J(Z)}}xZ.DidDeleteFilesFeature=nB;class Q4 extends E6{constructor(Z,J,Y,$,Q,z,G){super(Z,J,Y,$,Q);this._requestType=Y,this._accessUri=z,this._createParams=G}async send(Z){let J=this.waitUntil(Z);Z.waitUntil(J)}async waitUntil(Z){let J=await this.filter(Z,this._accessUri);if(J.files.length){let Y=($)=>{return this._client.sendRequest(this._requestType,this._createParams($),$.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit)};return this.doSend(J,Y)}else return}}class aB extends Q4{constructor(Z){super(Z,Z9.workspace.onWillCreateFiles,k9.WillCreateFilesRequest.type,"willCreate","willCreate",(J)=>J,Z.code2ProtocolConverter.asWillCreateFilesParams)}doSend(Z,J){let Y=this._client.middleware.workspace;return Y?.willCreateFiles?Y.willCreateFiles(Z,J):J(Z)}}xZ.WillCreateFilesFeature=aB;class sB extends Q4{constructor(Z){super(Z,Z9.workspace.onWillRenameFiles,k9.WillRenameFilesRequest.type,"willRename","willRename",(J)=>J.oldUri,Z.code2ProtocolConverter.asWillRenameFilesParams)}doSend(Z,J){let Y=this._client.middleware.workspace;return Y?.willRenameFiles?Y.willRenameFiles(Z,J):J(Z)}}xZ.WillRenameFilesFeature=sB;class rB extends Q4{constructor(Z){super(Z,Z9.workspace.onWillDeleteFiles,k9.WillDeleteFilesRequest.type,"willDelete","willDelete",(J)=>J,Z.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(Z,J){let Y=this._client.middleware.workspace;return Y?.willDeleteFiles?Y.willDeleteFiles(Z,J):J(Z)}}xZ.WillDeleteFilesFeature=rB});var eB=D((z4)=>{Object.defineProperty(z4,"__esModule",{value:!0});z4.LinkedEditingFeature=void 0;var bW=require("vscode"),F$=Z0(),P$=N0();class tB extends P$.TextDocumentLanguageFeature{constructor(Z){super(Z,F$.LinkedEditingRangeRequest.type)}fillClientCapabilities(Z){let J=P$.ensure(P$.ensure(Z,"textDocument"),"linkedEditingRange");J.dynamicRegistration=!0}initialize(Z,J){let[Y,$]=this.getRegistration(J,Z.linkedEditingRangeProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideLinkedEditingRanges:($,Q,z)=>{let G=this._client,B=(A,O,F)=>{return G.sendRequest(F$.LinkedEditingRangeRequest.type,G.code2ProtocolConverter.asTextDocumentPositionParams(A,O),F).then((L)=>{if(F.isCancellationRequested)return null;return G.protocol2CodeConverter.asLinkedEditingRanges(L,F)},(L)=>{return G.handleFailedRequest(F$.LinkedEditingRangeRequest.type,F,L,null)})},K=G.middleware;return K.provideLinkedEditingRange?K.provideLinkedEditingRange($,Q,z,B):B($,Q,z)}};return[this.registerProvider(J,Y),Y]}registerProvider(Z,J){return bW.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}}z4.LinkedEditingFeature=tB});var Y3=D((G4)=>{Object.defineProperty(G4,"__esModule",{value:!0});G4.TypeHierarchyFeature=void 0;var yW=require("vscode"),L6=Z0(),M$=N0();class Z3{constructor(Z){this.client=Z,this.middleware=Z.middleware}prepareTypeHierarchy(Z,J,Y){let $=this.client,Q=this.middleware,z=(G,B,K)=>{let A=$.code2ProtocolConverter.asTextDocumentPositionParams(G,B);return $.sendRequest(L6.TypeHierarchyPrepareRequest.type,A,K).then((O)=>{if(K.isCancellationRequested)return null;return $.protocol2CodeConverter.asTypeHierarchyItems(O,K)},(O)=>{return $.handleFailedRequest(L6.TypeHierarchyPrepareRequest.type,K,O,null)})};return Q.prepareTypeHierarchy?Q.prepareTypeHierarchy(Z,J,Y,z):z(Z,J,Y)}provideTypeHierarchySupertypes(Z,J){let Y=this.client,$=this.middleware,Q=(z,G)=>{let B={item:Y.code2ProtocolConverter.asTypeHierarchyItem(z)};return Y.sendRequest(L6.TypeHierarchySupertypesRequest.type,B,G).then((K)=>{if(G.isCancellationRequested)return null;return Y.protocol2CodeConverter.asTypeHierarchyItems(K,G)},(K)=>{return Y.handleFailedRequest(L6.TypeHierarchySupertypesRequest.type,G,K,null)})};return $.provideTypeHierarchySupertypes?$.provideTypeHierarchySupertypes(Z,J,Q):Q(Z,J)}provideTypeHierarchySubtypes(Z,J){let Y=this.client,$=this.middleware,Q=(z,G)=>{let B={item:Y.code2ProtocolConverter.asTypeHierarchyItem(z)};return Y.sendRequest(L6.TypeHierarchySubtypesRequest.type,B,G).then((K)=>{if(G.isCancellationRequested)return null;return Y.protocol2CodeConverter.asTypeHierarchyItems(K,G)},(K)=>{return Y.handleFailedRequest(L6.TypeHierarchySubtypesRequest.type,G,K,null)})};return $.provideTypeHierarchySubtypes?$.provideTypeHierarchySubtypes(Z,J,Q):Q(Z,J)}}class J3 extends M$.TextDocumentLanguageFeature{constructor(Z){super(Z,L6.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(Z){let J=M$.ensure(M$.ensure(Z,"textDocument"),"typeHierarchy");J.dynamicRegistration=!0}initialize(Z,J){let[Y,$]=this.getRegistration(J,Z.typeHierarchyProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=this._client,Y=new Z3(J);return[yW.languages.registerTypeHierarchyProvider(J.protocol2CodeConverter.asDocumentSelector(Z.documentSelector),Y),Y]}}G4.TypeHierarchyFeature=J3});var z3=D((B4)=>{Object.defineProperty(B4,"__esModule",{value:!0});B4.InlineValueFeature=void 0;var $3=require("vscode"),X4=Z0(),CJ=N0();class Q3 extends CJ.TextDocumentLanguageFeature{constructor(Z){super(Z,X4.InlineValueRequest.type)}fillClientCapabilities(Z){CJ.ensure(CJ.ensure(Z,"textDocument"),"inlineValue").dynamicRegistration=!0,CJ.ensure(CJ.ensure(Z,"workspace"),"inlineValue").refreshSupport=!0}initialize(Z,J){this._client.onRequest(X4.InlineValueRefreshRequest.type,async()=>{for(let Q of this.getAllProviders())Q.onDidChangeInlineValues.fire()});let[Y,$]=this.getRegistration(J,Z.inlineValueProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=Z.documentSelector,Y=new $3.EventEmitter,$={onDidChangeInlineValues:Y.event,provideInlineValues:(Q,z,G,B)=>{let K=this._client,A=(F,L,E,T)=>{let C={textDocument:K.code2ProtocolConverter.asTextDocumentIdentifier(F),range:K.code2ProtocolConverter.asRange(L),context:K.code2ProtocolConverter.asInlineValueContext(E)};return K.sendRequest(X4.InlineValueRequest.type,C,T).then((x)=>{if(T.isCancellationRequested)return null;return K.protocol2CodeConverter.asInlineValues(x,T)},(x)=>{return K.handleFailedRequest(X4.InlineValueRequest.type,T,x,null)})},O=K.middleware;return O.provideInlineValues?O.provideInlineValues(Q,z,G,B,A):A(Q,z,G,B)}};return[this.registerProvider(J,$),{provider:$,onDidChangeInlineValues:Y}]}registerProvider(Z,J){return $3.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}}B4.InlineValueFeature=Q3});var B3=D((j4)=>{Object.defineProperty(j4,"__esModule",{value:!0});j4.InlayHintsFeature=void 0;var G3=require("vscode"),r6=Z0(),SJ=N0();class X3 extends SJ.TextDocumentLanguageFeature{constructor(Z){super(Z,r6.InlayHintRequest.type)}fillClientCapabilities(Z){let J=SJ.ensure(SJ.ensure(Z,"textDocument"),"inlayHint");J.dynamicRegistration=!0,J.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},SJ.ensure(SJ.ensure(Z,"workspace"),"inlayHint").refreshSupport=!0}initialize(Z,J){this._client.onRequest(r6.InlayHintRefreshRequest.type,async()=>{for(let Q of this.getAllProviders())Q.onDidChangeInlayHints.fire()});let[Y,$]=this.getRegistration(J,Z.inlayHintProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=Z.documentSelector,Y=new G3.EventEmitter,$={onDidChangeInlayHints:Y.event,provideInlayHints:(Q,z,G)=>{let B=this._client,K=async(O,F,L)=>{let E={textDocument:B.code2ProtocolConverter.asTextDocumentIdentifier(O),range:B.code2ProtocolConverter.asRange(F)};try{let T=await B.sendRequest(r6.InlayHintRequest.type,E,L);if(L.isCancellationRequested)return null;return B.protocol2CodeConverter.asInlayHints(T,L)}catch(T){return B.handleFailedRequest(r6.InlayHintRequest.type,L,T,null)}},A=B.middleware;return A.provideInlayHints?A.provideInlayHints(Q,z,G,K):K(Q,z,G)}};return $.resolveInlayHint=Z.resolveProvider===!0?(Q,z)=>{let G=this._client,B=async(A,O)=>{try{let F=await G.sendRequest(r6.InlayHintResolveRequest.type,G.code2ProtocolConverter.asInlayHint(A),O);if(O.isCancellationRequested)return null;let L=G.protocol2CodeConverter.asInlayHint(F,O);return O.isCancellationRequested?null:L}catch(F){return G.handleFailedRequest(r6.InlayHintResolveRequest.type,O,F,null)}},K=G.middleware;return K.resolveInlayHint?K.resolveInlayHint(Q,z,B):B(Q,z)}:void 0,[this.registerProvider(J,$),{provider:$,onDidChangeInlayHints:Y}]}registerProvider(Z,J){return G3.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}}j4.InlayHintsFeature=X3});var K3=D((K4)=>{Object.defineProperty(K4,"__esModule",{value:!0});K4.InlineCompletionItemFeature=void 0;var RW=require("vscode"),I$=Z0(),T$=N0(),hW=g0();class j3 extends T$.TextDocumentLanguageFeature{constructor(Z){super(Z,I$.InlineCompletionRequest.type)}fillClientCapabilities(Z){let J=T$.ensure(T$.ensure(Z,"textDocument"),"inlineCompletion");J.dynamicRegistration=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.inlineCompletionProvider);if(!Y)return;this.register({id:hW.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideInlineCompletionItems:($,Q,z,G)=>{let B=this._client,K=this._client.middleware,A=(O,F,L,E)=>{return B.sendRequest(I$.InlineCompletionRequest.type,B.code2ProtocolConverter.asInlineCompletionParams(O,F,L),E).then((T)=>{if(E.isCancellationRequested)return null;return B.protocol2CodeConverter.asInlineCompletionResult(T,E)},(T)=>{return B.handleFailedRequest(I$.InlineCompletionRequest.type,E,T,null)})};return K.provideInlineCompletionItems?K.provideInlineCompletionItems($,Q,z,G,A):A($,Q,z,G)}};return[RW.languages.registerInlineCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),Y),Y]}}K4.InlineCompletionItemFeature=j3});var D$=D((GZ)=>{Object.defineProperty(GZ,"__esModule",{value:!0});GZ.ProposedFeatures=GZ.BaseLanguageClient=GZ.MessageTransports=GZ.SuspendMode=GZ.State=GZ.CloseAction=GZ.ErrorAction=GZ.RevealOutputChannelOn=void 0;var I0=require("vscode"),k=Z0(),xW=_X(),fW=gX(),V9=aZ(),V4=EY(),V3=g0(),_W=R8(),K9=N0(),kW=p8(),W3=q5(),A3=b5(),o6=k5(),vW=g5(),gW=m5(),dW=u5(),mW=i5(),pW=a5(),uW=e8(),lW=t5(),cW=ZB(),iW=YB(),nW=zB(),q$=jB(),aW=WB(),sW=HB(),rW=EB(),oW=UB(),tW=FB(),eW=MB(),ZA=TB(),JA=CB(),YA=bB(),$A=RB(),QA=xB(),zA=kB(),GA=dB(),XA=pB(),t6=oB(),BA=eB(),jA=Y3(),KA=z3(),VA=B3(),WA=K3(),U6;(function(Z){Z[Z.Debug=0]="Debug",Z[Z.Info=1]="Info",Z[Z.Warn=2]="Warn",Z[Z.Error=3]="Error",Z[Z.Never=4]="Never"})(U6||(GZ.RevealOutputChannelOn=U6={}));var bJ;(function(Z){Z[Z.Continue=1]="Continue",Z[Z.Shutdown=2]="Shutdown"})(bJ||(GZ.ErrorAction=bJ={}));var $6;(function(Z){Z[Z.DoNotRestart=1]="DoNotRestart",Z[Z.Restart=2]="Restart"})($6||(GZ.CloseAction=$6={}));var DJ;(function(Z){Z[Z.Stopped=1]="Stopped",Z[Z.Starting=3]="Starting",Z[Z.Running=2]="Running"})(DJ||(GZ.State=DJ={}));var H3;(function(Z){Z.off="off",Z.on="on"})(H3||(GZ.SuspendMode=H3={}));var C$;(function(Z){function J(Y){if(Y===void 0||Y===null)return!1;if(typeof Y==="boolean"||typeof Y==="object"&&Y!==null&&V9.stringArray(Y.enabledCommands))return Y;return!1}Z.sanitizeIsTrusted=J})(C$||(C$={}));class N3{constructor(Z,J){this.client=Z,this.maxRestartCount=J,this.restarts=[]}error(Z,J,Y){if(Y&&Y<=3)return{action:bJ.Continue};return{action:bJ.Shutdown}}closed(){if(this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount)return{action:$6.Restart};else if(this.restarts[this.restarts.length-1]-this.restarts[0]<=180000)return{action:$6.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`};else return this.restarts.shift(),{action:$6.Restart}}}var X0;(function(Z){Z.Initial="initial",Z.Starting="starting",Z.StartFailed="startFailed",Z.Running="running",Z.Stopping="stopping",Z.Stopped="stopped"})(X0||(X0={}));var O3;(function(Z){function J(Y){return Y&&k.MessageReader.is(Y.reader)&&k.MessageWriter.is(Y.writer)}Z.is=J})(O3||(GZ.MessageTransports=O3={}));class w6{constructor(Z,J,Y){this._traceFormat=k.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new V4.Semaphore(1),this._id=Z,this._name=J,Y=Y||{};let $={isTrusted:!1,supportHtml:!1};if(Y.markdown!==void 0)$.isTrusted=C$.sanitizeIsTrusted(Y.markdown.isTrusted),$.supportHtml=Y.markdown.supportHtml===!0;if(this._clientOptions={documentSelector:Y.documentSelector??[],synchronize:Y.synchronize??{},diagnosticCollectionName:Y.diagnosticCollectionName,outputChannelName:Y.outputChannelName??this._name,revealOutputChannelOn:Y.revealOutputChannelOn??U6.Error,stdioEncoding:Y.stdioEncoding??"utf8",initializationOptions:Y.initializationOptions,initializationFailedHandler:Y.initializationFailedHandler,progressOnInitialization:!!Y.progressOnInitialization,errorHandler:Y.errorHandler??this.createDefaultErrorHandler(Y.connectionOptions?.maxRestartCount),middleware:Y.middleware??{},uriConverters:Y.uriConverters,workspaceFolder:Y.workspaceFolder,connectionOptions:Y.connectionOptions,markdown:$,diagnosticPullOptions:Y.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:Y.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=X0.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,Y.outputChannel)this._outputChannel=Y.outputChannel,this._disposeOutputChannel=!1;else this._outputChannel=void 0,this._disposeOutputChannel=!0;this._traceOutputChannel=Y.traceOutputChannel,this._diagnostics=void 0,this._pendingOpenNotifications=new Set,this._pendingChangeSemaphore=new V4.Semaphore(1),this._pendingChangeDelayer=new V4.Delayer(250),this._fileEvents=[],this._fileEventDelayer=new V4.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new k.Emitter,this._stateChangeEmitter=new k.Emitter,this._trace=k.Trace.Off,this._tracer={log:(Q,z)=>{if(V9.string(Q))this.logTrace(Q,z);else this.logObjectTrace(Q)}},this._c2p=xW.createConverter(Y.uriConverters?Y.uriConverters.code2Protocol:void 0),this._p2c=fW.createConverter(Y.uriConverters?Y.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){if(!this._outputChannel)this._outputChannel=I0.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name);return this._outputChannel}get traceOutputChannel(){if(this._traceOutputChannel)return this._traceOutputChannel;return this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(Z){let J=this.getPublicState();this._state=Z;let Y=this.getPublicState();if(Y!==J)this._stateChangeEmitter.fire({oldState:J,newState:Y})}getPublicState(){switch(this.$state){case X0.Starting:return DJ.Starting;case X0.Running:return DJ.Running;default:return DJ.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(Z,...J){if(this.$state===X0.StartFailed||this.$state===X0.Stopping||this.$state===X0.Stopped)return Promise.reject(new k.ResponseError(k.ErrorCodes.ConnectionInactive,"Client is not running"));let Y=await this.$start();if(this._didChangeTextDocumentFeature.syncKind===k.TextDocumentSyncKind.Full)await this.sendPendingFullTextDocumentChanges(Y);let $=this._clientOptions.middleware?.sendRequest;if($!==void 0){let Q=void 0,z=void 0;if(J.length===1)if(k.CancellationToken.is(J[0]))z=J[0];else Q=J[0];else if(J.length===2)Q=J[0],z=J[1];return $(Z,Q,z,(G,B,K)=>{let A=[];if(B!==void 0)A.push(B);if(K!==void 0)A.push(K);return Y.sendRequest(G,...A)})}else return Y.sendRequest(Z,...J)}onRequest(Z,J){let Y=typeof Z==="string"?Z:Z.method;this._requestHandlers.set(Y,J);let $=this.activeConnection(),Q;if($!==void 0)this._requestDisposables.set(Y,$.onRequest(Z,J)),Q={dispose:()=>{let z=this._requestDisposables.get(Y);if(z!==void 0)z.dispose(),this._requestDisposables.delete(Y)}};else this._pendingRequestHandlers.set(Y,J),Q={dispose:()=>{this._pendingRequestHandlers.delete(Y);let z=this._requestDisposables.get(Y);if(z!==void 0)z.dispose(),this._requestDisposables.delete(Y)}};return{dispose:()=>{this._requestHandlers.delete(Y),Q.dispose()}}}async sendNotification(Z,J){if(this.$state===X0.StartFailed||this.$state===X0.Stopping||this.$state===X0.Stopped)return Promise.reject(new k.ResponseError(k.ErrorCodes.ConnectionInactive,"Client is not running"));let Y=this._didChangeTextDocumentFeature.syncKind===k.TextDocumentSyncKind.Full,$;if(Y&&typeof Z!=="string"&&Z.method===k.DidOpenTextDocumentNotification.method)$=J?.textDocument.uri,this._pendingOpenNotifications.add($);let Q=await this.$start();if(Y)await this.sendPendingFullTextDocumentChanges(Q);if($!==void 0)this._pendingOpenNotifications.delete($);let z=this._clientOptions.middleware?.sendNotification;return z?z(Z,Q.sendNotification.bind(Q),J):Q.sendNotification(Z,J)}onNotification(Z,J){let Y=typeof Z==="string"?Z:Z.method;this._notificationHandlers.set(Y,J);let $=this.activeConnection(),Q;if($!==void 0)this._notificationDisposables.set(Y,$.onNotification(Z,J)),Q={dispose:()=>{let z=this._notificationDisposables.get(Y);if(z!==void 0)z.dispose(),this._notificationDisposables.delete(Y)}};else this._pendingNotificationHandlers.set(Y,J),Q={dispose:()=>{this._pendingNotificationHandlers.delete(Y);let z=this._notificationDisposables.get(Y);if(z!==void 0)z.dispose(),this._notificationDisposables.delete(Y)}};return{dispose:()=>{this._notificationHandlers.delete(Y),Q.dispose()}}}async sendProgress(Z,J,Y){if(this.$state===X0.StartFailed||this.$state===X0.Stopping||this.$state===X0.Stopped)return Promise.reject(new k.ResponseError(k.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(Z,J,Y)}catch($){throw this.error(`Sending progress for token ${J} failed.`,$),$}}onProgress(Z,J,Y){this._progressHandlers.set(J,{type:Z,handler:Y});let $=this.activeConnection(),Q,z=this._clientOptions.middleware?.handleWorkDoneProgress,G=k.WorkDoneProgress.is(Z)&&z!==void 0?(B)=>{z(J,B,()=>Y(B))}:Y;if($!==void 0)this._progressDisposables.set(J,$.onProgress(Z,J,G)),Q={dispose:()=>{let B=this._progressDisposables.get(J);if(B!==void 0)B.dispose(),this._progressDisposables.delete(J)}};else this._pendingProgressHandlers.set(J,{type:Z,handler:Y}),Q={dispose:()=>{this._pendingProgressHandlers.delete(J);let B=this._progressDisposables.get(J);if(B!==void 0)B.dispose(),this._progressDisposables.delete(J)}};return{dispose:()=>{this._progressHandlers.delete(J),Q.dispose()}}}createDefaultErrorHandler(Z){if(Z!==void 0&&Z<0)throw new Error(`Invalid maxRestartCount: ${Z}`);return new N3(this,Z??4)}async setTrace(Z){this._trace=Z;let J=this.activeConnection();if(J!==void 0)await J.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(Z){if(Z instanceof k.ResponseError){let J=Z;return`  Message: ${J.message}
  Code: ${J.code} ${J.data?`
`+J.data.toString():""}`}if(Z instanceof Error){if(V9.string(Z.stack))return Z.stack;return Z.message}if(V9.string(Z))return Z;return Z.toString()}debug(Z,J,Y=!0){this.logOutputMessage(k.MessageType.Debug,U6.Debug,"Debug",Z,J,Y)}info(Z,J,Y=!0){this.logOutputMessage(k.MessageType.Info,U6.Info,"Info",Z,J,Y)}warn(Z,J,Y=!0){this.logOutputMessage(k.MessageType.Warning,U6.Warn,"Warn",Z,J,Y)}error(Z,J,Y=!0){this.logOutputMessage(k.MessageType.Error,U6.Error,"Error",Z,J,Y)}logOutputMessage(Z,J,Y,$,Q,z){if(this.outputChannel.appendLine(`[${Y.padEnd(5)} - ${new Date().toLocaleTimeString()}] ${$}`),Q!==null&&Q!==void 0)this.outputChannel.appendLine(this.data2String(Q));if(z==="force"||z&&this._clientOptions.revealOutputChannelOn<=J)this.showNotificationMessage(Z,$)}showNotificationMessage(Z,J){J=J??"A request has failed. See the output for more information.",(Z===k.MessageType.Error?I0.window.showErrorMessage:Z===k.MessageType.Warning?I0.window.showWarningMessage:I0.window.showInformationMessage)(J,"Go to output").then(($)=>{if($!==void 0)this.outputChannel.show(!0)})}logTrace(Z,J){if(this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${Z}`),J)this.traceOutputChannel.appendLine(this.data2String(J))}logObjectTrace(Z){if(Z.isLSPMessage&&Z.type)this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `);else this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `);if(Z)this.traceOutputChannel.appendLine(`${JSON.stringify(Z)}`)}needsStart(){return this.$state===X0.Initial||this.$state===X0.Stopping||this.$state===X0.Stopped}needsStop(){return this.$state===X0.Starting||this.$state===X0.Running}activeConnection(){return this.$state===X0.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===X0.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===X0.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;let[Z,J,Y]=this.createOnStartPromise();if(this._onStart=Z,this._diagnostics===void 0)this._diagnostics=this._clientOptions.diagnosticCollectionName?I0.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):I0.languages.createDiagnosticCollection();for(let[$,Q]of this._notificationHandlers)if(!this._pendingNotificationHandlers.has($))this._pendingNotificationHandlers.set($,Q);for(let[$,Q]of this._requestHandlers)if(!this._pendingRequestHandlers.has($))this._pendingRequestHandlers.set($,Q);for(let[$,Q]of this._progressHandlers)if(!this._pendingProgressHandlers.has($))this._pendingProgressHandlers.set($,Q);this.$state=X0.Starting;try{let $=await this.createConnection();$.onNotification(k.LogMessageNotification.type,(Q)=>{switch(Q.type){case k.MessageType.Error:this.error(Q.message,void 0,!1);break;case k.MessageType.Warning:this.warn(Q.message,void 0,!1);break;case k.MessageType.Info:this.info(Q.message,void 0,!1);break;case k.MessageType.Debug:this.debug(Q.message,void 0,!1);break;default:this.outputChannel.appendLine(Q.message)}}),$.onNotification(k.ShowMessageNotification.type,(Q)=>{switch(Q.type){case k.MessageType.Error:I0.window.showErrorMessage(Q.message);break;case k.MessageType.Warning:I0.window.showWarningMessage(Q.message);break;case k.MessageType.Info:I0.window.showInformationMessage(Q.message);break;default:I0.window.showInformationMessage(Q.message)}}),$.onRequest(k.ShowMessageRequest.type,(Q)=>{let z;switch(Q.type){case k.MessageType.Error:z=I0.window.showErrorMessage;break;case k.MessageType.Warning:z=I0.window.showWarningMessage;break;case k.MessageType.Info:z=I0.window.showInformationMessage;break;default:z=I0.window.showInformationMessage}let G=Q.actions||[];return z(Q.message,...G)}),$.onNotification(k.TelemetryEventNotification.type,(Q)=>{this._telemetryEmitter.fire(Q)}),$.onRequest(k.ShowDocumentRequest.type,async(Q)=>{let z=async(B)=>{let K=this.protocol2CodeConverter.asUri(B.uri);try{if(B.external===!0)return{success:await I0.env.openExternal(K)};else{let A={};if(B.selection!==void 0)A.selection=this.protocol2CodeConverter.asRange(B.selection);if(B.takeFocus===void 0||B.takeFocus===!1)A.preserveFocus=!0;else if(B.takeFocus===!0)A.preserveFocus=!1;return await I0.window.showTextDocument(K,A),{success:!0}}}catch(A){return{success:!1}}},G=this._clientOptions.middleware.window?.showDocument;if(G!==void 0)return G(Q,z);else return z(Q)}),$.listen(),await this.initialize($),J()}catch($){this.$state=X0.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,$,"force"),Y($)}return this._onStart}createOnStartPromise(){let Z,J;return[new Promise(($,Q)=>{Z=$,J=Q}),Z,J]}async initialize(Z){this.refreshTrace(Z,!1);let J=this._clientOptions.initializationOptions,[Y,$]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],Q={processId:null,clientInfo:{name:I0.env.appName,version:I0.version},locale:this.getLocale(),rootPath:Y?Y:null,rootUri:Y?this._c2p.asUri(I0.Uri.file(Y)):null,capabilities:this.computeClientCapabilities(),initializationOptions:V9.func(J)?J():J,trace:k.Trace.toString(this._trace),workspaceFolders:$};if(this.fillInitializeParams(Q),this._clientOptions.progressOnInitialization){let z=V3.generateUuid(),G=new _W.ProgressPart(Z,z);Q.workDoneToken=z;try{let B=await this.doInitialize(Z,Q);return G.done(),B}catch(B){throw G.cancel(),B}}else return this.doInitialize(Z,Q)}async doInitialize(Z,J){try{let Y=await Z.initialize(J);if(Y.capabilities.positionEncoding!==void 0&&Y.capabilities.positionEncoding!==k.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${Y.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=Y,this.$state=X0.Running;let $=void 0;if(V9.number(Y.capabilities.textDocumentSync))if(Y.capabilities.textDocumentSync===k.TextDocumentSyncKind.None)$={openClose:!1,change:k.TextDocumentSyncKind.None,save:void 0};else $={openClose:!0,change:Y.capabilities.textDocumentSync,save:{includeText:!1}};else if(Y.capabilities.textDocumentSync!==void 0&&Y.capabilities.textDocumentSync!==null)$=Y.capabilities.textDocumentSync;this._capabilities=Object.assign({},Y.capabilities,{resolvedTextDocumentSync:$}),Z.onNotification(k.PublishDiagnosticsNotification.type,(Q)=>this.handleDiagnostics(Q)),Z.onRequest(k.RegistrationRequest.type,(Q)=>this.handleRegistrationRequest(Q)),Z.onRequest("client/registerFeature",(Q)=>this.handleRegistrationRequest(Q)),Z.onRequest(k.UnregistrationRequest.type,(Q)=>this.handleUnregistrationRequest(Q)),Z.onRequest("client/unregisterFeature",(Q)=>this.handleUnregistrationRequest(Q)),Z.onRequest(k.ApplyWorkspaceEditRequest.type,(Q)=>this.handleApplyWorkspaceEdit(Q));for(let[Q,z]of this._pendingNotificationHandlers)this._notificationDisposables.set(Q,Z.onNotification(Q,z));this._pendingNotificationHandlers.clear();for(let[Q,z]of this._pendingRequestHandlers)this._requestDisposables.set(Q,Z.onRequest(Q,z));this._pendingRequestHandlers.clear();for(let[Q,z]of this._pendingProgressHandlers)this._progressDisposables.set(Q,Z.onProgress(z.type,Q,z.handler));return this._pendingProgressHandlers.clear(),await Z.sendNotification(k.InitializedNotification.type,{}),this.hookFileEvents(Z),this.hookConfigurationChanged(Z),this.initializeFeatures(Z),Y}catch(Y){if(this._clientOptions.initializationFailedHandler)if(this._clientOptions.initializationFailedHandler(Y))this.initialize(Z);else this.stop();else if(Y instanceof k.ResponseError&&Y.data&&Y.data.retry)I0.window.showErrorMessage(Y.message,{title:"Retry",id:"retry"}).then(($)=>{if($&&$.id==="retry")this.initialize(Z);else this.stop()});else{if(Y&&Y.message)I0.window.showErrorMessage(Y.message);this.error("Server initialization failed.",Y),this.stop()}throw Y}}_clientGetRootPath(){let Z=I0.workspace.workspaceFolders;if(!Z||Z.length===0)return;let J=Z[0];if(J.uri.scheme==="file")return J.uri.fsPath;return}stop(Z=2000){return this.shutdown("stop",Z)}dispose(Z=2000){try{return this._disposed="disposing",this.stop(Z)}finally{this._disposed="disposed"}}async shutdown(Z,J){if(this.$state===X0.Stopped||this.$state===X0.Initial)return;if(this.$state===X0.Stopping)if(this._onStop!==void 0)return this._onStop;else throw new Error("Client is stopping but no stop promise available.");let Y=this.activeConnection();if(Y===void 0||this.$state!==X0.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=X0.Stopping,this.cleanUp(Z);let $=new Promise((z)=>{k.RAL().timer.setTimeout(z,J)}),Q=(async(z)=>{return await z.shutdown(),await z.exit(),z})(Y);return this._onStop=Promise.race([$,Q]).then((z)=>{if(z!==void 0)z.end(),z.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},(z)=>{throw this.error("Stopping server failed",z,!1),z}).finally(()=>{this.$state=X0.Stopped,Z==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(Z){this._fileEvents=[],this._fileEventDelayer.cancel();let J=this._listeners.splice(0,this._listeners.length);for(let Y of J)Y.dispose();if(this._syncedDocuments)this._syncedDocuments.clear();for(let Y of Array.from(this._features.entries()).map(($)=>$[1]).reverse())Y.clear();if(Z==="stop"&&this._diagnostics!==void 0)this._diagnostics.dispose(),this._diagnostics=void 0;if(this._idleInterval!==void 0)this._idleInterval.dispose(),this._idleInterval=void 0}cleanUpChannel(){if(this._outputChannel!==void 0&&this._disposeOutputChannel)this._outputChannel.dispose(),this._outputChannel=void 0}notifyFileEvent(Z){let J=this;async function Y(Q){return J._fileEvents.push(Q),J._fileEventDelayer.trigger(async()=>{await J.sendNotification(k.DidChangeWatchedFilesNotification.type,{changes:J._fileEvents}),J._fileEvents=[]})}let $=this.clientOptions.middleware?.workspace;(($?.didChangeWatchedFile)?$.didChangeWatchedFile(Z,Y):Y(Z)).catch((Q)=>{J.error("Notify file events failed.",Q)})}async sendPendingFullTextDocumentChanges(Z){return this._pendingChangeSemaphore.lock(async()=>{try{let J=this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._pendingOpenNotifications);if(J.length===0)return;for(let Y of J){let $=this.code2ProtocolConverter.asChangeTextDocumentParams(Y);await Z.sendNotification(k.DidChangeTextDocumentNotification.type,$),this._didChangeTextDocumentFeature.notificationSent(Y,k.DidChangeTextDocumentNotification.type,$)}}catch(J){throw this.error("Sending pending changes failed",J,!1),J}})}triggerPendingChangeDelivery(){this._pendingChangeDelayer.trigger(async()=>{let Z=this.activeConnection();if(Z===void 0){this.triggerPendingChangeDelivery();return}await this.sendPendingFullTextDocumentChanges(Z)}).catch((Z)=>this.error("Delivering pending changes failed",Z,!1))}handleDiagnostics(Z){if(!this._diagnostics)return;let J=Z.uri;if(this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===J)this._diagnosticQueueState.tokenSource.cancel();this._diagnosticQueue.set(Z.uri,Z.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){k.RAL().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;let Z=this._diagnosticQueue.entries().next();if(Z.done===!0)return;let[J,Y]=Z.value;this._diagnosticQueue.delete(J);let $=new I0.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:J,tokenSource:$},this._p2c.asDiagnostics(Y,$.token).then((Q)=>{if(!$.token.isCancellationRequested){let z=this._p2c.asUri(J),G=this.clientOptions.middleware;if(G.handleDiagnostics)G.handleDiagnostics(z,Q,(B,K)=>this.setDiagnostics(B,K));else this.setDiagnostics(z,Q)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(Z,J){if(!this._diagnostics)return;this._diagnostics.set(Z,J)}getLocale(){return I0.env.language}async $start(){if(this.$state===X0.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();let Z=this.activeConnection();if(Z===void 0)throw new Error("Starting server failed");return Z}async createConnection(){let Z=($,Q,z)=>{this.handleConnectionError($,Q,z).catch((G)=>this.error("Handling connection error failed",G))},J=()=>{this.handleConnectionClosed().catch(($)=>this.error("Handling connection close failed",$))},Y=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=AA(Y.reader,Y.writer,Z,J,this._clientOptions.connectionOptions),this._connection}async handleConnectionClosed(){if(this.$state===X0.Stopped)return;try{if(this._connection!==void 0)this._connection.dispose()}catch(J){}let Z={action:$6.DoNotRestart};if(this.$state!==X0.Stopping)try{Z=await this._clientOptions.errorHandler.closed()}catch(J){}if(this._connection=void 0,Z.action===$6.DoNotRestart){if(this.error(Z.message??"Connection to server got closed. Server will not be restarted.",void 0,Z.handled===!0?!1:"force"),this.cleanUp("stop"),this.$state===X0.Starting)this.$state=X0.StartFailed;else this.$state=X0.Stopped;this._onStop=Promise.resolve(),this._onStart=void 0}else if(Z.action===$6.Restart)this.info(Z.message??"Connection to server got closed. Server will restart.",!Z.handled),this.cleanUp("restart"),this.$state=X0.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch((J)=>this.error("Restarting server failed",J,"force"))}async handleConnectionError(Z,J,Y){let $=await this._clientOptions.errorHandler.error(Z,J,Y);if($.action===bJ.Shutdown)this.error($.message??`Client ${this._name}: connection to server is erroring.
${Z.message}
Shutting down server.`,void 0,$.handled===!0?!1:"force"),this.stop().catch((Q)=>{this.error("Stopping server failed",Q,!1)});else this.error($.message??`Client ${this._name}: connection to server is erroring.
${Z.message}`,void 0,$.handled===!0?!1:"force")}hookConfigurationChanged(Z){this._listeners.push(I0.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(Z,!0)}))}refreshTrace(Z,J=!1){let Y=I0.workspace.getConfiguration(this._id),$=k.Trace.Off,Q=k.TraceFormat.Text;if(Y){let z=Y.get("trace.server","off");if(typeof z==="string")$=k.Trace.fromString(z);else $=k.Trace.fromString(Y.get("trace.server.verbosity","off")),Q=k.TraceFormat.fromString(Y.get("trace.server.format","text"))}this._trace=$,this._traceFormat=Q,Z.trace(this._trace,this._tracer,{sendNotification:J,traceFormat:this._traceFormat}).catch((z)=>{this.error("Updating trace failed with error",z,!1)})}hookFileEvents(Z){let J=this._clientOptions.synchronize.fileEvents;if(!J)return;let Y;if(V9.array(J))Y=J;else Y=[J];if(!Y)return;this._dynamicFeatures.get(k.DidChangeWatchedFilesNotification.type.method).registerRaw(V3.generateUuid(),Y)}registerFeatures(Z){for(let J of Z)this.registerFeature(J)}registerFeature(Z){if(this._features.push(Z),K9.DynamicFeature.is(Z)){let J=Z.registrationType;this._dynamicFeatures.set(J.method,Z)}}getFeature(Z){return this._dynamicFeatures.get(Z)}hasDedicatedTextSynchronizationFeature(Z){let J=this.getFeature(k.NotebookDocumentSyncRegistrationType.method);if(J===void 0||!(J instanceof W3.NotebookDocumentSyncFeature))return!1;return J.handles(Z)}registerBuiltinFeatures(){let Z=new Map;if(this.registerFeature(new A3.ConfigurationFeature(this)),this.registerFeature(new o6.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this._didChangeTextDocumentFeature=new o6.DidChangeTextDocumentFeature(this,Z),this._didChangeTextDocumentFeature.onPendingChangeAdded(()=>{this.triggerPendingChangeDelivery()}),this.registerFeature(this._didChangeTextDocumentFeature),this.registerFeature(new o6.WillSaveFeature(this)),this.registerFeature(new o6.WillSaveWaitUntilFeature(this)),this.registerFeature(new o6.DidSaveTextDocumentFeature(this)),this.registerFeature(new o6.DidCloseTextDocumentFeature(this,this._syncedDocuments,Z)),this.registerFeature(new oW.FileSystemWatcherFeature(this,(J)=>this.notifyFileEvent(J))),this.registerFeature(new vW.CompletionItemFeature(this)),this.registerFeature(new gW.HoverFeature(this)),this.registerFeature(new mW.SignatureHelpFeature(this)),this.registerFeature(new dW.DefinitionFeature(this)),this.registerFeature(new cW.ReferencesFeature(this)),this.registerFeature(new pW.DocumentHighlightFeature(this)),this.registerFeature(new uW.DocumentSymbolFeature(this)),this.registerFeature(new lW.WorkspaceSymbolFeature(this)),this.registerFeature(new iW.CodeActionFeature(this)),this.registerFeature(new nW.CodeLensFeature(this)),this.registerFeature(new q$.DocumentFormattingFeature(this)),this.registerFeature(new q$.DocumentRangeFormattingFeature(this)),this.registerFeature(new q$.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new aW.RenameFeature(this)),this.registerFeature(new sW.DocumentLinkFeature(this)),this.registerFeature(new rW.ExecuteCommandFeature(this)),this.registerFeature(new A3.SyncConfigurationFeature(this)),this.registerFeature(new ZA.TypeDefinitionFeature(this)),this.registerFeature(new eW.ImplementationFeature(this)),this.registerFeature(new tW.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0)this.registerFeature(new JA.WorkspaceFoldersFeature(this));this.registerFeature(new YA.FoldingRangeFeature(this)),this.registerFeature(new $A.DeclarationFeature(this)),this.registerFeature(new QA.SelectionRangeFeature(this)),this.registerFeature(new zA.ProgressFeature(this)),this.registerFeature(new GA.CallHierarchyFeature(this)),this.registerFeature(new XA.SemanticTokensFeature(this)),this.registerFeature(new BA.LinkedEditingFeature(this)),this.registerFeature(new t6.DidCreateFilesFeature(this)),this.registerFeature(new t6.DidRenameFilesFeature(this)),this.registerFeature(new t6.DidDeleteFilesFeature(this)),this.registerFeature(new t6.WillCreateFilesFeature(this)),this.registerFeature(new t6.WillRenameFilesFeature(this)),this.registerFeature(new t6.WillDeleteFilesFeature(this)),this.registerFeature(new jA.TypeHierarchyFeature(this)),this.registerFeature(new KA.InlineValueFeature(this)),this.registerFeature(new VA.InlayHintsFeature(this)),this.registerFeature(new kW.DiagnosticFeature(this)),this.registerFeature(new W3.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(S$.createAll(this))}fillInitializeParams(Z){for(let J of this._features)if(V9.func(J.fillInitializeParams))J.fillInitializeParams(Z)}computeClientCapabilities(){let Z={};K9.ensure(Z,"workspace").applyEdit=!0;let J=K9.ensure(K9.ensure(Z,"workspace"),"workspaceEdit");J.documentChanges=!0,J.resourceOperations=[k.ResourceOperationKind.Create,k.ResourceOperationKind.Rename,k.ResourceOperationKind.Delete],J.failureHandling=k.FailureHandlingKind.TextOnlyTransactional,J.normalizesLineEndings=!0,J.changeAnnotationSupport={groupsOnLabel:!0};let Y=K9.ensure(K9.ensure(Z,"textDocument"),"publishDiagnostics");Y.relatedInformation=!0,Y.versionSupport=!1,Y.tagSupport={valueSet:[k.DiagnosticTag.Unnecessary,k.DiagnosticTag.Deprecated]},Y.codeDescriptionSupport=!0,Y.dataSupport=!0;let $=K9.ensure(Z,"window"),Q=K9.ensure($,"showMessage");Q.messageActionItem={additionalPropertiesSupport:!0};let z=K9.ensure($,"showDocument");z.support=!0;let G=K9.ensure(Z,"general");if(G.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(w6.RequestsToCancelOnContentModified)},G.regularExpressions={engine:"ECMAScript",version:"ES2020"},G.markdown={parser:"marked",version:"1.1.0"},G.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml)G.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"];for(let B of this._features)B.fillClientCapabilities(Z);return Z}initializeFeatures(Z){let J=this._clientOptions.documentSelector;for(let Y of this._features)if(V9.func(Y.preInitialize))Y.preInitialize(this._capabilities,J);for(let Y of this._features)Y.initialize(this._capabilities,J)}async handleRegistrationRequest(Z){let J=this.clientOptions.middleware?.handleRegisterCapability;if(J)return J(Z,(Y)=>this.doRegisterCapability(Y));else return this.doRegisterCapability(Z)}async doRegisterCapability(Z){if(!this.isRunning()){for(let J of Z.registrations)this._ignoredRegistrations.add(J.id);return}for(let J of Z.registrations){let Y=this._dynamicFeatures.get(J.method);if(Y===void 0)return Promise.reject(new Error(`No feature implementation for ${J.method} found. Registration failed.`));let $=J.registerOptions??{};$.documentSelector=$.documentSelector??this._clientOptions.documentSelector;let Q={id:J.id,registerOptions:$};try{Y.register(Q)}catch(z){return Promise.reject(z)}}}async handleUnregistrationRequest(Z){let J=this.clientOptions.middleware?.handleUnregisterCapability;if(J)return J(Z,(Y)=>this.doUnregisterCapability(Y));else return this.doUnregisterCapability(Z)}async doUnregisterCapability(Z){for(let J of Z.unregisterations){if(this._ignoredRegistrations.has(J.id))continue;let Y=this._dynamicFeatures.get(J.method);if(!Y)return Promise.reject(new Error(`No feature implementation for ${J.method} found. Unregistration failed.`));Y.unregister(J.id)}}async handleApplyWorkspaceEdit(Z){let J=Z.edit,Y=await this.workspaceEditLock.lock(()=>{return this._p2c.asWorkspaceEdit(J)}),$=new Map;I0.workspace.textDocuments.forEach((z)=>$.set(z.uri.toString(),z));let Q=!1;if(J.documentChanges){for(let z of J.documentChanges)if(k.TextDocumentEdit.is(z)&&z.textDocument.version&&z.textDocument.version>=0){let G=this._p2c.asUri(z.textDocument.uri).toString(),B=$.get(G);if(B&&B.version!==z.textDocument.version){Q=!0;break}}}if(Q)return Promise.resolve({applied:!1});return V9.asPromise(I0.workspace.applyEdit(Y).then((z)=>{return{applied:z}}))}handleFailedRequest(Z,J,Y,$,Q=!0){if(Y instanceof k.ResponseError){if(Y.code===k.ErrorCodes.PendingResponseRejected||Y.code===k.ErrorCodes.ConnectionInactive)return $;if(Y.code===k.LSPErrorCodes.RequestCancelled||Y.code===k.LSPErrorCodes.ServerCancelled)if(J!==void 0&&J.isCancellationRequested)return $;else if(Y.data!==void 0)throw new K9.LSPCancellationError(Y.data);else throw new I0.CancellationError;else if(Y.code===k.LSPErrorCodes.ContentModified)if(w6.RequestsToCancelOnContentModified.has(Z.method)||w6.CancellableResolveCalls.has(Z.method))throw new I0.CancellationError;else return $}throw this.error(`Request ${Z.method} failed.`,Y,Q),Y}}GZ.BaseLanguageClient=w6;w6.RequestsToCancelOnContentModified=new Set([k.SemanticTokensRequest.method,k.SemanticTokensRangeRequest.method,k.SemanticTokensDeltaRequest.method]);w6.CancellableResolveCalls=new Set([k.CompletionResolveRequest.method,k.CodeLensResolveRequest.method,k.CodeActionResolveRequest.method,k.InlayHintResolveRequest.method,k.DocumentLinkResolveRequest.method,k.WorkspaceSymbolResolveRequest.method]);class E3{error(Z){k.RAL().console.error(Z)}warn(Z){k.RAL().console.warn(Z)}info(Z){k.RAL().console.info(Z)}log(Z){k.RAL().console.log(Z)}}function AA(Z,J,Y,$,Q){let z=new E3,G=k.createProtocolConnection(Z,J,z,Q);return G.onError((K)=>{Y(K[0],K[1],K[2])}),G.onClose($),{listen:()=>G.listen(),sendRequest:G.sendRequest,onRequest:G.onRequest,hasPendingResponse:G.hasPendingResponse,sendNotification:G.sendNotification,onNotification:G.onNotification,onProgress:G.onProgress,sendProgress:G.sendProgress,trace:(K,A,O)=>{let F={sendNotification:!1,traceFormat:k.TraceFormat.Text};if(O===void 0)return G.trace(K,A,F);else if(V9.boolean(O))return G.trace(K,A,O);else return G.trace(K,A,O)},initialize:(K)=>{return G.sendRequest(k.InitializeRequest.type,K)},shutdown:()=>{return G.sendRequest(k.ShutdownRequest.type,void 0)},exit:()=>{return G.sendNotification(k.ExitNotification.type)},end:()=>G.end(),dispose:()=>G.dispose()}}var S$;(function(Z){function J(Y){return[new WA.InlineCompletionItemFeature(Y)]}Z.createAll=J})(S$||(GZ.ProposedFeatures=S$={}))});var U3=D((W4)=>{var __dirname="/Users/jem/dojo/markdownrealcode/vsix/node_modules/vscode-languageclient/lib/node";Object.defineProperty(W4,"__esModule",{value:!0});W4.terminate=void 0;var L3=require("child_process"),HA=require("path"),OA=process.platform==="win32",NA=process.platform==="darwin",EA=process.platform==="linux";function LA(Z,J){if(OA)try{let Q={stdio:["pipe","pipe","ignore"]};if(J)Q.cwd=J;return L3.execFileSync("taskkill",["/T","/F","/PID",Z.pid.toString()],Q),!0}catch(Q){return!1}else if(EA||NA)try{var Y=HA.join(__dirname,"terminateProcess.sh"),$=L3.spawnSync(Y,[Z.pid.toString()]);return $.error?!1:!0}catch(Q){return!1}else return Z.kill("SIGKILL"),!0}W4.terminate=LA});var b$=D((SN,w3)=>{w3.exports=Z0()});var yJ=D((DN,F3)=>{var UA=typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...Z)=>console.error("SEMVER",...Z):()=>{};F3.exports=UA});var A4=D((bN,P3)=>{var wA=Number.MAX_SAFE_INTEGER||9007199254740991,FA=["major","premajor","minor","preminor","patch","prepatch","prerelease"];P3.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:wA,RELEASE_TYPES:FA,SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var H4=D((q9,M3)=>{var{MAX_SAFE_COMPONENT_LENGTH:y$,MAX_SAFE_BUILD_LENGTH:PA,MAX_LENGTH:MA}=A4(),IA=yJ();q9=M3.exports={};var TA=q9.re=[],qA=q9.safeRe=[],l=q9.src=[],CA=q9.safeSrc=[],c=q9.t={},SA=0,R$="[a-zA-Z0-9-]",DA=[["\\s",1],["\\d",MA],[R$,PA]],bA=(Z)=>{for(let[J,Y]of DA)Z=Z.split(`${J}*`).join(`${J}{0,${Y}}`).split(`${J}+`).join(`${J}{1,${Y}}`);return Z},Q0=(Z,J,Y)=>{let $=bA(J),Q=SA++;IA(Z,Q,J),c[Z]=Q,l[Q]=J,CA[Q]=$,TA[Q]=new RegExp(J,Y?"g":void 0),qA[Q]=new RegExp($,Y?"g":void 0)};Q0("NUMERICIDENTIFIER","0|[1-9]\\d*");Q0("NUMERICIDENTIFIERLOOSE","\\d+");Q0("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${R$}*`);Q0("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`);Q0("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`);Q0("PRERELEASEIDENTIFIER",`(?:${l[c.NUMERICIDENTIFIER]}|${l[c.NONNUMERICIDENTIFIER]})`);Q0("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NUMERICIDENTIFIERLOOSE]}|${l[c.NONNUMERICIDENTIFIER]})`);Q0("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`);Q0("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`);Q0("BUILDIDENTIFIER",`${R$}+`);Q0("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`);Q0("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`);Q0("FULL",`^${l[c.FULLPLAIN]}$`);Q0("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`);Q0("LOOSE",`^${l[c.LOOSEPLAIN]}$`);Q0("GTLT","((?:<|>)?=?)");Q0("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Q0("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`);Q0("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`);Q0("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`);Q0("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`);Q0("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`);Q0("COERCEPLAIN",`(^|[^\\d])(\\d{1,${y$}})(?:\\.(\\d{1,${y$}}))?(?:\\.(\\d{1,${y$}}))?`);Q0("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`);Q0("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`);Q0("COERCERTL",l[c.COERCE],!0);Q0("COERCERTLFULL",l[c.COERCEFULL],!0);Q0("LONETILDE","(?:~>?)");Q0("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0);q9.tildeTrimReplace="$1~";Q0("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`);Q0("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`);Q0("LONECARET","(?:\\^)");Q0("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0);q9.caretTrimReplace="$1^";Q0("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`);Q0("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`);Q0("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`);Q0("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`);Q0("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0);q9.comparatorTrimReplace="$1$2$3";Q0("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`);Q0("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`);Q0("STAR","(<|>)?=?\\s*\\*");Q0("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Q0("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var O4=D((yN,I3)=>{var yA=Object.freeze({loose:!0}),RA=Object.freeze({}),hA=(Z)=>{if(!Z)return RA;if(typeof Z!=="object")return yA;return Z};I3.exports=hA});var S3=D((RN,C3)=>{var T3=/^[0-9]+$/,q3=(Z,J)=>{let Y=T3.test(Z),$=T3.test(J);if(Y&&$)Z=+Z,J=+J;return Z===J?0:Y&&!$?-1:$&&!Y?1:Z<J?-1:1},xA=(Z,J)=>q3(J,Z);C3.exports={compareIdentifiers:q3,rcompareIdentifiers:xA}});var RJ=D((hN,R3)=>{var N4=yJ(),{MAX_LENGTH:D3,MAX_SAFE_INTEGER:E4}=A4(),{safeRe:b3,safeSrc:y3,t:L4}=H4(),fA=O4(),{compareIdentifiers:e6}=S3();class W9{constructor(Z,J){if(J=fA(J),Z instanceof W9)if(Z.loose===!!J.loose&&Z.includePrerelease===!!J.includePrerelease)return Z;else Z=Z.version;else if(typeof Z!=="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof Z}".`);if(Z.length>D3)throw new TypeError(`version is longer than ${D3} characters`);N4("SemVer",Z,J),this.options=J,this.loose=!!J.loose,this.includePrerelease=!!J.includePrerelease;let Y=Z.trim().match(J.loose?b3[L4.LOOSE]:b3[L4.FULL]);if(!Y)throw new TypeError(`Invalid Version: ${Z}`);if(this.raw=Z,this.major=+Y[1],this.minor=+Y[2],this.patch=+Y[3],this.major>E4||this.major<0)throw new TypeError("Invalid major version");if(this.minor>E4||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>E4||this.patch<0)throw new TypeError("Invalid patch version");if(!Y[4])this.prerelease=[];else this.prerelease=Y[4].split(".").map(($)=>{if(/^[0-9]+$/.test($)){let Q=+$;if(Q>=0&&Q<E4)return Q}return $});this.build=Y[5]?Y[5].split("."):[],this.format()}format(){if(this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length)this.version+=`-${this.prerelease.join(".")}`;return this.version}toString(){return this.version}compare(Z){if(N4("SemVer.compare",this.version,this.options,Z),!(Z instanceof W9)){if(typeof Z==="string"&&Z===this.version)return 0;Z=new W9(Z,this.options)}if(Z.version===this.version)return 0;return this.compareMain(Z)||this.comparePre(Z)}compareMain(Z){if(!(Z instanceof W9))Z=new W9(Z,this.options);return e6(this.major,Z.major)||e6(this.minor,Z.minor)||e6(this.patch,Z.patch)}comparePre(Z){if(!(Z instanceof W9))Z=new W9(Z,this.options);if(this.prerelease.length&&!Z.prerelease.length)return-1;else if(!this.prerelease.length&&Z.prerelease.length)return 1;else if(!this.prerelease.length&&!Z.prerelease.length)return 0;let J=0;do{let Y=this.prerelease[J],$=Z.prerelease[J];if(N4("prerelease compare",J,Y,$),Y===void 0&&$===void 0)return 0;else if($===void 0)return 1;else if(Y===void 0)return-1;else if(Y===$)continue;else return e6(Y,$)}while(++J)}compareBuild(Z){if(!(Z instanceof W9))Z=new W9(Z,this.options);let J=0;do{let Y=this.build[J],$=Z.build[J];if(N4("build compare",J,Y,$),Y===void 0&&$===void 0)return 0;else if($===void 0)return 1;else if(Y===void 0)return-1;else if(Y===$)continue;else return e6(Y,$)}while(++J)}inc(Z,J,Y){if(Z.startsWith("pre")){if(!J&&Y===!1)throw new Error("invalid increment argument: identifier is empty");if(J){let $=new RegExp(`^${this.options.loose?y3[L4.PRERELEASELOOSE]:y3[L4.PRERELEASE]}$`),Q=`-${J}`.match($);if(!Q||Q[1]!==J)throw new Error(`invalid identifier: ${J}`)}}switch(Z){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",J,Y);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",J,Y);break;case"prepatch":this.prerelease.length=0,this.inc("patch",J,Y),this.inc("pre",J,Y);break;case"prerelease":if(this.prerelease.length===0)this.inc("patch",J,Y);this.inc("pre",J,Y);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0)this.major++;this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0)this.minor++;this.patch=0,this.prerelease=[];break;case"patch":if(this.prerelease.length===0)this.patch++;this.prerelease=[];break;case"pre":{let $=Number(Y)?1:0;if(this.prerelease.length===0)this.prerelease=[$];else{let Q=this.prerelease.length;while(--Q>=0)if(typeof this.prerelease[Q]==="number")this.prerelease[Q]++,Q=-2;if(Q===-1){if(J===this.prerelease.join(".")&&Y===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push($)}}if(J){let Q=[J,$];if(Y===!1)Q=[J];if(e6(this.prerelease[0],J)===0){if(isNaN(this.prerelease[1]))this.prerelease=Q}else this.prerelease=Q}break}default:throw new Error(`invalid increment argument: ${Z}`)}if(this.raw=this.format(),this.build.length)this.raw+=`+${this.build.join(".")}`;return this}}R3.exports=W9});var f3=D((xN,x3)=>{var h3=RJ(),_A=(Z,J,Y=!1)=>{if(Z instanceof h3)return Z;try{return new h3(Z,J)}catch($){if(!Y)return null;throw $}};x3.exports=_A});var v3=D((fN,k3)=>{class _3{constructor(){this.max=1000,this.map=new Map}get(Z){let J=this.map.get(Z);if(J===void 0)return;else return this.map.delete(Z),this.map.set(Z,J),J}delete(Z){return this.map.delete(Z)}set(Z,J){if(!this.delete(Z)&&J!==void 0){if(this.map.size>=this.max){let $=this.map.keys().next().value;this.delete($)}this.map.set(Z,J)}return this}}k3.exports=_3});var F6=D((_N,d3)=>{var g3=RJ(),kA=(Z,J,Y)=>new g3(Z,Y).compare(new g3(J,Y));d3.exports=kA});var p3=D((kN,m3)=>{var vA=F6(),gA=(Z,J,Y)=>vA(Z,J,Y)===0;m3.exports=gA});var l3=D((vN,u3)=>{var dA=F6(),mA=(Z,J,Y)=>dA(Z,J,Y)!==0;u3.exports=mA});var i3=D((gN,c3)=>{var pA=F6(),uA=(Z,J,Y)=>pA(Z,J,Y)>0;c3.exports=uA});var a3=D((dN,n3)=>{var lA=F6(),cA=(Z,J,Y)=>lA(Z,J,Y)>=0;n3.exports=cA});var r3=D((mN,s3)=>{var iA=F6(),nA=(Z,J,Y)=>iA(Z,J,Y)<0;s3.exports=nA});var t3=D((pN,o3)=>{var aA=F6(),sA=(Z,J,Y)=>aA(Z,J,Y)<=0;o3.exports=sA});var Zj=D((uN,e3)=>{var rA=p3(),oA=l3(),tA=i3(),eA=a3(),ZH=r3(),JH=t3(),YH=(Z,J,Y,$)=>{switch(J){case"===":if(typeof Z==="object")Z=Z.version;if(typeof Y==="object")Y=Y.version;return Z===Y;case"!==":if(typeof Z==="object")Z=Z.version;if(typeof Y==="object")Y=Y.version;return Z!==Y;case"":case"=":case"==":return rA(Z,Y,$);case"!=":return oA(Z,Y,$);case">":return tA(Z,Y,$);case">=":return eA(Z,Y,$);case"<":return ZH(Z,Y,$);case"<=":return JH(Z,Y,$);default:throw new TypeError(`Invalid operator: ${J}`)}};e3.exports=YH});var Xj=D((lN,Gj)=>{var hJ=Symbol("SemVer ANY");class U4{static get ANY(){return hJ}constructor(Z,J){if(J=Jj(J),Z instanceof U4)if(Z.loose===!!J.loose)return Z;else Z=Z.value;if(Z=Z.trim().split(/\s+/).join(" "),x$("comparator",Z,J),this.options=J,this.loose=!!J.loose,this.parse(Z),this.semver===hJ)this.value="";else this.value=this.operator+this.semver.version;x$("comp",this)}parse(Z){let J=this.options.loose?Yj[$j.COMPARATORLOOSE]:Yj[$j.COMPARATOR],Y=Z.match(J);if(!Y)throw new TypeError(`Invalid comparator: ${Z}`);if(this.operator=Y[1]!==void 0?Y[1]:"",this.operator==="=")this.operator="";if(!Y[2])this.semver=hJ;else this.semver=new Qj(Y[2],this.options.loose)}toString(){return this.value}test(Z){if(x$("Comparator.test",Z,this.options.loose),this.semver===hJ||Z===hJ)return!0;if(typeof Z==="string")try{Z=new Qj(Z,this.options)}catch(J){return!1}return h$(Z,this.operator,this.semver,this.options)}intersects(Z,J){if(!(Z instanceof U4))throw new TypeError("a Comparator is required");if(this.operator===""){if(this.value==="")return!0;return new zj(Z.value,J).test(this.value)}else if(Z.operator===""){if(Z.value==="")return!0;return new zj(this.value,J).test(Z.semver)}if(J=Jj(J),J.includePrerelease&&(this.value==="<0.0.0-0"||Z.value==="<0.0.0-0"))return!1;if(!J.includePrerelease&&(this.value.startsWith("<0.0.0")||Z.value.startsWith("<0.0.0")))return!1;if(this.operator.startsWith(">")&&Z.operator.startsWith(">"))return!0;if(this.operator.startsWith("<")&&Z.operator.startsWith("<"))return!0;if(this.semver.version===Z.semver.version&&this.operator.includes("=")&&Z.operator.includes("="))return!0;if(h$(this.semver,"<",Z.semver,J)&&this.operator.startsWith(">")&&Z.operator.startsWith("<"))return!0;if(h$(this.semver,">",Z.semver,J)&&this.operator.startsWith("<")&&Z.operator.startsWith(">"))return!0;return!1}}Gj.exports=U4;var Jj=O4(),{safeRe:Yj,t:$j}=H4(),h$=Zj(),x$=yJ(),Qj=RJ(),zj=f$()});var f$=D((cN,Vj)=>{var $H=/\s+/g;class xJ{constructor(Z,J){if(J=zH(J),Z instanceof xJ)if(Z.loose===!!J.loose&&Z.includePrerelease===!!J.includePrerelease)return Z;else return new xJ(Z.raw,J);if(Z instanceof _$)return this.raw=Z.value,this.set=[[Z]],this.formatted=void 0,this;if(this.options=J,this.loose=!!J.loose,this.includePrerelease=!!J.includePrerelease,this.raw=Z.trim().replace($H," "),this.set=this.raw.split("||").map((Y)=>this.parseRange(Y.trim())).filter((Y)=>Y.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let Y=this.set[0];if(this.set=this.set.filter(($)=>!jj($[0])),this.set.length===0)this.set=[Y];else if(this.set.length>1){for(let $ of this.set)if($.length===1&&WH($[0])){this.set=[$];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let Z=0;Z<this.set.length;Z++){if(Z>0)this.formatted+="||";let J=this.set[Z];for(let Y=0;Y<J.length;Y++){if(Y>0)this.formatted+=" ";this.formatted+=J[Y].toString().trim()}}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(Z){let Y=((this.options.includePrerelease&&KH)|(this.options.loose&&VH))+":"+Z,$=Bj.get(Y);if($)return $;let Q=this.options.loose,z=Q?fZ[IZ.HYPHENRANGELOOSE]:fZ[IZ.HYPHENRANGE];Z=Z.replace(z,PH(this.options.includePrerelease)),x0("hyphen replace",Z),Z=Z.replace(fZ[IZ.COMPARATORTRIM],XH),x0("comparator trim",Z),Z=Z.replace(fZ[IZ.TILDETRIM],BH),x0("tilde trim",Z),Z=Z.replace(fZ[IZ.CARETTRIM],jH),x0("caret trim",Z);let G=Z.split(" ").map((O)=>AH(O,this.options)).join(" ").split(/\s+/).map((O)=>FH(O,this.options));if(Q)G=G.filter((O)=>{return x0("loose invalid filter",O,this.options),!!O.match(fZ[IZ.COMPARATORLOOSE])});x0("range list",G);let B=new Map,K=G.map((O)=>new _$(O,this.options));for(let O of K){if(jj(O))return[O];B.set(O.value,O)}if(B.size>1&&B.has(""))B.delete("");let A=[...B.values()];return Bj.set(Y,A),A}intersects(Z,J){if(!(Z instanceof xJ))throw new TypeError("a Range is required");return this.set.some((Y)=>{return Kj(Y,J)&&Z.set.some(($)=>{return Kj($,J)&&Y.every((Q)=>{return $.every((z)=>{return Q.intersects(z,J)})})})})}test(Z){if(!Z)return!1;if(typeof Z==="string")try{Z=new GH(Z,this.options)}catch(J){return!1}for(let J=0;J<this.set.length;J++)if(MH(this.set[J],Z,this.options))return!0;return!1}}Vj.exports=xJ;var QH=v3(),Bj=new QH,zH=O4(),_$=Xj(),x0=yJ(),GH=RJ(),{safeRe:fZ,t:IZ,comparatorTrimReplace:XH,tildeTrimReplace:BH,caretTrimReplace:jH}=H4(),{FLAG_INCLUDE_PRERELEASE:KH,FLAG_LOOSE:VH}=A4(),jj=(Z)=>Z.value==="<0.0.0-0",WH=(Z)=>Z.value==="",Kj=(Z,J)=>{let Y=!0,$=Z.slice(),Q=$.pop();while(Y&&$.length)Y=$.every((z)=>{return Q.intersects(z,J)}),Q=$.pop();return Y},AH=(Z,J)=>{return x0("comp",Z,J),Z=NH(Z,J),x0("caret",Z),Z=HH(Z,J),x0("tildes",Z),Z=LH(Z,J),x0("xrange",Z),Z=wH(Z,J),x0("stars",Z),Z},TZ=(Z)=>!Z||Z.toLowerCase()==="x"||Z==="*",HH=(Z,J)=>{return Z.trim().split(/\s+/).map((Y)=>OH(Y,J)).join(" ")},OH=(Z,J)=>{let Y=J.loose?fZ[IZ.TILDELOOSE]:fZ[IZ.TILDE];return Z.replace(Y,($,Q,z,G,B)=>{x0("tilde",Z,$,Q,z,G,B);let K;if(TZ(Q))K="";else if(TZ(z))K=`>=${Q}.0.0 <${+Q+1}.0.0-0`;else if(TZ(G))K=`>=${Q}.${z}.0 <${Q}.${+z+1}.0-0`;else if(B)x0("replaceTilde pr",B),K=`>=${Q}.${z}.${G}-${B} <${Q}.${+z+1}.0-0`;else K=`>=${Q}.${z}.${G} <${Q}.${+z+1}.0-0`;return x0("tilde return",K),K})},NH=(Z,J)=>{return Z.trim().split(/\s+/).map((Y)=>EH(Y,J)).join(" ")},EH=(Z,J)=>{x0("caret",Z,J);let Y=J.loose?fZ[IZ.CARETLOOSE]:fZ[IZ.CARET],$=J.includePrerelease?"-0":"";return Z.replace(Y,(Q,z,G,B,K)=>{x0("caret",Z,Q,z,G,B,K);let A;if(TZ(z))A="";else if(TZ(G))A=`>=${z}.0.0${$} <${+z+1}.0.0-0`;else if(TZ(B))if(z==="0")A=`>=${z}.${G}.0${$} <${z}.${+G+1}.0-0`;else A=`>=${z}.${G}.0${$} <${+z+1}.0.0-0`;else if(K)if(x0("replaceCaret pr",K),z==="0")if(G==="0")A=`>=${z}.${G}.${B}-${K} <${z}.${G}.${+B+1}-0`;else A=`>=${z}.${G}.${B}-${K} <${z}.${+G+1}.0-0`;else A=`>=${z}.${G}.${B}-${K} <${+z+1}.0.0-0`;else if(x0("no pr"),z==="0")if(G==="0")A=`>=${z}.${G}.${B}${$} <${z}.${G}.${+B+1}-0`;else A=`>=${z}.${G}.${B}${$} <${z}.${+G+1}.0-0`;else A=`>=${z}.${G}.${B} <${+z+1}.0.0-0`;return x0("caret return",A),A})},LH=(Z,J)=>{return x0("replaceXRanges",Z,J),Z.split(/\s+/).map((Y)=>UH(Y,J)).join(" ")},UH=(Z,J)=>{Z=Z.trim();let Y=J.loose?fZ[IZ.XRANGELOOSE]:fZ[IZ.XRANGE];return Z.replace(Y,($,Q,z,G,B,K)=>{x0("xRange",Z,$,Q,z,G,B,K);let A=TZ(z),O=A||TZ(G),F=O||TZ(B),L=F;if(Q==="="&&L)Q="";if(K=J.includePrerelease?"-0":"",A)if(Q===">"||Q==="<")$="<0.0.0-0";else $="*";else if(Q&&L){if(O)G=0;if(B=0,Q===">")if(Q=">=",O)z=+z+1,G=0,B=0;else G=+G+1,B=0;else if(Q==="<=")if(Q="<",O)z=+z+1;else G=+G+1;if(Q==="<")K="-0";$=`${Q+z}.${G}.${B}${K}`}else if(O)$=`>=${z}.0.0${K} <${+z+1}.0.0-0`;else if(F)$=`>=${z}.${G}.0${K} <${z}.${+G+1}.0-0`;return x0("xRange return",$),$})},wH=(Z,J)=>{return x0("replaceStars",Z,J),Z.trim().replace(fZ[IZ.STAR],"")},FH=(Z,J)=>{return x0("replaceGTE0",Z,J),Z.trim().replace(fZ[J.includePrerelease?IZ.GTE0PRE:IZ.GTE0],"")},PH=(Z)=>(J,Y,$,Q,z,G,B,K,A,O,F,L)=>{if(TZ($))Y="";else if(TZ(Q))Y=`>=${$}.0.0${Z?"-0":""}`;else if(TZ(z))Y=`>=${$}.${Q}.0${Z?"-0":""}`;else if(G)Y=`>=${Y}`;else Y=`>=${Y}${Z?"-0":""}`;if(TZ(A))K="";else if(TZ(O))K=`<${+A+1}.0.0-0`;else if(TZ(F))K=`<${A}.${+O+1}.0-0`;else if(L)K=`<=${A}.${O}.${F}-${L}`;else if(Z)K=`<${A}.${O}.${+F+1}-0`;else K=`<=${K}`;return`${Y} ${K}`.trim()},MH=(Z,J,Y)=>{for(let $=0;$<Z.length;$++)if(!Z[$].test(J))return!1;if(J.prerelease.length&&!Y.includePrerelease){for(let $=0;$<Z.length;$++){if(x0(Z[$].semver),Z[$].semver===_$.ANY)continue;if(Z[$].semver.prerelease.length>0){let Q=Z[$].semver;if(Q.major===J.major&&Q.minor===J.minor&&Q.patch===J.patch)return!0}}return!1}return!0}});var Aj=D((iN,Wj)=>{var IH=f$(),TH=(Z,J,Y)=>{try{J=new IH(J,Y)}catch($){return!1}return J.test(Z)};Wj.exports=TH});var Oj=D((lZ)=>{var qH=lZ&&lZ.__createBinding||(Object.create?function(Z,J,Y,$){if($===void 0)$=Y;var Q=Object.getOwnPropertyDescriptor(J,Y);if(!Q||("get"in Q?!J.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return J[Y]}};Object.defineProperty(Z,$,Q)}:function(Z,J,Y,$){if($===void 0)$=Y;Z[$]=J[Y]}),k$=lZ&&lZ.__exportStar||function(Z,J){for(var Y in Z)if(Y!=="default"&&!Object.prototype.hasOwnProperty.call(J,Y))qH(J,Z,Y)};Object.defineProperty(lZ,"__esModule",{value:!0});lZ.DiagnosticPullMode=lZ.vsdiag=void 0;k$(Z0(),lZ);k$(N0(),lZ);var Hj=p8();Object.defineProperty(lZ,"vsdiag",{enumerable:!0,get:function(){return Hj.vsdiag}});Object.defineProperty(lZ,"DiagnosticPullMode",{enumerable:!0,get:function(){return Hj.DiagnosticPullMode}});k$(D$(),lZ)});var Fj=D((_Z)=>{var CH=_Z&&_Z.__createBinding||(Object.create?function(Z,J,Y,$){if($===void 0)$=Y;var Q=Object.getOwnPropertyDescriptor(J,Y);if(!Q||("get"in Q?!J.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return J[Y]}};Object.defineProperty(Z,$,Q)}:function(Z,J,Y,$){if($===void 0)$=Y;Z[$]=J[Y]}),Lj=_Z&&_Z.__exportStar||function(Z,J){for(var Y in Z)if(Y!=="default"&&!Object.prototype.hasOwnProperty.call(J,Y))CH(J,Z,Y)};Object.defineProperty(_Z,"__esModule",{value:!0});_Z.SettingMonitor=_Z.LanguageClient=_Z.TransportKind=void 0;var v9=require("child_process"),v$=require("fs"),g$=require("path"),z6=require("vscode"),d0=aZ(),Nj=D$(),SH=U3(),u0=b$(),DH=f3(),bH=Aj();Lj(b$(),_Z);Lj(Oj(),_Z);var Ej="^1.82.0",l0;(function(Z){Z[Z.stdio=0]="stdio",Z[Z.ipc=1]="ipc",Z[Z.pipe=2]="pipe",Z[Z.socket=3]="socket"})(l0||(_Z.TransportKind=l0={}));var Q6;(function(Z){function J(Y){let $=Y;return $&&$.kind===l0.socket&&d0.number($.port)}Z.isSocket=J})(Q6||(Q6={}));var d$;(function(Z){function J(Y){return d0.string(Y.command)}Z.is=J})(d$||(d$={}));var m$;(function(Z){function J(Y){return d0.string(Y.module)}Z.is=J})(m$||(m$={}));var p$;(function(Z){function J(Y){let $=Y;return $&&$.writer!==void 0&&$.reader!==void 0}Z.is=J})(p$||(p$={}));var u$;(function(Z){function J(Y){let $=Y;return $&&$.process!==void 0&&typeof $.detached==="boolean"}Z.is=J})(u$||(u$={}));class Uj extends Nj.BaseLanguageClient{constructor(Z,J,Y,$,Q){let z,G,B,K,A;if(d0.string(J))z=Z,G=J,B=Y,K=$,A=!!Q;else z=Z.toLowerCase(),G=Z,B=J,K=Y,A=$;if(A===void 0)A=!1;super(z,G,K);this._serverOptions=B,this._forceDebug=A,this._isInDebugMode=A;try{this.checkVersion()}catch(O){if(d0.string(O.message))this.outputChannel.appendLine(O.message);throw O}}checkVersion(){let Z=DH(z6.version);if(!Z)throw new Error(`No valid VS Code version detected. Version string is: ${z6.version}`);if(Z.prerelease&&Z.prerelease.length>0)Z.prerelease=[];if(!bH(Z,Ej))throw new Error(`The language client requires VS Code version ${Ej} but received version ${z6.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){if(await this.stop(),this.isInDebugMode)await new Promise((Z)=>setTimeout(Z,1000)),await this.start();else await this.start()}stop(Z=2000){return super.stop(Z).finally(()=>{if(this._serverProcess){let J=this._serverProcess;if(this._serverProcess=void 0,this._isDetached===void 0||!this._isDetached)this.checkProcessDied(J);this._isDetached=void 0}})}checkProcessDied(Z){if(!Z||Z.pid===void 0)return;setTimeout(()=>{try{if(Z.pid!==void 0)process.kill(Z.pid,0),SH.terminate(Z)}catch(J){}},2000)}handleConnectionClosed(){return this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(Z){if(super.fillInitializeParams(Z),Z.processId===null)Z.processId=process.pid}createMessageTransports(Z){function J(A,O){if(!A&&!O)return;let F=Object.create(null);if(Object.keys(process.env).forEach((L)=>F[L]=process.env[L]),O)F.ELECTRON_RUN_AS_NODE="1",F.ELECTRON_NO_ASAR="1";if(A)Object.keys(A).forEach((L)=>F[L]=A[L]);return F}let Y=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],$=["--debug","--debug-brk","--inspect","--inspect-brk"];function Q(){let A=process.execArgv;if(A)return A.some((O)=>{return Y.some((F)=>O.startsWith(F))||$.some((F)=>O===F)});return!1}function z(A){if(A.stdin===null||A.stdout===null||A.stderr===null)throw new Error("Process created without stdio streams")}let G=this._serverOptions;if(d0.func(G))return G().then((A)=>{if(Nj.MessageTransports.is(A))return this._isDetached=!!A.detached,A;else if(p$.is(A))return this._isDetached=!!A.detached,{reader:new u0.StreamMessageReader(A.reader),writer:new u0.StreamMessageWriter(A.writer)};else{let O;if(u$.is(A))O=A.process,this._isDetached=A.detached;else O=A,this._isDetached=!1;return O.stderr.on("data",(F)=>this.outputChannel.append(d0.string(F)?F:F.toString(Z))),{reader:new u0.StreamMessageReader(O.stdout),writer:new u0.StreamMessageWriter(O.stdin)}}});let B,K=G;if(K.run||K.debug)if(this._forceDebug||Q())B=K.debug,this._isInDebugMode=!0;else B=K.run,this._isInDebugMode=!1;else B=G;return this._getServerWorkingDir(B.options).then((A)=>{if(m$.is(B)&&B.module){let O=B,F=O.transport||l0.stdio;if(O.runtime){let L=[],E=O.options??Object.create(null);if(E.execArgv)E.execArgv.forEach((f)=>L.push(f));if(L.push(O.module),O.args)O.args.forEach((f)=>L.push(f));let T=Object.create(null);T.cwd=A,T.env=J(E.env,!1);let C=this._getRuntimePath(O.runtime,A),x=void 0;if(F===l0.ipc)T.stdio=[null,null,null,"ipc"],L.push("--node-ipc");else if(F===l0.stdio)L.push("--stdio");else if(F===l0.pipe)x=u0.generateRandomPipeName(),L.push(`--pipe=${x}`);else if(Q6.isSocket(F))L.push(`--socket=${F.port}`);if(L.push(`--clientProcessId=${process.pid.toString()}`),F===l0.ipc||F===l0.stdio){let f=v9.spawn(C,L,T);if(!f||!f.pid)return ZJ(f,`Launching server using runtime ${C} failed.`);if(this._serverProcess=f,f.stderr.on("data",(d)=>this.outputChannel.append(d0.string(d)?d:d.toString(Z))),F===l0.ipc)return f.stdout.on("data",(d)=>this.outputChannel.append(d0.string(d)?d:d.toString(Z))),Promise.resolve({reader:new u0.IPCMessageReader(f),writer:new u0.IPCMessageWriter(f)});else return Promise.resolve({reader:new u0.StreamMessageReader(f.stdout),writer:new u0.StreamMessageWriter(f.stdin)})}else if(F===l0.pipe)return u0.createClientPipeTransport(x).then((f)=>{let d=v9.spawn(C,L,T);if(!d||!d.pid)return ZJ(d,`Launching server using runtime ${C} failed.`);return this._serverProcess=d,d.stderr.on("data",(_)=>this.outputChannel.append(d0.string(_)?_:_.toString(Z))),d.stdout.on("data",(_)=>this.outputChannel.append(d0.string(_)?_:_.toString(Z))),f.onConnected().then((_)=>{return{reader:_[0],writer:_[1]}})});else if(Q6.isSocket(F))return u0.createClientSocketTransport(F.port).then((f)=>{let d=v9.spawn(C,L,T);if(!d||!d.pid)return ZJ(d,`Launching server using runtime ${C} failed.`);return this._serverProcess=d,d.stderr.on("data",(_)=>this.outputChannel.append(d0.string(_)?_:_.toString(Z))),d.stdout.on("data",(_)=>this.outputChannel.append(d0.string(_)?_:_.toString(Z))),f.onConnected().then((_)=>{return{reader:_[0],writer:_[1]}})})}else{let L=void 0;return new Promise((E,T)=>{let C=(O.args&&O.args.slice())??[];if(F===l0.ipc)C.push("--node-ipc");else if(F===l0.stdio)C.push("--stdio");else if(F===l0.pipe)L=u0.generateRandomPipeName(),C.push(`--pipe=${L}`);else if(Q6.isSocket(F))C.push(`--socket=${F.port}`);C.push(`--clientProcessId=${process.pid.toString()}`);let x=O.options??Object.create(null);if(x.env=J(x.env,!0),x.execArgv=x.execArgv||[],x.cwd=A,x.silent=!0,F===l0.ipc||F===l0.stdio){let f=v9.fork(O.module,C||[],x);if(z(f),this._serverProcess=f,f.stderr.on("data",(d)=>this.outputChannel.append(d0.string(d)?d:d.toString(Z))),F===l0.ipc)f.stdout.on("data",(d)=>this.outputChannel.append(d0.string(d)?d:d.toString(Z))),E({reader:new u0.IPCMessageReader(this._serverProcess),writer:new u0.IPCMessageWriter(this._serverProcess)});else E({reader:new u0.StreamMessageReader(f.stdout),writer:new u0.StreamMessageWriter(f.stdin)})}else if(F===l0.pipe)u0.createClientPipeTransport(L).then((f)=>{let d=v9.fork(O.module,C||[],x);z(d),this._serverProcess=d,d.stderr.on("data",(_)=>this.outputChannel.append(d0.string(_)?_:_.toString(Z))),d.stdout.on("data",(_)=>this.outputChannel.append(d0.string(_)?_:_.toString(Z))),f.onConnected().then((_)=>{E({reader:_[0],writer:_[1]})},T)},T);else if(Q6.isSocket(F))u0.createClientSocketTransport(F.port).then((f)=>{let d=v9.fork(O.module,C||[],x);z(d),this._serverProcess=d,d.stderr.on("data",(_)=>this.outputChannel.append(d0.string(_)?_:_.toString(Z))),d.stdout.on("data",(_)=>this.outputChannel.append(d0.string(_)?_:_.toString(Z))),f.onConnected().then((_)=>{E({reader:_[0],writer:_[1]})},T)},T)})}}else if(d$.is(B)&&B.command){let O=B,F=B.args!==void 0?B.args.slice(0):[],L=void 0,E=B.transport;if(E===l0.stdio)F.push("--stdio");else if(E===l0.pipe)L=u0.generateRandomPipeName(),F.push(`--pipe=${L}`);else if(Q6.isSocket(E))F.push(`--socket=${E.port}`);else if(E===l0.ipc)throw new Error("Transport kind ipc is not support for command executable");let T=Object.assign({},O.options);if(T.cwd=T.cwd||A,E===void 0||E===l0.stdio){let C=v9.spawn(O.command,F,T);if(!C||!C.pid)return ZJ(C,`Launching server using command ${O.command} failed.`);return C.stderr.on("data",(x)=>this.outputChannel.append(d0.string(x)?x:x.toString(Z))),this._serverProcess=C,this._isDetached=!!T.detached,Promise.resolve({reader:new u0.StreamMessageReader(C.stdout),writer:new u0.StreamMessageWriter(C.stdin)})}else if(E===l0.pipe)return u0.createClientPipeTransport(L).then((C)=>{let x=v9.spawn(O.command,F,T);if(!x||!x.pid)return ZJ(x,`Launching server using command ${O.command} failed.`);return this._serverProcess=x,this._isDetached=!!T.detached,x.stderr.on("data",(f)=>this.outputChannel.append(d0.string(f)?f:f.toString(Z))),x.stdout.on("data",(f)=>this.outputChannel.append(d0.string(f)?f:f.toString(Z))),C.onConnected().then((f)=>{return{reader:f[0],writer:f[1]}})});else if(Q6.isSocket(E))return u0.createClientSocketTransport(E.port).then((C)=>{let x=v9.spawn(O.command,F,T);if(!x||!x.pid)return ZJ(x,`Launching server using command ${O.command} failed.`);return this._serverProcess=x,this._isDetached=!!T.detached,x.stderr.on("data",(f)=>this.outputChannel.append(d0.string(f)?f:f.toString(Z))),x.stdout.on("data",(f)=>this.outputChannel.append(d0.string(f)?f:f.toString(Z))),C.onConnected().then((f)=>{return{reader:f[0],writer:f[1]}})})}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(G,null,4)))}).finally(()=>{if(this._serverProcess!==void 0)this._serverProcess.on("exit",(A,O)=>{if(A!==null)this.error(`Server process exited with code ${A}.`,void 0,!1);if(O!==null)this.error(`Server process exited with signal ${O}.`,void 0,!1)})})}_getRuntimePath(Z,J){if(g$.isAbsolute(Z))return Z;let Y=this._mainGetRootPath();if(Y!==void 0){let $=g$.join(Y,Z);if(v$.existsSync($))return $}if(J!==void 0){let $=g$.join(J,Z);if(v$.existsSync($))return $}return Z}_mainGetRootPath(){let Z=z6.workspace.workspaceFolders;if(!Z||Z.length===0)return;let J=Z[0];if(J.uri.scheme==="file")return J.uri.fsPath;return}_getServerWorkingDir(Z){let J=Z&&Z.cwd;if(!J)J=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath();if(J)return new Promise((Y)=>{v$.lstat(J,($,Q)=>{Y(!$&&Q.isDirectory()?J:void 0)})});return Promise.resolve(void 0)}}_Z.LanguageClient=Uj;class wj{constructor(Z,J){this._client=Z,this._setting=J,this._listeners=[]}start(){return z6.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new z6.Disposable(()=>{if(this._client.needsStop())this._client.stop()})}onDidChangeConfiguration(){let Z=this._setting.indexOf("."),J=Z>=0?this._setting.substr(0,Z):this._setting,Y=Z>=0?this._setting.substr(Z+1):void 0,$=Y?z6.workspace.getConfiguration(J).get(Y,!1):z6.workspace.getConfiguration(J);if($&&this._client.needsStart())this._client.start().catch((Q)=>this._client.error("Start failed after configuration change",Q,"force"));else if(!$&&this._client.needsStop())this._client.stop().catch((Q)=>this._client.error("Stop failed after configuration change",Q,"force"))}}_Z.SettingMonitor=wj;function ZJ(Z,J){if(Z===null)return Promise.reject(J);return new Promise((Y,$)=>{Z.on("error",(Q)=>{$(`${J} ${Q}`)}),setImmediate(()=>$(J))})}});var Mj=D((sN,Pj)=>{Pj.exports=Fj()});var hH={};Rj(hH,{deactivate:()=>RH,activate:()=>yH});module.exports=yj(hH);var Ij=M4(require("node:path")),Tj=require("vscode"),F4=M4(Mj()),qj=M4(require("node:fs")),w4;function yH(Z){let{platform:J,arch:Y}=process,$;if(J==="win32"&&Y==="x64")$="mdrc-lsp-windows.exe";else if(J==="linux"&&Y==="x64")$="mdrc-lsp-linux";else if(J==="darwin"&&Y==="x64")$="mdrc-lsp-darwin-x64";else if(J==="darwin"&&Y==="arm64")$="mdrc-lsp-darwin-arm64";else throw new Error(`Unsupported platform: ${J}-${Y}`);let Q=Z.asAbsolutePath(Ij.join("bin",$));if(console.log("Starting LSP server with command:",Q),!qj.existsSync(Q))console.error("LSP binary not found at:",Q);let z={command:Q,args:[],transport:F4.TransportKind.stdio},G={documentSelector:[{scheme:"file",language:"markdownrealcode"}],synchronize:{fileEvents:Tj.workspace.createFileSystemWatcher("**/*.src.md")}};w4=new F4.LanguageClient("markdownRealCodeLsp","Markdown Real Code LSP",z,G),w4.start().catch((B)=>{console.error("Failed to start LSP client:",B)})}function RH(){return w4?w4.stop():void 0}

//# debugId=E7E12B60E5F3D2EE64756E2164756E21
